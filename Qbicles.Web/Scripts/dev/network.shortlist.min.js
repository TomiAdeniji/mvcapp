function showListShortlistGroups(){var n=$("#slgroup-search").val();$("#slgroup-list").empty();$("#slgroup-list").load("/Network/showListSlGroups",{keySearch:n})}function showAddEditSlGroupModal(n){LoadingOverlay();$("#networklistings-group-add").empty();$("#networklistings-group-add").load("/Network/showAddEditSlGroupView",{groupId:n});$("#networklistings-group-add").modal("show");LoadingOverlayEnd()}function initSaveSlGroupForm(){var n=$("#add-slgroup-form"),t=$("#group-id").val();n.validate({rules:{title:{required:!0},summary:{required:!0}}});n.submit(function(i){i.preventDefault();var r=document.getElementById("group-icon").files;n.valid()&&(LoadingOverlay(),r&&r.length>0?UploadMediaS3ClientSide("group-icon").then(function(n){if(n.objectKey==="no_image"||n.objectKey==="no-image"){LoadingOverlayEnd("hide");cleanBookNotification.error(_L("ERROR_MSG_S3_UPLOAD"),"Qbicles");return}var t={FileName:n.fileName,FileKey:n.objectKey,FileSize:n.fileSize};saveShortlistGroup(t)}):t<=0?(n.validate().showErrors({icon:"This field is required."}),LoadingOverlayEnd("hide")):saveShortlistGroup(null))})}function saveShortlistGroup(n){var t={Id:$("#group-id").val(),Title:$("#group-title").val(),Summary:$("#group-summary").val()};$.ajax({method:"POST",dataType:"JSON",url:"/Network/saveSlGroup",data:{slGroup:t,uploadModel:n},success:function(n){n.result?(cleanBookNotification.success("Save Shortlist Group successfully.","Qbicles"),showListShortlistGroups(),$("#networklistings-group-add").modal("hide")):cleanBookNotification.error(n.msg,"Qbicles");LoadingOverlayEnd()},error:function(n){cleanBookNotification(n.msg,"Qbicles");LoadingOverlayEnd()}})}function deleteSlGroup(n){if(confirm("Are you sure you want to delete this group? Any shortlisted candidates may be lost.")){LoadingOverlay();var t="/Network/deleteSlGroup?slGroupId="+n;$.ajax({method:"POST",dataType:"JSON",url:t,success:function(n){n.result?(cleanBookNotification.success("Delete Shortlist Group successfully.","Qbicles"),showListShortlistGroups()):cleanBookNotification.error(n.msg,"Qbicles")},error:function(n){cleanBookNotification.error(n.msg,"Qbicles")}});LoadingOverlayEnd()}}function removeSlGroupCandidate(n,t){LoadingOverlay();var i="/Network/RemoveSLGroupCandidate?userId="+n+"&slGroupId="+t;$.ajax({method:"POST",dataType:"JSON",url:i,success:function(n){n.result?(cleanBookNotification.success("Remove candidate successfully!","Qbicles"),$("#candidate-list").DataTable().ajax.reload()):cleanBookNotification.error(n.msg,"Qbicles")},error:function(n){cleanBookNotification.error(n.msg,"Qbicles")}});LoadingOverlayEnd()}function initSlGroupCandidateTable(){LoadingOverlay();$("#candidate-list").on("processing.dt",function(n,t,i){$("#processingIndicator").css("display","none");i&&$(".loadingoverlay").length===0?$("#candidate-list").LoadingOverlay("show"):$("#candidate-list").LoadingOverlay("hide",!0)}).DataTable({destroy:!0,bDestroy:!0,dom:'<"top"fl<"clear">>rt<"bottomtable"ip<"clear">>',language:{lengthMenu:"_MENU_ &nbsp; per page"},serverSide:!0,info:!0,stateSave:!1,bLengthChange:!0,paging:!0,searching:!1,responsive:!0,scrollX:!1,autoWidth:!0,lengthMenu:[[10,20,50,100],[10,20,50,100]],pageLength:10,createdRow:function(n,t){t.isCheckpoint&&$(n).removeClass().addClass("checkpoint even")},ajax:{url:"/Network/LoadShortlistGroupCandidates",type:"POST",dataType:"json",data:function(n){return $.extend({},n,{slGroupId:$("#active-group-id").val(),searchKey:$("#candidate-search-key").val()})}},columns:[{name:"userFullName",render:function(n,t,i){var r="";return r+='<a href="/Community/UserProfilePage?uId='+i.userId+'" target="_blank">',r+='<div class="table-avatar mini pull-left" style="background-image: url(\''+i.LogoUri+"');\"><\/div>",r+='<div class="avatar-name pull-left" style="color: #333; line-height: 4; padding-left: 15px;">'+i.userFullName+"<\/div>",r+='<div class="clearfix"><\/div>',r+"<\/a>"}},{name:"Email",data:"Email",orderable:!0},{name:"Tel",data:"Tel",orderable:!0},{name:"Job",data:"Job",orderable:!0},{name:"isConnectedC2C",data:"isConnectedC2C",render:function(n,t,i){return i.isConnectLabel}},{name:"Option",render:function(n,t,i){var r="";return r+='<div class="btn-group">',r+='<button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">',r+='Options &nbsp; <i class="fa fa-angle-down"><\/i>',r+="<\/button>",r+='<ul class="dropdown-menu dropdown-menu-right primary" style="right: 0;">',r+=i.isConnectedC2C?'<li><a href="javascript:void(0)" onclick="connectC2CPublicProfilePage(\''+i.userId+"', '"+i.userFullName+"', true)\">Talk in Community hub<\/a><\/li>":'<li><a href="javascript:void(0)" onclick="connectC2CPublicProfilePage(\''+i.userId+"', '"+i.userFullName+"', false)\">Connect<\/a><\/li>",r+="<li><a href=\"javascript:void(0)\" onclick=\"$('#candidate-id').val('"+i.userId+"');showChangeSlGroupView('"+i.userId+"')\">Change group<\/a><\/li>",r+='<li><a href="javascript:void(0)" onclick="removeSlGroupCandidate(\''+i.userId+"', "+$("#active-group-id").val()+')">Remove from list<\/a><\/li>',r+="<\/ul>",r+"<\/div>"}}]});LoadingOverlayEnd()}