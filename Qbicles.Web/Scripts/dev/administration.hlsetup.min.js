function LoadPropertyTypeContent(){$(".subnavr a").removeClass("active");$("#propertytype-tab").addClass("active");$("#tab-lists").is(":visible")&&$("#tab-lists").LoadingOverlay("show");$("#tab-lists").empty();$("#tab-lists").load("/HighlightSetup/ListPropertyTypePartialShow");$("#tab-lists").LoadingOverlay("hide")}function LoadPropertyExtraContent(){$(".subnavr a").removeClass("active");$("#propertyextra-tab").addClass("active");$("#tab-lists").is(":visible")&&$("#tab-lists").LoadingOverlay("show");$("#tab-lists").empty();$("#tab-lists").load("/HighlightSetup/ListPropertyExtraPartialShow");$("#tab-lists").LoadingOverlay("hide")}function LoadCountriesListTabContent(){$(".subnavr a").removeClass("active");$("#countries-tab").addClass("active");$("#countries-location").is(":visible")&&$("#countries-location").LoadingOverlay("show");$("#countries-location").empty();$("#countries-location").load("/HighlightSetup/ListCountriesPartial");$("#countries-location").LoadingOverlay("hide")}function LoadHLLocationContent(){$(".subnavr a").removeClass("active");$("#locationlist-tab").addClass("active");$("#countries-location").is(":visible")&&$("#countries-location").LoadingOverlay("show");$("#countries-location").empty();$("#countries-location").load("/HighlightSetup/ListHLLocationPartialShow");$("#countries-location").LoadingOverlay("hide")}function ShowAddEditPropertyTypeModal(n){var t="/HighlightSetup/AddEditPropertyTypeModalShow?propertyTypeId="+n;AjaxElementShowModal(t,"add-edit-propertytype_modal")}function ShowAddEditPropertyExtraModal(n){var t="/HighlightSetup/AddEditPropertyExtraModalShow?propertyExtraId="+n;AjaxElementShowModal(t,"add-edit-propertyextra_modal")}function ShowAddEditLocationGroupModal(n){var t="/HighlightSetup/AddEditLocationGroupModalShow?groupId="+n;AjaxElementShowModal(t,"add-edit-locationgroup_modal")}function ShowAddEditLocationModal(n){var t="/HighlightSetup/AddEditLocationsModalShow?locationId="+n;AjaxElementShowModal(t,"add-edit-location_modal")}function ShowAddEditBusinessCategoryModal(n){var t="/HighlightSetup/AddEditBusinessCategoryModalShow?id="+n;AjaxElementShowModal(t,"add-edit-businesscategory_modal")}function initPropertyTypeFormToSave(){var n=$("#form-propertytype");n.validate({rule:{Name:{required:!0}}});n.submit(function(t){if(t.preventDefault(),n.valid()){var i=$("#propertyTypeId").val(),r={Id:i,Name:$("#property-type-name").val()};LoadingOverlay();$.ajax({method:"POST",dataType:"JSON",url:"/HighlightSetup/AddEditPropertyType",data:{propertyType:r},success:function(t){t.result?(Number(i)>0?cleanBookNotification.updateSuccess():cleanBookNotification.success("Added PropertyType successfully.","Qbicles"),$("#propertyType-table").DataTable().ajax.reload(),$("#add-edit-propertytype_modal").modal("toggle")):n.validate().showErrors({Name:t.msg})},error:function(n){cleanBookNotification.error(n.msg,"Qbicles")}}).always(function(){LoadingOverlayEnd()})}})}function DeletePropertyType(n){var t="/HighlightSetup/DeletePropertyType?propertyTypeId="+n;LoadingOverlay();$.ajax({method:"POST",dataType:"JSON",url:t,success:function(n){n.result?(cleanBookNotification.removeSuccess(),$("#propertyType-table").DataTable().ajax.reload()):cleanBookNotification.error(n.msg,"Qbicles")},error:function(n){cleanBookNotification.error(n.msg,"Qbicles")}}).always(function(){LoadingOverlayEnd()})}function initPropertyExtraFormToSave(){var n=$("#form-propertyextra");n.validate({rule:{Name:{required:!0}}});n.submit(function(t){if(t.preventDefault(),n.valid()){var i=$("#propertyExtraId").val(),r={Id:i,Name:$("#property-extra-name").val()};LoadingOverlay();$.ajax({method:"POST",dataType:"JSON",url:"/HighlightSetup/AddEditPropertyExtra",data:{propertyExtra:r},success:function(t){t.result?(Number(i)>0?cleanBookNotification.updateSuccess():cleanBookNotification.success("Added PropertyExtra successfully.","Qbicles"),$("#propertyExtra-table").DataTable().ajax.reload(),$("#add-edit-propertyextra_modal").modal("toggle")):n.validate().showErrors({Name:t.msg})},error:function(n){cleanBookNotification.error(n.msg,"Qbicles")}}).always(function(){LoadingOverlayEnd()})}})}function DeletePropertyExtra(n){var t="/HighlightSetup/DeletePropertyExtra?propertyExtraId="+n;LoadingOverlay();$.ajax({method:"POST",dataType:"JSON",url:t,success:function(n){n.result?(cleanBookNotification.removeSuccess(),$("#propertyExtra-table").DataTable().ajax.reload()):cleanBookNotification.error(n.msg,"Qbicles")},error:function(n){cleanBookNotification.error(n.msg,"Qbicles")}}).always(function(){LoadingOverlayEnd()})}function initLocationGroupFormToSave(){var n=$("#form-locationgroup");n.validate({rule:{Name:{required:!0}}});n.submit(function(t){if(t.preventDefault(),n.valid()){var i=$("#locationGroupId").val(),r={Id:i,Name:$("#location-group-name").val()};LoadingOverlay();$.ajax({method:"POST",dataType:"JSON",url:"/HighlightSetup/AddEditLocationGroup",data:{locationGroup:r},success:function(t){t.result?(Number(i)>0?cleanBookNotification.updateSuccess():cleanBookNotification.success("Add Location Group successfully.","Qbicles"),$("#countries-list-table").DataTable().ajax.reload(),$("#add-edit-locationgroup_modal").modal("toggle")):n.validate().showErrors({Name:t.msg})},error:function(n){cleanBookNotification.error(n.msg,"Qbicles")}}).always(function(){LoadingOverlayEnd()})}})}function DeleteLocationGroup(n){var t="/HighlightSetup/DeleteLocationGroup?groupId="+n;$.ajax({method:"POST",dataType:"JSON",url:t,success:function(n){n.result?(cleanBookNotification.removeSuccess(),$("#countries-list-table").DataTable().ajax.reload()):cleanBookNotification.error(n.msg,"Qbicles")},error:function(n){cleanBookNotification.error(n.msg,"Qbicles")}})}function initListingLocationFormToSave(){var n=$("#form-listinglocation");n.validate({rule:{Name:{required:!0},locationgroup:{required:!0}}});n.submit(function(t){if(t.preventDefault(),n.valid()){var i=$("#locationId").val(),r={Id:i,Name:$("#location-name").val()},u=$("#location-group").val();LoadingOverlay();$.ajax({method:"POST",dataType:"JSON",url:"/HighlightSetup/AddEditHLLocation",data:{location:r,countryName:u},success:function(t){t.result?(Number(i)>0?cleanBookNotification.updateSuccess():cleanBookNotification.success("Added ListingLocation successfully.","Qbicles"),$("#listing-location-table").DataTable().ajax.reload(),$("#add-edit-location_modal").modal("toggle")):n.validate().showErrors({Name:t.msg})},error:function(n){cleanBookNotification.error(n.msg,"Qbicles")}}).always(function(){LoadingOverlayEnd()})}})}function UpdateLocationCountry(n){var t=$(n).attr("locationIdAttr"),i=$(n).val(),r="/HighlightSetup/UpdateLocationCountry?locationId="+t+"&countryName="+i;LoadingOverlay();$.ajax({method:"POST",dataType:"JSON",url:r,success:function(n){n.result?cleanBookNotification.updateSuccess():(cleanBookNotification.error(n.msg,"Qbicles"),$("#listing-location-table").DataTable().ajax.reload())},error:function(n){cleanBookNotification.error(n.msg,"Qbicles");$("#listing-location-table").DataTable().ajax.reload()}}).always(function(){LoadingOverlayEnd()})}function DeleteListingLocation(n){var t="/HighlightSetup/DeleteListingLocation?locationId="+n;$.ajax({method:"POST",dataType:"JSON",url:t,success:function(n){n.result?(cleanBookNotification.removeSuccess(),$("#listing-location-table").DataTable().ajax.reload()):cleanBookNotification.error(n.msg,"Qbicles")},error:function(n){cleanBookNotification.error(n.msg,"Qbicles")}})}function initBusinessCategoryFormToSave(){var n=$("#form-businesscategory");n.validate({rule:{Name:{required:!0}}});n.submit(function(t){if(t.preventDefault(),n.valid()){var i=$("#businessCategoryId").val(),r={Id:i,Name:$("#form-businesscategory input[name=Name]").val()};LoadingOverlay();$.ajax({method:"POST",dataType:"JSON",url:"/HighlightSetup/AddEditBusinessCategory",data:{category:r},success:function(t){t.result?(i>0?cleanBookNotification.updateSuccess():cleanBookNotification.success(_L("ERROR_MSG_657"),"Qbicles"),reloadTableBusinessCategory(),$("#add-edit-businesscategory_modal").modal("hide")):n.validate().showErrors({Name:t.msg})},error:function(n){cleanBookNotification.error(n.msg,"Qbicles")}}).always(function(){LoadingOverlayEnd()})}})}function DeleteBusinessCategory(n){bootbox.confirm({show:!0,backdrop:!0,closeButton:!0,animate:!0,title:"Qbicles",message:_L("ERROR_MSG_708"),callback:function(t){if(t){var i="/HighlightSetup/DeleteBusinessCategory?id="+n;LoadingOverlay();$.ajax({method:"POST",dataType:"JSON",url:i,success:function(n){n.result?(cleanBookNotification.removeSuccess(),reloadTableBusinessCategory()):cleanBookNotification.error(n.msg,"Qbicles")},error:function(n){cleanBookNotification.error(n.msg,"Qbicles")}}).always(function(){LoadingOverlayEnd()});return}}})}function businessCatActive(n){$(n).next().children("a").addClass("active");reloadTableBusinessCategory()}function reloadTableBusinessCategory(){$.fn.DataTable.isDataTable("#tblBusinessCategories")?$("#tblBusinessCategories").DataTable().ajax.reload():wto=setInterval(function(){$.fn.DataTable.isDataTable("#tblBusinessCategories")&&($("#tblBusinessCategories").DataTable().ajax.reload(),clearInterval(wto))},1e3)}function SetProductDefaultActiveTab(n){$(n).next().children("a")[0].click()}function showItemBrandsTab(){$(".subnavr a").removeClass("active");$("#item-brands-tab").addClass("active");$("#products-specifics").is(":visible")&&$("#products-specifics").LoadingOverlay("show");$("#products-specifics").empty();$("#products-specifics").load("/Administration/ShowBrandsTab",function(){$("#brand-domain-dropdown").select2();initItemBrandsDT();$("#brand-domain-dropdown").on("change",function(){$("#item-brand-table").DataTable().ajax.reload()});$("#brand-text-search").keyup(delay(function(){$("#item-brand-table").DataTable().ajax.reload()},500))});$("#products-specifics").LoadingOverlay("hide")}function showItemProductTagsTab(){$(".subnavr a").removeClass("active");$("#item-product-tags-tab").addClass("active");$("#products-specifics").is(":visible")&&$("#products-specifics").LoadingOverlay("show");$("#products-specifics").empty();$("#products-specifics").load("/Administration/ShowProductTagsTab/",function(){$("#product-tag-domain-dropdown").select2();initItemProductTagsDT();$("#product-tag-domain-dropdown").on("change",function(){$("#item-product-tag-table").DataTable().ajax.reload()});$("#product-tag-key-search").keyup(delay(function(){$("#item-product-tag-table").DataTable().ajax.reload()},500))});$("#products-specifics").LoadingOverlay("hide")}function initItemBrandsDT(){var n=$("#brand-text-search"),t=$("#brand-domain-dropdown");$("#item-brand-table").on("processing.dt",function(n,t,i){$("#processingIndicator").css("display","none");i?$("#item-brand-table").LoadingOverlay("show"):$("#item-brand-table").LoadingOverlay("hide",!0)}).DataTable({destroy:!0,serverSide:!0,paging:!0,searching:!1,responsive:!0,lengthMenu:[[5,10,20,50,100],[5,10,20,50,100]],pageLength:10,ajax:{url:"/Administration/GetAdditionalInforDTData",type:"POST",data:function(i){return keySearch="",domainKey="",n.length>0&&(keySearch=n.val()),t.length>0&&(domainKey=t.val()),$.extend({},i,{keySearch:keySearch,domainKey:domainKey,type:1})}},columns:[{data:"Name",orderable:!0},{data:"DomainName",orderable:!0,render:function(n,t,i){return'<a href="/Commerce/PublishBusinessProfile?id='+i.DomainId+'&isDomainId=true" target="_blank">'+i.DomainName+"<\/a>"}},{data:"CreatedDate",orderable:!0,render:function(n,t,i){return i.CreatedDateStr+" <a href='/Community/UserProfilePage?uId="+i.UserId+"' target='_blank'>"+i.CreatedByName+"<\/a>"}},{data:"AssociatedNumber",orderable:!1},{data:"Id",orderable:!1,render:function(n,t,i){var r='<button class="btn btn-warning" onclick="openAddEditBrandModal('+i.Id+", '"+i.Name+"', "+i.DomainId+')"><i class="fa fa-pencil"><\/i><\/button> ';return i.AssociatedNumber!=0?r:r+('<button class="btn btn-danger" onclick="adminDeleteAdditional('+i.Id+", '"+i.Name+'\', 1)"><i class="fa fa-trash"><\/i><\/button>')}}]})}function initItemProductTagsDT(){var n=$("#product-tag-key-search"),t=$("#product-tag-domain-dropdown");$("#item-product-tag-table").on("processing.dt",function(n,t,i){$("#processingIndicator").css("display","none");i?$("#item-product-tag-table").LoadingOverlay("show"):$("#item-product-tag-table").LoadingOverlay("hide",!0)}).DataTable({destroy:!0,serverSide:!0,paging:!0,searching:!1,responsive:!0,lengthMenu:[[5,10,20,50,100],[5,10,20,50,100]],pageLength:10,ajax:{url:"/Administration/GetAdditionalInforDTData",type:"POST",data:function(i){return keySearch="",domainKey="",n.length>0&&(keySearch=n.val()),t.length>0&&(domainKey=t.val()),$.extend({},i,{keySearch:keySearch,domainKey:domainKey,type:4})}},columns:[{data:"Name",orderable:!0},{data:"DomainName",orderable:!0,render:function(n,t,i){return'<a href="/Commerce/PublishBusinessProfile?id='+i.DomainId+'&isDomainId=true" target="_blank">'+i.DomainName+"<\/a>"}},{data:"CreatedDate",orderable:!0,render:function(n,t,i){return i.CreatedDateStr+" <a href='/Community/UserProfilePage?uId="+i.UserId+"' target='_blank'>"+i.CreatedByName+"<\/a>"}},{data:"AssociatedNumber",orderable:!1},{data:"Id",orderable:!1,render:function(n,t,i){var r='<button class="btn btn-warning" onclick="openAddEditProductTagModal('+i.Id+", '"+i.Name+"', "+i.DomainId+')"><i class="fa fa-pencil"><\/i><\/button> ';return i.AssociatedNumber!=0?r:r+('<button class="btn btn-danger" onclick="adminDeleteAdditional('+i.Id+", '"+i.Name+'\', 4)" ><i class="fa fa-trash"><\/i><\/button>')}}]})}function openAddEditBrandModal(n,t,i){resetForm("add-edit-brand");$("#editting-brand-id").val(n);$("#editting-brand-name-hiden").val(t);$("#editting-brand-name").val(t);$("#save-brand-modal-domain-selector").val(i).change();n>0?$("#brand-modal-title").text("Edit Brand"):($("#brand-modal-title").text("Add a Brand"),$("#save-brand-modal-domain-selector option:eq(0)").prop("selected",!0).change());$("#save-brand-modal-domain-selector").not(".multi-select").select2();$("#app-trader-resources-brand-add").modal("show")}function openAddEditProductTagModal(n,t,i){resetForm("add-edit-product-tag");$("#editting-product-tag-id").val(n);$("#editting-product-tag-name").val(t);$("#editting-product-tag-name-hiden").val(t);$("#save-product-tag-modal-domain-selector").val(i).change();n>0?$("#product-tag-modal-title").text("Edit Product Tag"):($("#product-tag-modal-title").text("Add a Product Tag"),$("#save-product-tag-modal-domain-selector option:eq(0)").prop("selected",!0).change());$("#save-product-tag-modal-domain-selector").not(".multi-select").select2();$("#app-trader-resources-tag-add").modal("show")}function resetForm(n){ClearError();$("#"+n)[0].reset();$("#"+n).validate().resetForm()}function adminDeleteAdditional(n,t,i){var r="Are you sure you want delete this ",u,f;(r+=i==1?"Brand: "+t+" ?":"Product tag: "+t+" ?",u=confirm(r),u!==!1)&&(f="/TraderResource/DeleteAdditionalInfo?id="+n,$.LoadingOverlay("show"),$.ajax({url:f,type:"delete",dataType:"json",success:function(n){if(LoadingOverlayEnd(),n.actionVal===1){cleanBookNotification.removeSuccess();switch(i){case 1:$("#item-brand-table").DataTable().ajax.reload();case 4:$("#item-product-tag-table").DataTable().ajax.reload()}}else n.actionVal===3&&cleanBookNotification.removeFail()},error:function(n){cleanBookNotification.error(n,"Qbicles");LoadingOverlayEnd()}}).always(function(){LoadingOverlayEnd()}))}var wto;initPropertyTypeTable=function(){var n=$("#propertyType-table").on("processing.dt",function(n,t,i){$("#processingIndicator").css("display","none");i?$("#propertyType-table").LoadingOverlay("show",{minSize:"70x60px"}):$("#propertyType-table").LoadingOverlay("hide",!0)}).DataTable({destroy:!0,serverSide:!0,paging:!0,searching:!1,responsive:!0,lengthMenu:[[10,20,50,100],[10,20,50,100]],pageLength:10,ajax:{url:"/HighlightSetup/LoadPropertyType",type:"POST",data:function(n){return $.extend({},n,{propertyNameSearch:$("#keysearch").val(),creatorId:$("#propertycreator").val()})}},columns:[{data:"Name",orderable:!0},{data:"CreatorName",orderable:!0},{data:"Options",orderable:!1,render:function(n,t,i){var r="";return r+='<button class="btn btn-warning" onclick="ShowAddEditPropertyTypeModal('+i.Id+')"><i class="fa fa-pencil"><\/i><\/button> ',r+('<button class="btn btn-danger" onclick="DeletePropertyType('+i.Id+')"><i class="fa fa-trash"><\/i><\/button>')}},]})};initPropertyExtraTable=function(){var n=$("#propertyExtra-table").on("processing.dt",function(n,t,i){$("#processingIndicator").css("display","none");i?$("#propertyExtra-table").LoadingOverlay("show",{minSize:"70x60px"}):$("#propertyExtra-table").LoadingOverlay("hide",!0)}).DataTable({destroy:!0,serverSide:!0,paging:!0,searching:!1,responsive:!0,lengthMenu:[[10,20,50,100],[10,20,50,100]],pageLength:10,ajax:{url:"/HighlightSetup/LoadPropertyExtra",type:"POST",data:function(n){return $.extend({},n,{propertyNameSearch:$("#keysearch").val(),creatorId:$("#propertycreator").val()})}},columns:[{data:"Name",orderable:!0},{data:"CreatorName",orderable:!0},{data:"Name",orderable:!1,render:function(n,t,i){var r="";return r+='<button class="btn btn-warning" onclick="ShowAddEditPropertyExtraModal('+i.Id+')"><i class="fa fa-pencil"><\/i><\/button> ',r+('<button class="btn btn-danger" onclick="DeletePropertyExtra('+i.Id+')"><i class="fa fa-trash"><\/i><\/button>')}}]})};initCountriesTable=function(){$("#countries-list-table").on("processing.dt",function(n,t,i){$("#processingIndicator").css("display","none");i?$("#countries-list-table").LoadingOverlay("show",{minSize:"70x60px"}):$("#countries-list-table").LoadingOverlay("hide",!0)}).DataTable({destroy:!0,serverSide:!0,paging:!0,searching:!1,responsive:!0,lengthMenu:[[10,20,50,100],[10,20,50,100]],pageLength:10,ajax:{url:"/HighlightSetup/LoadCountries",type:"POST",data:function(n){return $.extend({},n,{keySearch:$("#groupname-search").val()})}},columns:[{data:"CommonName",orderable:!0}]})};initListingLocationTable=function(){$("#listing-location-table").on("processing.dt",function(n,t,i){$("#processingIndicator").css("display","none");i?$("#listing-location-table").LoadingOverlay("show",{minSize:"70x60px"}):$("#listing-location-table").LoadingOverlay("hide",!0)}).DataTable({destroy:!0,serverSide:!0,paging:!0,searching:!1,responsive:!0,lengthMenu:[[10,20,50,100],[10,20,50,100]],pageLength:10,ajax:{url:"/HighlightSetup/LoadHLLocations",type:"POST",data:function(n){return $.extend({},n,{locationNameString:$("#location-search-key").val(),countryName:$("#locationgroup").val().trim()})}},columns:[{data:"Name",orderable:!0},{data:"Group",orderable:!0,render:function(n,t,i){return JSON.stringify(i.GroupListRenderString).slice(1,-1)}},{data:"Options",orderable:!1,render:function(n,t,i){var r="";return r+='<button class="btn btn-warning" onclick="ShowAddEditLocationModal('+i.Id+')"><i class="fa fa-pencil"><\/i><\/button> ',r+('<button class="btn btn-danger" onclick="DeleteListingLocation('+i.Id+')"><i class="fa fa-trash"><\/i><\/button>')}}],drawCallback:function(){$(".locationselect2").select2()}})};initBusinessCatalogiesTable=function(){$("#tblBusinessCategories").on("processing.dt",function(n,t,i){$("#processingIndicator").css("display","none");i?$("#tblBusinessCategories").LoadingOverlay("show"):$("#tblBusinessCategories").LoadingOverlay("hide",!0)}).DataTable({destroy:!0,serverSide:!0,paging:!0,searching:!1,responsive:!0,lengthMenu:[[10,20,50,100],[10,20,50,100]],pageLength:10,deferLoading:30,ajax:{url:"/HighlightSetup/LoadBusinessCategories",type:"POST",data:function(n){return $.extend({},n,{keyword:$("#business-categories input[name=Search]").val()})}},columns:[{data:"Name",orderable:!0},{data:"Id",orderable:!1,render:function(n,t,i){var r="";return r+='<button class="btn btn-warning" onclick="ShowAddEditBusinessCategoryModal('+i.Id+')"><i class="fa fa-pencil"><\/i><\/button> ',r+('<button class="btn btn-danger" onclick="DeleteBusinessCategory('+i.Id+')"><i class="fa fa-trash"><\/i><\/button>')}}]})};$(document).ready(function(){initBusinessCatalogiesTable()});