function UpdateStatusApproval(n){var t=$("#action_approval_default").val();$.LoadingOverlay("show");CheckStatusApproval(n).then(function(i){if(LoadingOverlayEnd(),i.result&&i.Object.toLocaleLowerCase()==t.toLocaleLowerCase()){$("#approval-button div.loading-approval").removeClass("hidden");$("#approval-button div.general-approval").addClass("hidden");$("#approval-button").addClass("animated shake disabled");$("#spot-count-item-tbody").addClass("disabled");var r=$("#action_approval").val();LoadingOverlay();$.ajax({url:"/Qbicles/SetRequestStatusForApprovalRequest",type:"GET",dataType:"json",data:{appKey:n,status:r},success:function(n){LoadingOverlayEnd();n.actionVal>0&&RenderContentUpdated(!0);$("#approval-button div.loading-approval").addClass("hidden");$("#approval-button div.general-approval").removeClass("hidden")},error:function(){LoadingOverlayEnd();$("#spot-count-item-tbody").removeClass("disabled");$("#approval-button div.loading-approval").addClass("hidden");$("#approval-button div.general-approval").removeClass("hidden");cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}})}else cleanBookNotification.error(_L("ERROR_MSG_247"),"Qbicles"),setTimeout(function(){RenderContentUpdated()},1500)})}function RenderContentUpdated(n){LoadingOverlay();$("#manujob_view_content").empty();$("#manujob_view_content").load("/Manufacturing/ManuJobReviewContent?id="+$manuJobId,function(){LoadingOverlayEnd();n&&setTimeout(function(){cleanBookNotification.updateSuccess()},400)})}var $manuJobId=$("#manu-job-id").val();$(function(){$("textarea").each(function(){$(this).val($(this).val().trim())})});UpdateManuJobReview=function(){$.LoadingOverlay("show");CheckStatus($manuJobId,"ManuJob").then(function(n){if(LoadingOverlayEnd(),n.result&&n.Object!="Approved"){$.LoadingOverlay("show");var t={Id:$("#unit-select").val()},i={Id:$manuJobId,AssemblyUnit:t,Quantity:$("#item-quantity").val()};$.ajax({type:"post",url:"/Manufacturing/UpdateManuJobReview",data:{manuJob:i},dataType:"json",success:function(){LoadingOverlayEnd();cleanBookNotification.updateSuccess()},error:function(){LoadingOverlayEnd();cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}})}else n.result&&n.Object=="Approved"?cleanBookNotification.error(_L("ERROR_MSG_272"),"Qbicles"):n.result==!1&&cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles");LoadingOverlayEnd()})};