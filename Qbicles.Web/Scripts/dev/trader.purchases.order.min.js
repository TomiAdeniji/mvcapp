function DownloadPurchaseOrder(n){$.LoadingOverlay("show");var t="Purchase-Order-"+n+".pdf";$.ajax({type:"post",url:"/TraderPurchases/DownloadFile",datatype:"json",data:{saleOrderId:n},success:function(n){LoadingOverlayEnd();var i=document.createElement("a");i.download=t;i.href=n;document.body.appendChild(i);i.click();document.body.removeChild(i);delete i},error:function(n){cleanBookNotification.error(n.responseText,"Qbicles");LoadingOverlayEnd()}})}function IssuePurchaseOrder(n){var t=$("#mail-addresses").val(),i;if(t.length>0&&(i=validateEmails(t),i.length>0)){cleanBookNotification.error("Email format is not correct: '\n'"+i,"Qbicles");return}$("#adding-other-mail-addresses").LoadingOverlay("show");$.ajax({url:"/TraderPurchases/IssuePurchaseOrder",type:"POST",dataType:"json",data:{id:n,emails:t},success:function(n){n.result&&(document.getElementById("download-1").style.cursor="pointer",document.getElementById("download-2").disabled=!1,$("#download-3").removeClass("disabled"),$("#sale-order-issue").text("Yes"),cleanBookNotification.updateSuccess(),$("#adding-other-mail-addresses").modal("hide"))},error:function(n){cleanBookNotification.error(n.responseText,"Qbicles");cleanBookNotification.error("Issue error: "+n,"Qbicles")}}).always(function(){$("#adding-other-mail-addresses").LoadingOverlay("hide")})}function OpenIssuePurchaseOrderModal(){$("#mail-addresses").text("");$("#mail-addresses").val("");$("#adding-other-mail-addresses").modal("show")}