function SelectedChangeBu(n){$transferRequirement==="p2p"||$editMode!==""?SetTransferCost(n):$transferRequirement==="goods_in"?SetTransferCostPurchase(n):$transferRequirement==="goods_out"&&SetTransferCostSale(n)}function SetTransferCost(n){$editMode==="Sale"?SetTransferCostSale(n):$editMode==="Purchase"&&SetTransferCostPurchase(n)}function SetTransferCostSale(n){calculationTransferQuantity(n,".total_sale_")}function SetTransferCostPurchase(n){calculationTransferQuantity(n,".total_purchase_")}function calculationTransferQuantity(n,t){var r=0,f=parseFloat($(t+n).val()),u=parseFloat($(".transfer_tr_"+n+" td.transfer_td_tran_quan input").val()),e,i;u<0&&(u=0,$(".transfer_tr_"+n+" td.transfer_td_tran_quan input").val(u));e=$(".transfer_tr_"+n+" td select.transfer_td_tran_unit").val().split("|");i=e[2];r=f-u*i;r<0&&(u=f,r=0,i==="0"&&(i=1),cleanBookNotification.warning(_L("ERROR_MSG_638",[f/i]),"Qbicles"),$(".transfer_tr_"+n+" td.transfer_td_tran_quan input").val(f/i));r=r/parseFloat(i);$(".transfer_td_tran_cost_"+n+" span").text(r)}