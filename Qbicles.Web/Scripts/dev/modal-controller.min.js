function generateMediaForActivityPage(n,t){isPlaceholder(!1,"");var i="";i+='<article class="activity media">';i+="<div class='activity-avatar' style=\"background-image: url('"+n.CreatedAvatar+"&size=T');\"><\/div>";i+='<div class="activity-detail" style="width: 100%; max-width: 100%;">';i+='<div class="activity-meta">';i+="<h4>"+n.CreatedByName+"<\/h4>";i+='<small class="db-date">'+n.CreatedDate+"<\/small>";i+='<br class="visible-xs">';i+="<\/div>";i+='<div class="activity-overview media">';i+='<div class="row">';i+='<div class="col-xs-12 col-sm-5 col-lg-4">';i+='<a href="javascript:void(0)" onclick="ShowMediaPage(\''+n.Key+"')\">";i+=' <img src="'+n.ImgPath+'" class="img-responsive">';i+="<\/a>";i+="<\/div>";i+='<div class="col-xs-12 col-sm-7 col-lg-8 description">';i+="<h5>"+n.Name+"<\/h5>";i+="<p>";i+=" "+n.Description+" ";i+="<\/p>";i+="<small>"+n.Type+' | Update <span class="db-start-date">'+n.LastUpdate+"<\/span><\/small>";i+="<\/div>";i+="<\/div>";i+="<\/div>";i+="<\/div>";i+='<div class="clearfix"><\/div>';i+="<\/article>";isDisplayFlicker(!1);t?$("#list-medias").append(i):$("#list-medias").prepend(i)}function generateMediaForDashboardPage(n,t){isPlaceholder(!1,"");var i="<div class='col'>";i+="<div class='media-folder-item activity-overview task'>";i+='<a href="javascript:void(0)" onclick="ShowMediaPage(\''+n.Key+"',false)\">";i+="<div class='preview' style=\"background-image: url('"+n.ImgPath+"');\"><\/div>";i+="<\/a>";i+="<div class='meta_desc'>";i+="<h5>"+n.Name+"<\/h5>";i+="<small>"+n.Type+" &nbsp; | &nbsp; Updated "+n.LastUpdate+"<\/small>";i+="<\/div>";i+="<a href='#' data-toggle='modal' data-target='#move-media' onclick=\"QbicleLoadMoveMediaFolders("+n.FolderId+",'"+n.Key+"')\" class='btn btn-primary move'><i class='fa fa-exchange'><\/i> &nbsp; Move<\/a>";i+="<\/div>";i+="<\/div>";isDisplayFlicker(!1);t?$("#list-medias").append(i):$("#list-medias").prepend(i)}function AddNewAlertClick(n){ClearAlertInputModalAddEdit();$("#selectLinkAlertTo").select2().val([n]).change()}function ClearAlertInputModalAddEdit(){$("#alertName").val("");$("#selectAlertType").val($("#selectAlertType option:first").val());$("#selectAlertPriority").val($("#selectAlertPriority option:first").val());$("#txtcontent").val("");$("#falertAttachments").val("");$("#alert-topic-selected").val("");ClearError()}function SaveAlert(){if(!isBusyAddAlertForm){var n=$("#form_alert_addedit");n.valid()&&$.ajax({url:"/Alerts/DuplicateAlertNameCheck",data:{cubeId:$("#alertQbicleId").val(),alertId:$alertId,AlertName:$("#alertName").val()},type:"GET",dataType:"json"}).done(function(t){var i,r;t.result?n.validate().showErrors({Name:"Name of Alert already exists in the current Qbicle."}):(i=$("#falertAttachments"),i.val()?(r=checkfile(i.val()),r.stt?n.trigger("submit"):n.validate().showErrors({alertAttachments:r.err})):n.trigger("submit"))}).fail(function(){n.validate().showErrors({Name:"Error checking existing name of Alert in the current Qbicle"})})}}function SaveQbicleApprovals(){$("#form_approval_addedit").valid()&&$.ajax({url:"/Approvals/DuplicateApprovalNameCheck",data:{cubeId:$approvalQbicleId.val(),approvalId:$approvalId,approvalName:$approvalName.val()},type:"GET",dataType:"json","async":!1}).done(function(n){if(n.result)$("#form_approval_addedit").validate().showErrors({Name:"Name of Approval already exists in the current Qbicle."});else if($("#taskAttachments").val()){var t=checkfile($("#taskAttachments").val());t.stt?$("#form_approval_addedit").trigger("submit"):$("#form_approval_addedit").validate().showErrors({taskAttachments:t.err})}else $("#form_approval_addedit").trigger("submit")}).fail(function(){$("#form_approval_addedit").validate().showErrors({approvalName:"Error checking existing name of approval in the current Qbicle"})})}function AddnewApprovalClick(){ClearApprovalModal()}function ClearApprovalModal(){$approvalName.val("");$approvalAttachments.val("");$txtNotes.val("");$approvalId=0;$TypeOfRequest.val(0)}function AddnewUserDomain(){ClearUserInputModalAddEdit();$("#create-user").modal("show")}function ClearUserInputModalAddEdit(){$username.val("");$email.val("");$password.val("");$password_repeat.val("");$forename.val("");$surname.val("");$("#emailGuest").val("");ClearError()}function SaveNewUser(){Save_User()}function Save_User(){$("#create-user-main").valid()&&$.ajax({url:"/Domain/CreateUser",data:{email:$email.val()},type:"GET",dataType:"json"}).done(function(n){n.result?window.location.reload(!0):$("#create-user-main").validate().showErrors({email:n.msg})}).fail(function(){$("#create-user-main").validate().showErrors({email:"Error invite user into current Domain."})})}function SaveNewGuestDiscussion(){SaveGuestDiscussion()}function SaveGuestDiscussion(){$("#create-guest-discussion-main").valid()&&$.ajax({url:"/Discussions/AddNewGuestToDiscussion",data:{email:$("#emailGuest").val()},type:"GET",dataType:"json"}).done(function(n){n.result?($("#create-guest").modal("hide"),$("#emailGuest").val("")):$("#create-guest-discussion-main").validate().showErrors({emailGuest:n.msg})}).fail(function(){$("#create-guest-discussion-main").validate().showErrors({emailGuest:"Error invite guest into current Discussion."})})}function AddNewParticipantUsersToDiscussion(){$selectUsersDomains.select2().val(null).change()}function SaveParticipantUsersToDiscussion(){$("#create-participant-domain").valid()&&$.ajax({url:"/Discussions/AddNewParticipantToDiscussion",type:"POST",dataType:"json",data:{usersDomainAssign:$selectUsersDomains.val()}}).done(function(n){if(n.result){var t=$selectUsersDomains.val();$("#create-participant").modal("hide");$.each(t,function(n,t){$("#selectUsersDomains option[value='"+t+"']").remove().trigger("change")})}else $("#create-participant-domain").validate().showErrors({"usersDomainAssign[]":n.msg})}).fail(function(){$("#create-participant-domain").validate().showErrors({"usersDomainAssign[]":"Error invite user into current Discussion."})})}function showImageFromInputFile(n){if(n.files&&n.files[0]){var t=new FileReader;t.onload=function(n){$("#domain-logo").attr("src",n.target.result);$("#domain-logo").css({display:"block"})};t.readAsDataURL(n.files[0])}}function createRowForDomainTable(n){var i=n.Status===2?"Closed":"Active",r=n.Status===1?"Close Domain":"Open Domain",t="";return t+="    <tr>",t+="<td class='table_avatar'><div id ='avatar-"+n.Id+"' class='table-avatar' style='background-image: url(\""+n.LogoUri+"&size=T\");'>&nbsp;<\/div><\/td> ",t+='                   <td id="name-'+n.Id+'">'+n.Name+"<\/td>                                                                                                         ",t+="                   <td>"+n.CreatedDate+"<\/td>                                                                                              ",t+='                   <td id="status-'+n.Id+'">'+i+"<\/td>                                    ",t+="                   <td>                                                                                                                                           ",t+='                       <div class="btn-group options">                                                                                                            ',t+='                           <button type="button" class="btn btn-success dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">       ',t+='                               Options &nbsp; <i class="fa fa-angle-down"><\/i>                                                                                    ',t+="                           <\/button>                                                                                                                              ",t+='                           <ul class="dropdown-menu">                                                                                                             ',t+='                                   <li><a href="javascript:void(0)" id="edit-anchor-'+n.Id+'" onclick="editDomain(\''+n.Id+"','"+n.Name+"', '"+n.LogoPath+"')\">Edit Domain<\/a><\/li>           ",t+="                                   <li>                                                                                                                           ",t+='                                       <a href="javascript:void(0)" id="openOrClose-'+n.Id+'" onclick="openOrCloseDomainById(\''+n.Id+"')\"> "+r+"  <\/a>     ",t+="                                   <\/li>                                                                                                                          ",t+="                           <\/ul>                                                                                                                                  ",t+="                       <\/div>                                                                                                                                     ",t+="                   <\/td>                                                                                                                                          ",t+"               <\/tr>           "}function OurPeopleManageUser(){var n=window.location.href;$.ajax({type:"post",url:"/Tasks/SetTaskSelected",datatype:"json",data:{id:0,goBack:n},success:function(){}})}function AddNewProcessGroup(){$("#group-name-input").val("")}function SaveProcessGroup(n){$("#form-process-group").valid()&&$.ajax({url:"/ProcessDocumentation/DuplicateProcessGroupNameCheck",data:{GroupId:n,GroupName:$("#group-name-input").val()},type:"GET",dataType:"json"}).done(function(n){n.result?$("#form-process-group").validate().showErrors({name:"Process Group name already in use."}):$("#form-process-group").trigger("submit")}).fail(function(){$("form-process-group").validate().showErrors({name:_L("ERROR_MSG_11")})})}function AddNewProcess(n,t){ResetForm();$processGroupId=n;$("#selectProcessOwner").select2({maximumSelectionLength:1}).val([t]).change()}function AddStepToList(){$("#form_process_step_addedit").valid()&&$("#form_process_step_addedit").trigger("submit")}function AddDocumentTolist(){$("#form_process_related_addedit").valid()&&$("#form_process_related_addedit").trigger("submit")}function ValidProcessTab(){$("#form_process_addedit").valid()?NextTab(2):NextTab(-1)}function NextTab(n){$(document).find(".active").removeClass("active");switch(n){case-1:$("#tab1").addClass("in active");$("#tab1-li").addClass("in active");break;case-2:$("#tab2").addClass("in active");$("#tab2-li").addClass("in active");break;case 2:$("#tab2").addClass("in active");$("#tab2-li").addClass("in active");break;case 3:$("#tab3").addClass("in active");$("#tab3-li").addClass("in active")}}function ClearProcessForm(){document.getElementById("form_process_addedit").reset();ClearProcessPicture()}function ClearProcessPicture(){$("#processPictureId").val("");$("#processPictureId").attr("src","https://www.placehold.it/300x250/EFEFEF/AAAAAA&text=no+image+selected")}function ResetForm(){ClearProcessForm();ClearDocumentForm();ClearStepForm();ClearError();$(document).find(".active").removeClass("active");$(".toggleable").hide();$("#approval_related option:first").attr("selected","selected");$("#pro-document-tr").empty();$("#ul-pro-step").empty();$("#tab1").addClass("in active");$("#tab1-li").addClass("in active")}function ClearStepPicture(){$("#stepPictureId").val("");$("#stepPicture").attr("src","https://www.placehold.it/300x250/EFEFEF/AAAAAA&text=no+image+selected")}function ClearStepForm(){document.getElementById("form_process_step_addedit").reset();ClearStepPicture();$stepEdit=null;$stepEditId=null}function ClearDocumentForm(){document.getElementById("form_process_related_addedit").reset();ClearDocumentPicture();ClearError()}function ClearDocumentPicture(){$("#documentPictureId").val("");$("#documentPicture").attr("src","https://www.placehold.it/300x250/EFEFEF/AAAAAA&text=no+image+selected")}function FinishAndSave(){$(".process-form input").each(function(){$.trim($(this).val()).length===0&&($(document).find(".active").removeClass("active"),$("#tab1").addClass("in active"),$("#tab1-li").addClass("in active"),$("#form_process_addedit").trigger("submit"))});var n=$(".pro-step-list").map(function(){var n=$(this).attr("id");return{Title:$(this).find("#TitlePreview-"+n).text(),Description:$(this).find("#DescriptionPreview-"+n).text(),StepImage:$(this).find("#StepImagePreview-"+n).text(),StepOrder:$(this).find("#StepOrderPreview-"+n).text()}}).get(),t=$(".pro-document-tr").map(function(){var n=$(this).attr("id");return{Document:$(this).find("#document-"+n).html(),DocumentImage:$(this).find("#documentImage-"+n).attr("data-url"),FileTypeId:$(this).find("#filetypeId-"+n).html()}}).get(),i=JSON.stringify(n),r=JSON.stringify(t),u=JSON.stringify($("#selectProcessOwner").val()),f={Id:$("#process-Id").val(),Name:$("#pro-Name").val(),Description:$("#pro-Description").val(),StartState:$("#pro-StartState").val(),EndState:$("#pro-EndState").val(),ProcessOwner:u,GroupId:$processGroupId,ProcessImage:$("#processImageUrl").val()};$.ajax({type:"post",url:"/Apps/FinishAndSaveProcess",dataType:"json",data:{process:f,documents:r,steps:i},success:function(n){if(n.result){if($("#process-Id").val()>0){window.location.reload(!0);return}var t=$("#group-top-"+$processGroupId);$(n.msg).insertAfter(t).hide().fadeIn(1500);$("#app-process-add").modal("hide")}else $(document).find(".active").removeClass("active"),$("#tab1").addClass("in active"),$("#tab1-li").addClass("in active"),$("#form_process_addedit").validate().showErrors({Name:n.msg})}})}function OpenProcessItem(n){window.location.href="/ProcessDocumentation/AppProcessDocumentationItem/"+n}function SearchProcess(){$("#process-group-div").empty();$("#textSearch").val();$.ajax({type:"POST",url:"/Apps/SearchProcess",data:{textSearch:$("#textSearch").val()},success:function(n){n.result&&$("#process-group-div").append(n.msg).hide().fadeIn(1e3)},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}})}function updateAppsForDomain(){var t=[],n;$(".apps-account:checkbox:checked").each(function(){t.push($(this).val())});n=[];$(".apps-account:checkbox:not(:checked)").each(function(){n.push($(this).val())});$.ajax({type:"POST",url:"/Apps/UpdateAppsForDomain",dataType:"JSON",data:JSON.stringify({appsIdAdded:t,appsIdRemoved:n,roleId:$("#selectRolesDomain").val()}),contentType:"application/json","async":!1,success:function(t){if(t.result){var i=t.Object;$.each(n,function(n,t){$("#row-"+t).remove()});GenerateRows2TableAppByArr(i);cleanBookNotification.updateSuccess();$("#add-app").modal("hide")}else cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")},error:function(n){cleanBookNotification.error(n.responseText,"Qbicles")}})}function RemoveStep(n){var t=$(n).closest("li"),i=t[0].id;t.css("background-color","#FF3700");t.fadeOut(1e3,function(){t.remove()});setTimeout(function(){updatePosition()},1550);ClearStepForm()}function EditStep(n){$stepEdit=$(n).closest("li");$stepEditId=$stepEdit[0].id;$("#pro-step-title").val($stepEdit.find($("#TitlePreview-"+$stepEditId)).text());$("#pro-step-description").val($stepEdit.find($("#DescriptionPreview-"+$stepEditId)).text());$("#stepPicture").attr("src",$stepEdit.find($("#StepImagePreview-"+$stepEditId)).text());$(".step_add").hide();$(".step_edit").show()}function ConfirmChangeStep(){$stepEdit.find($("#TitlePreview-"+$stepEditId)).text($("#pro-step-title").val());$stepEdit.find($("#DescriptionPreview-"+$stepEditId)).text($("#pro-step-description").val());$stepEdit.find($("#StepImagePreview-"+$stepEditId)).text($("#StepImage").val());ClearStepForm();$(".step_add").show();$(".step_edit").hide()}function CancelChangeStep(){ClearStepForm();$(".step_add").show();$(".step_edit").hide()}function RemoveDocument(n){var t=$("#"+n);t.css("background-color","#FF3700");t.fadeOut(1500,function(){t.remove()})}function processPictureChange(n){readURL(n,"processPicture")}function stepPictureChange(n){readURL(n,"stepPicture")}function documentPictureChange(n){readURL(n,"documentPicture")}function readURL(n,t){if(n.files&&n.files[0]){var i=new FileReader;i.onload=function(i){var f=$("#"+t),r,u;(f.attr("src",i.target.result),r=n.files[0],r)&&(u=new FormData,u.append("file",r),$.ajax({url:"/Apps/AddPictureProcessToGalerry",dataType:"json",type:"POST",data:u,processData:!1,contentType:!1}).done(function(n){n.result?t==="stepPicture"?$("#StepImage").val(n.msg):t==="documentPicture"?$("#DocumentImage").val(n.msg):t==="processPicture"?$("#processImageUrl").val(n.msg):t==="approvalPicture"&&$("#processImageUrl").val(n.msg):cleanBookNotification.error(n.msg,"Qbicles")}).error(function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}))};i.readAsDataURL(n.files[0])}}function updatePosition(){$(".sortable li").each(function(n){var t=n+1;$(this).find(".ordinal-position").text(t+ordinalSuffix(t));$(this).find(".ordinal-position-order").text(t)})}function SearchApprovalAppGroup(){$("#approval-group-div").empty();$("#textSearch").val();$.ajax({type:"POST",url:"/ApprovalApps/SearchProcess",data:{textSearch:$("#textSearch").val()},success:function(n){n.result&&$("#approval-group-div").append(n.msg).hide().fadeIn(1e3)},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}})}function bindTopicFromCookie(){var n=getCookie("topic_stream");n&&$("#toppic-value").val(n)}function genarateRowsForAtivityDetail(n){var t="";return n.forEach(function(n){var i="'"+n.ProfilePic+"&size=T'";t+='<article id="post-'+n.Id+'" class="activity post">';t+="<div class='activity-avatar' style=\"background-image: url("+i+');"><\/div>';t+='        <div class="activity-detail">';t+='            <div class="activity-meta">';t+="                <h4>"+n.FullName+"<\/h4>";t+='                <small class="db-date">'+n.CreatedDate+"<\/small>";t+="            <\/div>";t+='            <div class="activity-overview media-comment">';t+="                <p>"+n.Message+"<\/p>";t+="        <\/div>";t+="    <\/div>";t+='    <div class="clearfix"><\/div>';t+="<\/article>"}),console.log(t),t}function ShowNotifications(){$("#notifications").modal("show");$("#notification-modal-show").LoadingOverlay("show");var n=$("#notification-modal-show").height();n=n===0?"100%":n+"px";$("#notification-modal-show").css({height:n});$("#notification-modal-show li").remove();$("#btnRemoveallNotification").attr("disabled","disabled");$.ajax({type:"post",url:"/Notifications/ShowNotificationsModal",dataType:"json",data:{order:$("#orderNotification").val()},success:function(n){var r,t,i;if(!(n.length<=0))if($("#notification-modal-show").html(n.ModelString),$("#notification-modal-show input").length==0&&$(".checkall").prop("disabled",!0),$("#notification-modal-show").LoadingOverlay("hide",!0),strNotificationSelected!==""){for(r=!1,t=strNotificationSelected.split(","),i=0;i<t.length;++i)$("#post-notifi-"+t[i]).find(".cb-element").length>0&&($("#post-notifi-"+t[i]).find(".cb-element").prop("checked",!0),r=!0),$("#activity-notifi-"+t[i]).find(".cb-element").length>0&&($("#activity-notifi-"+t[i]).find(".cb-element").prop("checked",!0),r=!0),$("#qbicle-notifi-"+t[i]).find(".cb-element").length>0&&($("#qbicle-notifi-"+t[i]).find(".cb-element").prop("checked",!0),r=!0);$(".cb-element").length===t.length&&r?($(".checkall").data("checked",!0),$(".checkall").html("Uncheck all"),$(".removeall").prop("disabled",!1)):r&&($(".checkall").html("Check all"),$(".checkall").data("checked",!1),$(".removeall").prop("disabled",!1))}else $(".checkall").data("checked",!1),$(".checkall").html("Check all"),$(".removeall").prop("disabled",!0)},error:function(n){cleanBookNotification.error(n.responseText,"Qbicles");cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Show Notifications");$("#notification-modal-show").LoadingOverlay("hide",!0)}})}function InitNotificationsPagination(){$("#notifications").modal("show");var n=$("#data-container-notifications"),t=$("#pagiation-notifications");t.pagination({dataSource:"/Notifications/ShowNotificationsModal",locator:"items",totalNumberLocator:function(t){return n.LoadingOverlay("hide"),t.totalNumber},pageSize:5,autoHidePrevious:!0,autoHideNext:!0,prevText:"Previous",nextText:"Next",ajax:{data:{orderBy:$("#orderNotification").val()},beforeSend:function(){n.LoadingOverlay("show")}},callback:function(t){n.empty();n.html('<table class="datatable table-hover" data-orderable="false" style="width: 100%;"><tbody><\/tbody><\/table>');t.length>0&&t.forEach(function(n){$("#data-container-notifications tbody").append(n)});$(".checkall").data("checked",!1);$(".checkall").html("Check visible");$(".removeall").prop("disabled",!0);strNotificationSelected=""}})}function CheckNotifications(n){var t=($(n).val()+"").trim().split("_");$(n).is(":checked")?($("#btnRemoveallNotification").removeAttr("disabled"),strNotificationSelected===""?strNotificationSelected=t[0]:strNotificationSelected+=","+t[0]):(strNotificationSelected=strNotificationSelected.indexOf(t[0])===0?strNotificationSelected.replace(t[0]+",",""):strNotificationSelected.lastIndexOf(t[0])===strNotificationSelected.length?strNotificationSelected.replace(","+t[0],""):strNotificationSelected.replace(","+t[0],""),$("input[name='notifications[]']:checked").length===0?$("#btnRemoveallNotification").attr("disabled","disabled"):$("#btnRemoveallNotification").removeAttr("disabled"));$(".cb-element").length===strNotificationSelected.split(",").length?($(".checkall").data("checked",!0),$(".checkall").html("Uncheck all"),$(".removeall").prop("disabled",!1)):($(".checkall").html("Check all"),$(".checkall").data("checked",!1),$(".removeall").prop("disabled",!1))}function DeleteAllNotification(){var n="";$("input[name='notifications[]']:checked").length>0&&$("input[name='notifications[]']:checked").each(function(){n===""?n=$(this).val():n+=","+$(this).val()});console.log(n);MarkAsMultipleReadNotification(n)}function QbicleSelected(n,t,i){$.ajax({type:"post",url:"/Commons/BindingQbicleParameter",dataType:"json",data:{key:n,ModuleSelected:t},success:function(n){n.result===!0&&(window.location.href=typeof i=="undefined"?"/Qbicles/Dashboard":"/Qbicles/Dashboard?"+i)}})}function postSelelected(n,t,i){$.ajax({type:"post",url:"/Commons/BindingQbicleParameter",dataType:"json",data:{key:n,ModuleSelected:i},success:function(n){n.result===!0&&(MarkAsReadActivity(t),window.location.href="/Qbicles/Dashboard")}})}function initInviteModal(){var n=$("#frmJoinQbicles");n.validate({ignore:"",rules:{email:{required:!0,email:!0},message:{required:!0}}});n.submit(function(t){t.preventDefault();n.valid()&&($.LoadingOverlay("show"),$.ajax({type:this.method,cache:!1,url:this.action,datatype:"json",data:$(this).serialize(),success:function(n){n.result?($(".email-invite").text($("#frmJoinQbicles input[name=email]").val()),$("#invitesent").fadeIn()):!n.result&&n.msg?cleanBookNotification.error(_L(n.msg),"Qbicles"):cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles");LoadingOverlayEnd()},error:function(){LoadingOverlayEnd();cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}}))});$("#send-invite").on("shown.bs.modal",function(){$("#invitesent").hide();n.trigger("reset");n.data("validator").resetForm()})}function DeleteAllNotifications(){var n=confirm("Are you sure you want to delete all notifications?");n==!0&&($("#notifications").LoadingOverlay("show"),$.ajax({method:"POST",url:"/Notifications/DeleteAllNotifications",dataType:"JSON",success:function(){cleanBookNotification.success("Deleted notifications successfully!","Qbicles");InitNotificationsPagination();$("#notifications").LoadingOverlay("hide")},error:function(n){cleanBookNotification.error(n.msg,"Qbicles");$("#notifications").LoadingOverlay("hide")}}))}var $alertId=0,$eventId=0,$eventKey="",$mediaId=0,$taskName=$("#taskName"),$taskId=0,$approvalModal=$("#create-approval"),$approvalQbicleId=$("#approvalQbicleId"),$form_approval_addedit=$("#form_approval_addedit"),$approvalName=$("#approvalName"),$TypeOfRequest=$("#TypeOfRequest"),$approvalAttachments=$("#approvalAttachments"),$txtNotes=$("#txtNotes"),$approvalId=0,$userModal=$("#create-user"),$username=$("#username"),$email=$("#email"),$forename=$("#forename"),$surname=$("#surname"),$password=$("#password"),$password_repeat=$("#password_repeat"),$selectUsersDomains=$("#selectUsersDomains"),$validTopic=-1,strNotificationSelected="",isBusyAddAlertForm,$stepEdit,$stepEditId;jQuery(function(n){n(".reply_options a").bind("click",function(t){t.preventDefault();var i="."+n(this).data("target");n(i).toggle();$inputfileDiscussion.val("")});n("#taskDocumentInviteGuests").on("beforeItemAdd",function(t){var i=t.item;if(!t.options||!t.options.preventPost){if(validateEmail(i))return n.ajax({type:"post",url:"/Account/CheckUserEmailInSystem",datatype:"json",data:{userEmail:t.item},success:function(r){r.result&&(n("#taskDocumentInviteGuests").tagsinput("remove",i,{preventPost:!0}),t.item=r.msg,n("#taskDocumentInviteGuests").tagsinput("add",t.item,{preventPost:!0}))}}),t;t.cancel=!0}});n("#discussionGuests").on("beforeItemAdd",function(t){var i=t.item;if(!t.options||!t.options.preventPost){if(validateEmail(i))return n.ajax({type:"post",url:"/Account/CheckUserEmailInSystem",datatype:"json",data:{userEmail:t.item},success:function(r){r.result&&(n("#discussionGuests").tagsinput("remove",i,{preventPost:!0}),t.item=r.msg,n("#discussionGuests").tagsinput("add",t.item,{preventPost:!0}))}}),t;t.cancel=!0}});n.fn.modal.Constructor.prototype.enforceFocus=function(){}});$(document).ready(function(){$("#form_alert_addedit").validate({rules:{Name:{maxlength:250},Description:{maxlength:500}}});$("#form_alert_addedit").submit(function(n){$.LoadingOverlay("show");n.preventDefault();$.ajax({type:this.method,cache:!1,url:this.action,enctype:"multipart/form-data",data:new FormData(this),processData:!1,contentType:!1,beforeSend:function(){isBusyAddAlertForm=!0},success:function(n){n.result&&(isBusyAddAlertForm=!1,$("#create-alert").modal("toggle"));LoadingOverlayEnd()},error:function(){isBusyAddAlertForm=!1;LoadingOverlayEnd();cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}})});$("#form_approval_addedit").submit(function(n){$.LoadingOverlay("show");n.preventDefault();$.ajax({type:this.method,cache:!1,url:this.action,enctype:"multipart/form-data",data:new FormData(this),processData:!1,contentType:!1,success:function(n){n.result&&$("#create-approval").modal("toggle");LoadingOverlayEnd()},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles");LoadingOverlayEnd()}})});initInviteModal()});isBusyAddAlertForm=!1;$("#form-process-group").submit(function(n){$.LoadingOverlay("show");n.preventDefault();$.ajax({type:this.method,url:this.action,data:{groupName:$("#group-name-input").val()},dataType:"json",success:function(n){n.result&&($("#app-group-generic-add").modal("toggle"),$("#process-group-div").prepend(n.msg));LoadingOverlayEnd()},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles");LoadingOverlayEnd()}})});$("#form_process_step_addedit").submit(function(n){$.LoadingOverlay("show");n.preventDefault();var t=$("#ul-pro-step li").length+1;$("#StepOrder").val(t);$("#Suffix").val(ordinalSuffix(t));$.ajax({type:this.method,cache:!1,url:this.action,data:new FormData(this),processData:!1,contentType:!1,success:function(n){n.result&&($("#ul-pro-step").append(n.msg).hide().fadeIn(1e3),ClearStepForm());LoadingOverlayEnd()},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles");LoadingOverlayEnd()}})});$("#form_process_related_addedit").submit(function(n){$.LoadingOverlay("show");n.preventDefault();$.ajax({type:this.method,cache:!1,url:this.action,data:new FormData(this),processData:!1,contentType:!1,success:function(n){n.result&&($("#pro-document-tr").append(n.msg).hide().fadeIn(1e3),ClearDocumentForm());LoadingOverlayEnd()},error:function(){LoadingOverlayEnd();cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}})});$("#form_process_addedit").submit(function(n){$.LoadingOverlay("show");n.preventDefault();LoadingOverlayEnd()});$("#toppic-value").ready(function(){bindTopicFromCookie()});$(function(){$("#orderNotification").on("change",function(){InitNotificationsPagination()});$(".checkall").bind("click",function(){var t=$(this).data("checked"),n;t===!1&&($(this).data("checked",!0),$(this).html("Uncheck visible"),$(".removeall").prop("disabled",!1),$(".cb-element").each(function(){$(this).prop("checked",!0)}),n="",strNotificationSelected="",$("input[name='notifications[]']:checked").length>0&&$("input[name='notifications[]']:checked").each(function(){n=($(this).val()+"").trim().split("_");strNotificationSelected===""?strNotificationSelected=n[0]:strNotificationSelected+=","+n[0]}));t===!0&&($(this).data("checked",!1),$(this).html("Check visible"),$(".removeall").prop("disabled",!0),$(".cb-element").each(function(){$(this).prop("checked",!1)}),strNotificationSelected="")})});