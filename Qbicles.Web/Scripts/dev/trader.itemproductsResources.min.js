function getDefaultSidebarTab(){getLocalStorage(resourceKey)&&(activeSubTab=getLocalStorage(resourceKey));switch(activeSubTab.toLocaleLowerCase()){case"tab-images":selectImagesTab();break;case"tab-documents":selectDocumentsTab();break;case"tab-brands":selectBrandsTab();break;case"tab-needs":selectNeedsTab();break;case"tab-quality":selectQuantityTab();break;case"tab-extratags":selectExtratagsTab();break;case"tab-access":selectAccessTab();break;default:selectImagesTab()}$('a[href="#'+activeSubTab+'"]').tab("show")}function selectImagesTab(){setLocalStorage(resourceKey,"tab-images");$("#tab-images").LoadingOverlay("show");$("#tab-images").empty();$("#tab-images").load("/TraderResource/ResourceImagesTab",function(){$("#tab-images").LoadingOverlay("hide")})}function selectDocumentsTab(){setLocalStorage(resourceKey,"tab-documents");var n="/TraderResource/ResourceDocumentsTab?locationId="+$("#local-manage-select").val();$("#tab-documents").LoadingOverlay("show");$("#tab-documents").empty();$("#tab-documents").load(n,function(){$("#tab-documents").LoadingOverlay("hide")})}function selectBrandsTab(){setLocalStorage(resourceKey,"tab-brands");$("#tab-brands").LoadingOverlay("show");$("#tab-brands").empty();$("#tab-brands").load("/TraderResource/ResourceBrandsTab?type=Brand",function(){$("#tab-brands").LoadingOverlay("hide")})}function selectNeedsTab(){setLocalStorage(resourceKey,"tab-needs");$("#tab-brands").LoadingOverlay("show");$("#tab-brands").empty();$("#tab-brands").load("/TraderResource/ResourceBrandsTab?type=Need",function(){$("#tab-brands").LoadingOverlay("hide")})}function selectQuantityTab(){setLocalStorage(resourceKey,"tab-quality");$("#tab-brands").LoadingOverlay("show");$("#tab-brands").empty();$("#tab-brands").load("/TraderResource/ResourceBrandsTab?type=QualityRating",function(){$("#tab-brands").LoadingOverlay("hide")})}function selectExtratagsTab(){setLocalStorage(resourceKey,"tab-extratags");$("#tab-brands").LoadingOverlay("show");$("#tab-brands").empty();$("#tab-brands").load("/TraderResource/ResourceBrandsTab?type=ProductTag",function(){$("#tab-brands").LoadingOverlay("hide")})}function selectAccessTab(){setLocalStorage(resourceKey,"tab-access");var n="/TraderResource/ResourceAccessTab?locationId="+$("#local-manage-select").val();$("#tab-access").LoadingOverlay("show");$("#tab-access").empty();$("#tab-access").load(n,function(){$("#tab-access").LoadingOverlay("hide")})}function getDataImages(n){var t="/TraderResource/ResourceImageData?locationId="+locationId;n||$("#resource_image_data").LoadingOverlay("show");$("#resource_image_data").empty();$("#resource_image_data").load(t,function(){$("#resource_image_data").LoadingOverlay("hide");searchOnDataImages()})}function addEditImage(n){var t="/TraderResource/ResourceImageAddEdit?id="+n;$("#app-trader-resources-image-add").LoadingOverlay("show");$("#app-trader-resources-image-add").empty();$("#app-trader-resources-image-add").load(t,function(){$("#app-trader-resources-image-add").LoadingOverlay("hide")})}function selectImageReImage(n){readURLImage(n,"preview")}function validateReImage(){var n=!0;return $("#re_image_name").val()===""&&($("#re_image_form").validate().showErrors({re_image_name:"Title is required."}),n=!1),$("#re_image_file")[0].files&&$("#re_image_file")[0].files.length===0&&$("#re_image_filevalue").val()==""&&($("#re_image_form").validate().showErrors({featuredimg:"File image is required."}),n=!1),$("#re_image_category").val()===""&&($("#re_image_form").validate().showErrors({re_image_category:"Category image is required."}),n=!1),n}function saveImage(){validateReImage()&&(LoadingOverlay(),$("#re_image_file")[0].files.length>0?UploadMediaS3ClientSide("re_image_file").then(function(n){if($("#preview").show(),$("#re_image_filevalue").val(n.objectKey),$("#re_image_qbliclefiletype").val(n.fileName.split(".").pop()),n.objectKey==="no_image"||n.objectKey==="no-image"){LoadingOverlayEnd("hide");cleanBookNotification.error(_L("ERROR_MSG_S3_UPLOAD"),"Qbicles");return}SubmitItemProductResourceImage()}):($("#preview").hide(),LoadingOverlayEnd("hide")))}function deleteResourceImage(n,t){var r=confirm(_L("ERROR_MSG_281",[t])),i;r!==!1&&(i="/TraderResource/DeleteReImage?id="+n,$.LoadingOverlay("show"),$.ajax({url:i,type:"delete",dataType:"json",success:function(n){LoadingOverlayEnd();n.actionVal===1?(cleanBookNotification.removeSuccess(),getDataImages()):n.actionVal===3&&cleanBookNotification.removeFail()},error:function(n){cleanBookNotification.error(n,"Qbicles");LoadingOverlayEnd()}}).always(function(){LoadingOverlayEnd()}))}function getDataDocuments(n){var t="/TraderResource/ResourceDocumentData?locationId="+locationId;n||$("#resource_document_data").LoadingOverlay("show");$("#resource_document_data").empty();$("#resource_document_data").load(t,function(){$("#resource_document_data").LoadingOverlay("hide");searchOnDataDocuments()})}function addEditDocument(n){var t="/TraderResource/ResourceDocumentAddEdit?id="+n;$("#app-trader-resource-document-add").LoadingOverlay("show");$("#app-trader-resource-document-add").empty();$("#app-trader-resource-document-add").load(t,function(){$("#app-trader-resource-document-add").LoadingOverlay("hide")})}function selectImageReDocument(n){readURLImage(n,"preview")}function validateReDocument(){var n=!0;return $("#re_document_name").val()===""&&($("#re_document_form").validate().showErrors({re_document_name:"Title is required."}),n=!1),$("#re_document_file")[0].files&&$("#re_document_file")[0].files.length===0&&$("#re_document_filevalue").val()==""&&($("#re_document_form").validate().showErrors({featuredimg:"File image is required."}),n=!1),$("#re_document_category").val()===""&&($("#re_document_form").validate().showErrors({re_document_category:"Category image is required."}),n=!1),n}function saveDocument(){validateReDocument()&&(LoadingOverlay(),$("#re_document_file")[0].files.length>0&&UploadMediaS3ClientSide("re_document_file").then(function(n){if($("#re_document_filevalue").val(n.objectKey),$("#re_document_qbliclefiletype").val(n.fileName.split(".").pop()),n.objectKey==="no_image"||n.objectKey==="no-image"){cleanBookNotification.error(_L("ERROR_MSG_345"),"Qbicles");return}SubmitItemProductResourceDocument()}))}function deleteResourceDocument(n,t){var r=confirm(_L("ERROR_MSG_281",[t])),i;r!==!1&&(i="/TraderResource/DeleteReDocument?id="+n,$.LoadingOverlay("show"),$.ajax({url:i,type:"delete",dataType:"json",success:function(n){LoadingOverlayEnd();n.actionVal===1?(cleanBookNotification.removeSuccess(),getDataDocuments()):n.actionVal===3&&cleanBookNotification.removeFail()},error:function(n){cleanBookNotification.error(n,"Qbicles");LoadingOverlayEnd()}}).always(function(){LoadingOverlayEnd()}))}function searchOnDataBrand(){var t=[],n=$("#key_search_brand").val();n=$.trim(n);n!==""&&n!==null&&n.length>0&&t.push(n);$("#resource_brand_datatable").DataTable().search(t.join("|"),!0,!1,!0).draw()}function getDataBrands(n){var t="/TraderResource/ResourceBrandData?type="+n;$("#resource_brand_data").LoadingOverlay("show");$("#resource_brand_data").empty();$("#resource_brand_data").load(t,function(){$("#resource_brand_data").LoadingOverlay("hide");searchOnDataBrand()})}function addEditBrand(n,t){var i="/TraderResource/ResourceBrandAddEdit?id="+n+"&type="+t;$("#app-trader-resources-brand-add").LoadingOverlay("show");$("#app-trader-resources-brand-add").empty();$("#app-trader-resources-brand-add").load(i,function(){$("#app-trader-resources-brand-add").LoadingOverlay("hide")})}function validateBrand(){var n=!0;return $("#brand_name").val()==""&&($("#brand_form").validate().showErrors({brand_title:"This field is required."}),n=!1),n}function saveBrand(n){$("#brand_form_div").LoadingOverlay("show");setTimeout(function(){if($("#brand_name_hidden").val()==""){$("#brand_form").validate().showErrors({brand_title:"This field is required."});$("#brand_form_div").LoadingOverlay("hide",!0);return}var t=JSON.parse($("#brand_name").val())[0].value,i={Id:$("#brand_id").val(),Name:t,Type:n};$.ajax({type:"post",url:"/TraderResource/SaveBrand",data:{additional:i},dataType:"json",success:function(t){t.result?t.actionVal===1?(cleanBookNotification.createSuccess(),$("#app-trader-resources-brand-add").modal("toggle"),getDataBrands(n)):t.actionVal===2?(cleanBookNotification.updateSuccess(),$("#app-trader-resources-brand-add").modal("toggle"),getDataBrands(n)):t.actionVal===3&&cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles"):$("#brand_form").validate().showErrors({brand_title:t.msg})},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}}).always(function(){$("#brand_form_div").LoadingOverlay("hide",!0)})},1e3)}function deleteAdditional(n,t,i){var r="",u,f;(r+=i=="Brand"?"Brand: "+t+" ?":i=="ProductTag"?"Product tag: "+t+" ?":i=="Need"?"Need: "+t+" ?":i=="QualityRating"?"Quality rating: "+t+" ?":t+" ?",r="Are you sure you want delete this "+r,u=confirm(r),u!==!1)&&(f="/TraderResource/DeleteAdditionalInfo?id="+n,$.LoadingOverlay("show"),$.ajax({url:f,type:"delete",dataType:"json",success:function(n){LoadingOverlayEnd();n.actionVal===1?(cleanBookNotification.removeSuccess(),getDataBrands(i)):n.actionVal===3&&cleanBookNotification.removeFail()},error:function(n){cleanBookNotification.error(n,"Qbicles");LoadingOverlayEnd()}}).always(function(){LoadingOverlayEnd()}))}function getDataAccesss(n,t){n||(n=$("#key_search_access").val());var i="/TraderResource/ResourceAccessData?key="+n.replace(/\s/g,"%20");t||$("#resource_access_data").LoadingOverlay("show");$("#resource_access_data").empty();$("#resource_access_data").load(i,function(){$("#resource_access_data").LoadingOverlay("hide")})}function addEditAccess(n){var t="/TraderResource/AccessAddEdit?id="+n;$("#app-trader-resources-access-add").LoadingOverlay("show");$("#app-trader-resources-access-add").empty();$("#app-trader-resources-access-add").load(t,function(){$("#app-trader-resources-access-add").LoadingOverlay("hide")})}function validateAccess(){var n=!0;return $("#access_name").val()===""&&($("#access_form").validate().showErrors({access_title:"Name is required."}),n=!1),$("#access_file")[0].files&&$("#access_file")[0].files.length===0&&$("#access_image").val()==""&&($("#access_form").validate().showErrors({access_file:"Featured image is required."}),n=!1),n}function saveAccess(){validateAccess()&&(LoadingOverlay(),$("#access_file")[0].files.length>0&&UploadMediaS3ClientSide("access_file").then(function(n){if($("#access_image").val(n.objectKey),n.objectKey==="no_image"||n.objectKey==="no-image"){LoadingOverlayEnd("hide");cleanBookNotification.error(_L("ERROR_MSG_345"),"Qbicles");return}SubmitItemProductResourceAccess()}))}var activeSubTab="tab-images",resourceKey="subResourceTab",locationId=$("#local-manage-select").val();SubmitItemProductResourceImage=function(){var n={Id:$("#re_image_id").val(),Name:$("#re_image_name").val(),FileUri:$("#re_image_filevalue").val(),Type:{Extension:$("#re_image_qbliclefiletype").val()},Category:{Id:$("#re_image_category").val()},Description:$("#re_image_description").val()};$.ajax({type:"post",url:"/TraderResource/SaveImage",data:{reImage:n},dataType:"json",success:function(n){n.actionVal===1?(cleanBookNotification.createSuccess(),$("#app-trader-resources-image-add").modal("toggle"),getDataImages(!0)):n.actionVal===2?(cleanBookNotification.updateSuccess(),$("#app-trader-resources-image-add").modal("toggle"),getDataImages(!0)):n.actionVal===3&&cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}}).always(function(){LoadingOverlayEnd()})};SubmitItemProductResourceDocument=function(){var n={Id:$("#re_document_id").val(),Name:$("#re_document_name").val(),FileUri:$("#re_document_filevalue").val(),Type:{Extension:$("#re_document_qbliclefiletype").val()},Category:{Id:$("#re_document_category").val()},Description:$("#re_document_description").val()};$.ajax({type:"post",url:"/TraderResource/SaveDocument",data:{reDocument:n},dataType:"json",success:function(n){n.actionVal===1?(cleanBookNotification.createSuccess(),$("#app-trader-resource-document-add").modal("toggle"),getDataDocuments(!0)):n.actionVal===2?(cleanBookNotification.updateSuccess(),$("#app-trader-resource-document-add").modal("toggle"),getDataDocuments(!0)):n.actionVal===3&&cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}}).always(function(){LoadingOverlayEnd()})};SubmitItemProductResourceAccess=function(){var n={Id:$("#access_id").val(),AreaName:$("#access_name").val(),ImageUri:$("#access_image").val(),Type:$("#access_type").val(),Location:{Id:$("#access_location").val()},Description:$("#access_description").val()};$.ajax({type:"post",url:"/TraderResource/SaveAccess",data:{access:n},dataType:"json",success:function(n){n.actionVal===1?(cleanBookNotification.createSuccess(),$("#app-trader-resources-access-add").modal("toggle"),getDataAccesss(null,!0)):n.actionVal===2?(cleanBookNotification.updateSuccess(),$("#app-trader-resources-access-add").modal("toggle"),getDataAccesss(null,!0)):n.actionVal===3&&cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}}).always(function(){LoadingOverlayEnd()})};