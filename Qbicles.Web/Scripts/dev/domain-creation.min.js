function updateAsChosenPlanLevel(){switch(selectedPlanType){case freePlanLevel:planUserNumber=0;planCostPerExtraUser=0;planCost=0;planName="Free plan";break;case starterPlanLevel:planUserNumber=3;planCostPerExtraUser=5e3;planCost=1e4;planName="Starter plan";break;case standardPlanLevel:planUserNumber=5;planCostPerExtraUser=5e3;planCost=2e4;planName="Standard plan";break;case expertPlanLevel:planUserNumber=5;planCostPerExtraUser=5e3;planCost=4e4;planName="Expert plan";break;case existingPlanLevel:planUserNumber=1e3;planCostPerExtraUser=0;planCost=0;planName="Existing plan"}}function setup(){setTimeout(function(){$(".setup .btn-loading").hide();$(".setup .btn-loaded").show()},3e3)}function recount(){step=step+25;$(".stat").circleProgress({max:100,value:step,textFormat:"percent",animation:"easeOutExpo",animationDuration:2600});var n=step+"%";$("#step1p").css("width",n)}function decount(){step=step-17;$(".stat").circleProgress({max:100,value:step,textFormat:"percent",animation:"easeOutExpo",animationDuration:2600});var n=step+"%";$("#step1p").css("width",n)}function switchpromos(n){$(".promotype").hide();$(n).show()}function checkDomainNameAvailability(){var n=$("#domain-name").val();n!=""?$.ajax({method:"POST",dataType:"JSON",url:"/Domain/IsDuplicateDomainNameCheck",beforeSend:function(){$("#checking").show();$("#result").hide()},data:{domainKey:"",domainName:n},success:function(n){n?(cleanBookNotification.error("The domain name has been taken. Please try another one","Qbicles"),$("#result").hide()):$("#result").show()},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles");$("#result").hide()}}).then(function(){$("#checking").hide()}):$("#result").hide()}function reserveDomainRequestName(){var n=$("#domain-name").val(),t=$("#domain-request-id").val();$.ajax({type:"POST",url:"/Domain/ReserveDomainRequestName",dataType:"JSON",data:{requestedName:n,requestId:t},success:function(t){t.result?(recount(),$("#tab1link").addClass("done").removeClass("active"),$("#tab1link a i").show(),$("#tab2link").addClass("active"),$("#tab2-toggle-btn").click(),$("#domain-request-id").val(t.Object),$("#domain-name-title").text("Your "+n+" Business Domain has been successfully created")):!t.result&&t.msg?cleanBookNotification.error(t.msg,"Qbicles"):cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}})}function changeRequestPlan(n){selectedPlanType=n;updateAsChosenPlanLevel();switch(n){case freePlanLevel:createDomainCreationPaymentPlan();break;case starterPlanLevel:case standardPlanLevel:case expertPlanLevel:$("#planselect").hide();$("#paidplanchosen").fadeIn()}$("#level-default-user-number").val(planUserNumber);$("#cost-per-extra-str").text(planCostPerExtraUser+planCurrencySymbol);$("#user-number").attr("min",planUserNumber);var t=planCost+planCurrencySymbol+" monthly";$(".chosen-plan-name").text(planName);$(".chosen-plan-cost").text(t);$(".chosen-plan-user-number").text(planUserNumber).val(planUserNumber)}function planCostCalculation(){var t,n;switch(selectedPlanType){case starterPlanLevel:case standardPlanLevel:case expertPlanLevel:case existingPlanLevel:t=planUserNumber;n=Number($("#user-number").val())-Number(t);n<0&&(n=0);var i=Number(planCost),u=Number(planCostPerExtraUser),r=u*n,f=i+r;n>0&&($("#request-cost-table tbody tr").removeClass("hidden"),$("#table-extra-cost").text(r),$("#extra-number").text(n+" extras"));$("#table-plan-name").text(planName);$("#table-default-cost").text(i);$("#total-cost").text(f);recount();$("#tab2link").addClass("done").removeClass("active");$("#tab2link a i").show();$("#tab3link").addClass("active")}}function createDomainCreationPaymentPlan(){if(isPlanPaymentProcessing!=!0){var n=$("#domain-request-id").val(),t=Number($("#user-number").val());$.ajax({method:"POST",dataType:"JSON",url:"/Domain/CreateDomainRequestPlan",beforeSend:function(){isPlanPaymentProcessing=!0;LoadingOverlayEnd()},data:{domainRequestId:n,userNumber:t,level:selectedPlanType},success:function(n){n.result?selectedPlanType!=freePlanLevel&&(window.location=n.Object):n.msg?cleanBookNotification.error(n.msg,"Qbicles"):cleanBookNotification.error("Something went wrong. Please contact to the administrator","Qbicles")},error:function(){cleanBookNotification.error("Something went wrong. Please contact to the administrator","Qbicles")}}).then(function(){selectedPlanType==freePlanLevel&&($("#tab5link").hide(),$("#tabxlink").hide(),recount(),$("#paidplanchosen").hide(),$("#tab2link").addClass("done").removeClass("active"),$("#tab2link a i").show(),$("#tab3link").addClass("active"),$("#show-tab3-btn").click());LoadingOverlayEnd()})}}function updatePricingInfor(){}function processDomainLogoSaving(){var t=$("#domain-description").val(),n;t.length>500||($.LoadingOverlay("show"),n=document.getElementById("domain-logo").files,n&&n.length>0?UploadMediaS3ClientSide("domain-logo").then(function(n){if(n.objectKey==="no_image"||n.objectKey==="no-image"){LoadingOverlayEnd("hide");cleanBookNotification.error(_L("ERROR_MSG_S3_UPLOAD"),"Qbicles");return}updateDomainSpecifics(n.objectKey)}):updateDomainSpecifics(null))}function updateDomainSpecifics(n){var t={description:$("#domain-description").val(),uploadKey:n,requestId:$("#domain-request-id").val()};$.ajax({method:"POST",dataType:"JSON",url:"/Domain/SaveDomainRequestSpecifics",data:t,success:function(n){var t=n;t.result?selectedPlanType==freePlanLevel?(recount(),$("#tab3link").addClass("done").removeClass("active"),$("#tab3link a i").show(),$("#callback").addClass("active"),$("#domain-created-key").val(t.Object2),$("#free-plan-btn").click()):(recount(),$("#tab3link").addClass("done").removeClass("active"),$("#tab3link a i").show(),$("#tabxlink").addClass("active"),$("#open-receive-payment-btn").click()):cleanBookNotification.error(t.msg,"Qbicles");LoadingOverlayEnd()},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles");LoadingOverlayEnd()}})}function saveSubAccountInfo(){var n=$("#subacc-business-name").val(),t=$("#subacc-bank-code").val(),i=$("#subacc-account-number").val(),r=$("#domain-request-id").val(),u={businessName:n,bankCode:t,accountNumber:i,domainRequestId:r};$.ajax({method:"POST",dataType:"JSON",url:"/Domain/SaveSubAccountInfoToDomainRequest",data:u,beforeSend:function(){LoadingOverlay()},success:function(n){n.result?($("#tabxlink").addClass("done").removeClass("active"),$("#tabxlink a i").show(),$("#paid-plan-btn").click()):cleanBookNotification.error(n.msg,"Qbicles")},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}}).then(function(){LoadingOverlayEnd()})}function LaunchCreatedDomain(){LoadingOverlay();var n=$("#domain-created-key").val();setTimeout(function(){$.ajax({type:"post",url:"/Domain/DomainBusinessProfileWirad",datatype:"json",cache:!1,data:{key:n},success:function(t){t.msgId==""?GoToQbicles(n):window.location.href="/Domain/Wizard?key="+t.msgId}})},500)}function DomainRequestSave(){$.ajax({type:"post",cache:!1,url:"/Domain/AddQbicleDomainRequest",enctype:"multipart/form-data",data:model,processData:!1,contentType:!1,success:function(n){n.result?(clearDomainInputModalAddEdit(),$("#create-domain").modal("toggle"),showDomainRequestHistory(),cleanBookNotification.updateSuccess()):!n.result&&n.msg?cleanBookNotification.error(n.msg,"Qbicles"):cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}}).always(function(){isBusy=!1;LoadingOverlayEnd()})}function GoToQbicles(n){$.ajax({type:"post",url:"/Commons/UpdateCurrentDomain",datatype:"json",cache:!1,data:{currentDomainKey:n},success:function(n){n.result?window.location.href="/Qbicles":console.log(domainName)}})}function updateSelectedBusinessDomainLevel(n){selectedPlanType=n}var freePlanLevel=1,starterPlanLevel=2,standardPlanLevel=3,expertPlanLevel=4,existingPlanLevel=5,selectedPlanType=freePlanLevel,planUserNumber=0,planCostPerExtraUser=0,planCost=0,planCurrencySymbol="NGN",planName="",step,isPlanPaymentProcessing;$(" .checkmulti").multiselect({includeSelectAllOption:!0,selectAllJustVisible:!0,includeResetOption:!1,enableFiltering:!1,buttonWidth:"100%",maxHeight:400,enableClickableOptGroups:!0,enableFiltering:!0,enableCaseInsensitiveFiltering:!0});$("#setavatar").on("change",function(){$("#avatar").css("background-image","url(dist/img/logos/003.png)")});$(".stat").circleProgress({max:100,value:0,textFormat:"percent",animation:"easeInOutExpo",animationDuration:2600});step=0;$("#itemtype a").bind("click",function(n){n.preventDefault();$(".theformtype").hide();var t=$(this).data("value");t!="comp"?($("#prodorserv").fadeIn(),$("#formulae-sell").hide()):($("#prodorserv").hide(),$("#formulae-sell").show(),$("#recipe").show());t=="buy"&&$("#item-buy").show();t=="sell"&&$("#item-sell").show();t=="buys"&&$("#item-buysell").show();t=="comp"&&($("#item-compound").show(),$(".wizard-start").show())});$("#productorservice a").bind("click",function(n){n.preventDefault();var t=$(this).data("value");$(".wizard-start").show();t=="service"?($(".inventorytab").hide(),$(".finishonfirst").show(),$(".normalfinish").hide(),$(".barcode").hide()):($(".barcode").show(),$(".finishonfirst").hide(),$(".normalfinish").show(),$(".inventorytab").show())});$("#areasdrop").bind("change",function(){var n=$(this).val();n=="0"?$(".currency").show():($(".countrychoice").hide(),$(".unsupported").show())});isPlanPaymentProcessing=!1;