function DeletePage(n){$.ajax({type:"post",url:"/CommunitySystem/ValidationDeletePage",data:{id:n},dataType:"json",success:function(t){t.result?cleanBookNotification.warning(_L("ERROR_MSG_80"),"Qbicles"):$.ajax({type:"post",url:"/CommunitySystem/DeletePage",data:{id:n},dataType:"json",success:function(t){t.result?($("#page-row-"+n).remove(),cleanBookNotification.updateSuccess()):cleanBookNotification.error(t.msg,"Qbicles")},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}})},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}})}function SuspendPage(n){$.ajax({type:"post",url:"/CommunitySystem/SuspendReinstatePage",data:{id:n},dataType:"json",success:function(t){t.result?(cleanBookNotification.updateSuccess(),t.actionVal===1?($("#suspend-"+n).text("Suspended"),$("#page-status-"+n).text("Active"),$("#page-status-"+n).removeClass("label-danger"),$("#page-status-"+n).addClass("label-success")):($("#suspend-"+n).text("Reinstate"),$("#page-status-"+n).text("Suspended"),$("#page-status-"+n).removeClass("label-success"),$("#page-status-"+n).addClass("label-danger"))):cleanBookNotification.error(t.msg,"Qbicles")},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}})}function DeleteTag(n){$.ajax({type:"post",url:"/CommunitySystem/ValidationDeleteTag",data:{id:n},dataType:"json",success:function(t){t.result?cleanBookNotification.warning(_L("ERROR_MSG_81"),"Qbicles"):$.ajax({type:"post",url:"/CommunitySystem/DeleteTag",data:{id:n},dataType:"json",success:function(t){t.result?($("#tag-row-"+n).remove(),cleanBookNotification.updateSuccess()):cleanBookNotification.error(t.msg,"Qbicles")},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}})},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}})}function EditTag(n){$tagId.val(n);$tagKeywords.tagsinput("removeAll");GetTag(n).done(function(n){if(n.Id){$tagId.val(n.Id);$tagName.val(n.Name);$tagCreatedby.val(n.CreatedBy);$tagCreatedDate.val(n.CreatedDate);$tagUpdatedDate.val(n.EditedDate);var t=n.Keywords.split(",");$.each(t,function(n,t){$tagKeywords.tagsinput("add",t,{preventPost:!0})})}});$("#tag-title").text("Edit Tag");$("#save-title").text("Confirm");$tagModel.modal("toggle")}function GetTag(n){return $.ajax({url:"/CommunitySystem/GetTagToEditView",type:"GET",dataType:"json",data:{id:n}})}function AddTag(){$tagId.val(0);$tagKeywords.tagsinput("removeAll");$tagName.val("");$("#tag-title").text("Add Tag");$("#save-title").text("Add Tag");$tagModel.modal("toggle")}function SaveTag(){ConfirmSaveTag()}function ConfirmSaveTag(){$("#form_tag").valid()&&$.ajax({url:"/CommunitySystem/DuplicateTagName",data:{id:$tagId.val(),Name:$tagName.val()},type:"GET",dataType:"json"}).done(function(n){n.result?$("#form_tag").validate().showErrors({Name:_L("ERROR_MSG_82")}):$("#form_tag").submit()}).fail(function(){$("#form_tag").validate().showErrors({Name:_L("ERROR_MSG_355")})})}function UpdateOrder(){var t=$("#table_community_showpage tbody tr"),i=[],r=[],n;if(t.length>0)for(n=0;n<t.length;n++)i.push($(t[n]).find("td.td_checkbox input.row_id").val()),r.push($(t[n]).find("td.td_order").text());$.ajax({type:"post",url:"/Community/UpdateOrderpages",data:{lstId:i,lstOrder:r},dataType:"json",success:function(n){n.actionVal===2&&cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}})}function selectedChange(n){var e,t,f,r,i,u;for($(n).val()=="true"?($(n).val(!1),$(n).removeClass("checked")):($(n).val(!0),$(n).addClass("checked")),e=$(n.parentElement).find("input.row_id").val(),$.ajax({type:"post",url:"/Community/UpdateIsFeature",data:{id:e,value:$(n).val()},dataType:"json",success:function(n){n.actionVal===2&&cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}}),t=$("#table_community_showpage .community_page_checked_show"),f=0,r=0;r<t.length;r++)$(t[r]).val()==="true"&&(f+=1);if(f>=3)for(i=0;i<t.length;i++)$(t[i]).val()!=="true"?$(t[i]).attr("disabled","disabled"):$(t[i]).removeAttr("disabled");else for(u=0;u<t.length;u++)$(t[u]).removeAttr("disabled")}var reloadTableTags=!1,$tagModel=$("#tag-modal"),$tagKeywords=$("#tag-keywords"),$tagName=$("#tag-name"),$tagCreatedby=$("#tag-createdby"),$tagCreatedDate=$("#tag-creadeddate"),$tagUpdatedDate=$("#tag-editeddate"),$tagId=$("#tag-id"),lstPages=[];$(document).ready(function(){$("#form_tag").submit(function(n){n.preventDefault();$.ajax({type:this.method,cache:!1,url:this.action,enctype:"multipart/form-data",data:new FormData(this),processData:!1,contentType:!1,beforeSend:function(){},success:function(n){n.result&&(reloadTableTags=!0,$tagModel.modal("toggle"),cleanBookNotification.updateSuccess(),ClearError(),$("#tab1").load("/Community/SystemCommunityTags"))},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}})});var n=!0;$("#table_community_showpage").on("draw.dt",function(){n==!0?n=!1:setTimeout(function(){UpdateOrder()},1e3)})});