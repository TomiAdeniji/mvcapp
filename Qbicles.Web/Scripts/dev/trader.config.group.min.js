function clickAddgroup(){ResetFormControl("form_group_add")}function Editgroup(n){ResetFormControl("form_group_edit");$.ajax({type:"get",url:"/TraderConfiguration/GetEditGroupById",data:{id:n},dataType:"json",success:function(n){$("#group-edit-id").val(n.Id);$("#group-edit-name").val(n.Name);$("#group-edit-createby").val(n.CreatedBy);$("#group-edit-createdate").val(n.CreatedDate)},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}})}function addgroup(){$("#form_group_add").valid()&&$.ajax({type:"post",url:"/TraderConfiguration/SaveGroup",data:{Name:$("#addnew-group-name").val()},dataType:"json",success:function(n){n.result===!0?n.actionVal===1?(cleanBookNotification.createSuccess(),reloadgroup(),$("#app-group-add").modal("toggle")):n.actionVal===2?(cleanBookNotification.updateSuccess(),reloadgroup(),$("#app-group-edit").modal("toggle")):n.actionVal===3&&$("#form_group_add").validate().showErrors({Name:n.msg}):cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}}).always(function(){})}function updategroup(){$("#form_group_edit").valid()&&$.ajax({type:"post",url:"/TraderConfiguration/SaveGroup",data:{Id:$("#group-edit-id").val(),Name:$("#group-edit-name").val()},dataType:"json",success:function(n){n.result===!0?n.actionVal===1?($("#app-group-add").modal("toggle"),cleanBookNotification.createSuccess(),reloadgroup()):n.actionVal===2?($("#app-group-edit").modal("toggle"),cleanBookNotification.updateSuccess(),reloadgroup()):n.actionVal===3&&$("#form_group_edit").validate().showErrors({Name:n.msg}):cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}}).always(function(){})}function ConfirmDeletegroup(n,t){$("#label-confirm-group").text("Do you want delete group: "+t);$("#id-itemgroup-delete").val(n)}function deletegroup(){$.ajax({type:"delete",url:"/TraderConfiguration/Deletegroup",data:{id:$("#id-itemgroup-delete").val()},dataType:"json",success:function(n){n==="OK"?(cleanBookNotification.removeSuccess(),reloadgroup()):n==="Fail"&&cleanBookNotification.removeFail()},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles");$(".modal-cancel").click()}})}function addContactGroup(){$("#title-contact-group").text("Add Contact Group");$("#contact-group-id").val(0);$("#contact-group-edit-name").val("")}function editContactGroup(n,t){$("#title-contact-group").text("Edit Contact Group");$("#contact-group-id").val(n);$("#contact-group-edit-name").val(t)}function confirmDeleteContactGroup(n,t){$("#label-confirm-contact-group").text("Do you want delete group: "+t);$("#id-contact-group-delete").val(n)}function deletecontactgroup(){$.ajax({type:"delete",url:"/TraderConfiguration/DeleteContactGroup",data:{id:$("#id-contact-group-delete").val()},dataType:"json",success:function(n){n==="OK"?(cleanBookNotification.removeSuccess(),reloadTableContactGroup()):n==="Fail"&&cleanBookNotification.removeFail()},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}})}function savecontactgroup(n){var i=$("#contact-group-id").val(),t=$("#contact-group-edit-name").val()+"";if(t.trim()===""){cleanBookNotification.error(_L("ERROR_MSG_374"),"Qbicles");return}$.ajax({type:"post",url:"/TraderConfiguration/SaveContactGroup",data:{group:{Id:i,Name:t,saleChannelGroup:n}},dataType:"json",success:function(n){n.result===!0?n.actionVal===1?(cleanBookNotification.createSuccess(),reloadTableContactGroup(),$("#app-contact-group-edit").modal("hide")):n.actionVal===2?(cleanBookNotification.updateSuccess(),reloadTableContactGroup(),$("#app-contact-group-edit").modal("hide")):n.actionVal===3&&cleanBookNotification.error(n.msg,"Qbicles"):cleanBookNotification.error(_L("ERROR_MSG_375"),"Qbicles")},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}}).always(function(){})}function reloadTableContactGroup(){$.LoadingOverlay("show");$("#table_ContactGroup").load("/TraderConfiguration/ShowTableContactGroup",function(){$.LoadingOverlay("hide")})}function deleteContactGroup(n){$.ajax({type:"delete",url:"/TraderConfiguration/DelteContactGroup?id="+n,dataType:"json",success:function(t){t.result===!0?(cleanBookNotification.removeSuccess(),$("#tr_contact_group_"+n).remove(),$("#tab-groups-contacts .datatable").DataTable().draw()):cleanBookNotification.error(_L("ERROR_MSG_376"),"Qbicles")},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}}).always(function(){})}function ShowGroupMemberContact(n){$("#group-items-view").load("/TraderConfiguration/ShowListMemberForContactGroup?contactGroupId="+n)}$(document).ready(function(){var n=$("#form_group_add");n.submit(function(n){n.preventDefault();addgroup()})});reloadgroup=function(){setTimeout(function(){$("#comfig-content").load("/TraderConfiguration/TraderConfigurationContent?value=group")},500)};