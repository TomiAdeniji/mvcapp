function reportLoad(){var i=$("#frm-filter input[name=date]").val(),t,n,r;i&&(t=$("#frm-filter select[name=dimensions]").val(),n=$("#tab-print"),n.LoadingOverlay("show"),r={date:i,view:$("#frm-filter select[name=view]").val(),dimensions:t?t:[],company_name:$("#frm-filter input[name=company_name]").val(),report_title:$("#frm-filter input[name=report_title]").val(),showlogo:$("#frm-filter input[name=isShowLogo]").prop("checked"),treeConfig:$("#treevalue").val()},$.ajax({type:"POST",url:"/Bookkeeping/FilterReport",dataType:"html",data:r,success:function(t){t&&n.html(t);n.LoadingOverlay("hide",!0)}}))}function exportPDF(){$.LoadingOverlay("show");var n="";window.html2canvas(document.getElementById("income-report-capture"),{allowTaint:!0,svgRendering:!0,onrendered:function(t){n=t.toDataURL("image/png").replace("image/png","image/octet-stream");var i="income-report.pdf";$.ajax({type:"post",url:"/Bookkeeping/DownloadReport",datatype:"json",data:{data:n},success:function(n){var t=document.createElement("a");t.download=i;t.href="data:application/pdf;base64,"+n;document.body.appendChild(t);t.click();document.body.removeChild(t);delete t},error:function(n){cleanBookNotification.error(n.responseText,"Qbicles")}})}});LoadingOverlayEnd()}function printPDF(){$.LoadingOverlay("show");var n=document.getElementById("income-report-capture");html2canvas(n,{allowTaint:!0,background:"transparent",onrendered:function(n){var i=n.toDataURL("image/jpeg"),t=window.open("");$(t.document.body).html('<style type="text/css" media="print">@page{size: auto;margin: 0mm;}<\/style ><img src='+i+" style='width:100%;'><\/img>").ready(function(){t.focus();setTimeout(function(){t.print()},500)})}});LoadingOverlayEnd()}$(document).ready(function(){$(".icdaterange").daterangepicker({autoUpdateInput:!0,cancelClass:"btn-danger",opens:"left",locale:{cancelLabel:"cancel",format:$dateFormatByUser.toUpperCase()}});$("#frm-filter input[name=date]").change(function(){var n=$("#frm-filter input[name=date]").data("daterangepicker");$(".reporting_period").text(n.startDate.format("DD MMMM YYYY")+" - "+n.endDate.format("DD MMMM YYYY"));reportLoad()});$("#frm-filter select[name=view]").change(function(){reportLoad()});$("#frm-filter select[name=dimensions]").change(function(){reportLoad()});$(".icdaterange").on("apply.daterangepicker",function(n,t){$(this).val(t.startDate.format($dateFormatByUser.toUpperCase())+" - "+t.endDate.format($dateFormatByUser.toUpperCase()));$(".reporting_period").text(t.startDate.format("DD MMMM YYYY")+" - "+t.endDate.format("DD MMMM YYYY"))});$(".icdaterange").on("cancel.daterangepicker",function(){})});