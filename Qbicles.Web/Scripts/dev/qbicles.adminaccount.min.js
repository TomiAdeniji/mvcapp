function changeNameAccount(){$.ajax({type:"post",url:"/Account/ChangeNameAccount",datatype:"json",data:{accountName:$("#txtAccountNameChange").val()},success:function(n){n.result?cleanBookNotification.success(_L("ERROR_MSG_301"),"Qbicles"):$("#general-seting-account").validate().showErrors({account_name:n.msg})}})}function changeToPackage(n){$.ajax({type:"post",url:"/Account/ChangeToPackage",datatype:"json",data:{idPackage:n},success:function(t){t.result?($(".hidden.currentpackage").removeClass("hidden currentpackage"),$("#package-"+n).addClass("hidden currentpackage"),$("#name-package").text(t.Object.AccessLevel),$("#cost-package").html(t.Object.Cost)):cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}})}function removeAccountAdmin(n,t){$.ajax({type:"POST",url:"/Account/RemoveAccountAdmin",datatype:"json",data:{userId:n},success:function(i){if(i.result)if($("#"+n+"-"+t.replace(/\s/g,"")).remove(),$("#removeAccountAdmin-"+n+"-"+t.replace(/\s/g,"")).remove(),$("#setAsAccountOwner-li-"+n).remove(),$("#"+n+"-DomainAdministrator").length>0){var r='<li id="addAccountAdmin-li-'+n+'"><a href="javascript:void(0)" onclick="addAccountAdmin(\''+n+"')\">Add account admin right<\/a><\/li>";$("#options-"+n).append(r)}else $("#levels-"+n).children("div").length===0&&$("#tr-"+n).remove();else cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}})}function addAccountAdmin(n){$.ajax({type:"POST",url:"/Account/AddAccountAdmin",datatype:"json",data:{userId:n},success:function(t){var i,r,u,f;t.result?(i=t.Object,$("#addAccountAdmin-li-"+n).remove(),r='<div id="'+n+"-"+i.Level.replace(/\s/g,"")+'">'+i.Level+"<\/div>",$("#levels-"+n).append(r),u='<li id="removeAccountAdmin-'+n+"-"+i.Level.replace(/\s/g,"")+'"><a href="javascript:void(0)" onclick="removeAccountAdmin(\''+i.Id+"', '"+i.Level+"')\">Remove account admin right<\/a><\/li>",$("#options-"+n).append(u),$('[data-owner="'+n+'"]').length===0&&(f='<li  id="setAsAccountOwner-li-'+n+'"><a href="javascript:void(0)" onclick="setAsAccountOwner(\''+n+"')\">Set as account owner<\/a><\/li>",$("#options-"+n).append(f))):cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}})}function setAsAccountOwner(n){$.ajax({type:"POST",url:"/Account/SetAsAccountOwner",datatype:"json",data:{userId:n},success:function(n){var t,r,i,u,f;n.result?(t=n.Object,$("#setAsAccountOwner-li-"+t.Id).remove(),r=$("[data-owner]"),i=r.data("owner"),$("#"+i+"-AccountOwner").remove(),u='<li  id="setAsAccountOwner-li-'+i+'"><a href="javascript:void(0)" onclick="setAsAccountOwner(\''+i+"')\">Set as account owner<\/a><\/li>",$("#options-"+i).append(u),f='<div id="'+t.Id+'-AccountOwner" data-owner="'+t.Id+'">Account Owner<\/div>',$("#levels-"+t.Id).append(f),$("#setAsAccountOwner-li-"+t.Id).remove(),$("#"+i+"-AccountOwner").removeData("owner")):cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}})}$("#general-seting-account").on("submit",function(n){n.preventDefault();$("#general-seting-account").valid()&&changeNameAccount()});