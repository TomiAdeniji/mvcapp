function checkfile(n){var i=JSON.parse($("#listIDAccept").val()),r=n.substring(n.lastIndexOf(".")).replace(".","").toLowerCase(),t={err:_L("ERROR_MSG_2"),stt:!1};return i.indexOf(r)<0?(t.err=_L("ERROR_MSG_3",[i.join(", ")]),t.stt=!1):(t.err="Success",t.stt=!0),t}function getDateTimeFormat(){return $dateFormatByUser.toUpperCase()+" "+$timeFormatByUser}function convertStringToDate(n,t){if(t){var i=t.split(" ")[0].toUpperCase(),r=t.split(" ").length>1?" "+t.split(" ")[1]:"";t=i+r}else t=$dateFormatByUser.toUpperCase()+" "+$timeFormatByUser;return moment(n,t).format($systemFormat)}function convertStringToDateFormat(n,t,i){var u=n,r;return(n&&(n=n.split(" ")),r=n[0].indexOf(",")>1?",":"",n[0].includes("Today"))?u:i?moment(n[0],t).format(i)+r+(n[1]?" "+n[1]:"")+(n[2]?" "+n[2]:""):moment(n[0],t).format($systemFormat)+r+(n[1]?" "+n[1]:"")+(n[2]?" "+n[2]:"")}function checkVersionfileUpload(n,t){var r=n.substring(n.lastIndexOf(".")).toLowerCase(),i={err:_L("ERROR_MSG_2"),stt:!1};return r!==t?(i.err=_L("ERROR_MSG_3",[t]),i.stt=!1):(i.err="Success",i.stt=!0),i}function getLimitFileSize(n){var t,i;return n&&(i=n.substr(n.lastIndexOf(".")+1),$.ajax({type:"GET",url:"/Qbicles/getFileTypeInfo",data:{ext:i.toLowerCase()},dataType:"json",cache:!1,"async":!1,success:function(n){t=n}})),t}function validateEmail(n){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(n)}function PinnedActivity(n,t,i){i&&i.stopPropagation();$.ajax({url:"/MyDesks/PinnedActivity/",data:{ActivityId:n,IsPost:t},cache:!1,type:"POST","async":!1,success:function(i){if(i.result){var r="-";t===!0&&(r="Post-");$("#pinIcon"+r+n).hasClass("pinned")?$("#pinIcon"+r+n).removeClass("pinned"):$("#pinIcon"+r+n).addClass("pinned");$("#pinIconNotification"+r+n).toggleClass("fa-thumb-tack");$("#pinIconNotification"+r+n).toggleClass("fa-check green");$("#pinTitleNotification"+r+n).toggleText("Pin this","Unpin this")}},error:function(n){cleanBookNotification.error(n.responseText,"Qbicles")}})}function MarkAsReadNotification(n){$.ajax({url:"/Notifications/MarkAsReadNotification/",data:{notificationId:n},cache:!1,type:"POST","async":!1,success:function(n){n.result&&InitNotificationsPagination()},error:function(n){cleanBookNotification.error(n.responseText,"Qbicles")}})}function MarkAsReadActivity(n){$.ajax({url:"/Notifications/MarkAsReadNotification/",data:{notificationId:0,activityKey:n},cache:!1,type:"POST","async":!0,success:function(n){n.result&&(n.Object==!0?$("#CheckUnReadNotificationExist").css("display",""):($("#CheckUnReadNotificationExist").css("display","none"),$("#notification-modal-show").html('<div class="soft_tan">You have no new messages!<\/div>')))},error:function(n){cleanBookNotification.error(n.responseText,"Qbicles")}})}function MarkAsMultipleReadNotification(n){$.ajax({url:"/Notifications/MarkAsMultipleReadNotification/",data:{strType:n},cache:!1,type:"POST","async":!1,success:function(n){n.result&&(InitNotificationsPagination(),$(".checkall").text("Check visible"),$(".removeall").prop("disabled",!0))},error:function(n){cleanBookNotification.error(n.responseText,"Qbicles");$.LoadingOverlay("hide")}})}function ordinalSuffix(n){var t="";if(n/10%10==1)t="th";else if(n>0)switch(n%10){case 1:t="st";break;case 2:t="nd";break;case 3:t="rd";break;default:t="th"}return t}function Loading(){$("body").append('<div id="modal-loading-parent"  class="modal fade" role="dialog" style="opacity: 0.6;background: #000;display: block;"> <\/div><div id="modal-loading"  class="modal fade" style="margin-top: 14%;"><div class="modal-dialog">  <div class="modal-content">  <div class="modal-body text-center">   <br /> <i class="fa fa-spinner fa-4x fa-spin" style="margin-bottom: 20px;"><\/i> <h4>Processing Data, please wait...<\/h4> <br /><br /> <\/div> <\/div> <\/div> <\/div><input type="button" data-toggle="modal" data-target="#modal-loading" id="popdialogloading" style="display:none" />');$("#popdialogloading").click()}function Loading(n){typeof n!="undefined"&&n||(n="Processing Data, please wait...");var t='<div id="modal-loading-parent"  class="modal fade" role="dialog" style="opacity: 0.6;background: #000;display: block;"> <\/div> <div id="modal-loading" class="modal fade" role="dialog" style="margin-top: 15%;"><div class="modal-dialog">  <div class="modal-content">  <div class="modal-body text-center">   <br /> <i class="fa fa-spinner fa-4x fa-spin" style="margin-bottom: 20px;"><\/i> <h4>'+n+'<\/h4> <br /> <br /><br /> <\/div> <\/div> <\/div> <\/div><input type="button" data-toggle="modal" data-target="#modal-loading" id="popdialogloading" style="display:none" />';$("body").append(t);$("#popdialogloading").click()}function EndLoading(){setTimeout(function(){$("body").find("div#modal-loading").remove();$("body").find("div#modal-loading-parent").remove();$(".modal-backdrop").remove();$("#popdialogloading").remove();$("body").removeClass("modal-open");$("body").removeAttr("style")},500)}function EndLoading2(){setTimeout(function(){var t,n;for($("body").find("div#modal-loading").remove(),$("body").find("div#modal-loading-parent").remove(),$(".modal-backdrop").remove(),t=$(".modal-backdrop.fade.in").toArray(),n=0;n<t.length-1;n++)t[n].remove();$("#popdialogloading").remove()},500)}function ResetFormControl(n){ClearError();$("#"+n)[0].reset();$("#"+n).validate().resetForm()}function UniqueId(n){n||(n=20);var t=(Math.floor(Math.random()*25)+10).toString(36)+(new Date).getTime().toString(36);do t+=Math.floor(Math.random()*35).toString(36);while(t.length<n);return t}function readURLImage(n,t){var i,r;if(n.files&&n.files[0]){if(i=t.indexOf(".")>-1?$(t):$("#"+t.replace("#","")),!n.files[0].type||n.files[0].type.split("/")[0]!=="image"){i.hide();return}r=new FileReader;r.onload=function(n){i.attr("src",n.target.result);i.show()};r.readAsDataURL(n.files[0])}else i.hide()}function setCookie(n,t){$.ajax({url:"/Commons/SaveCookie",data:{key:n,value:t,expireTime:5},type:"POST","async":!1,success:function(){},error:function(){}})}function getCookie(n){var t=null;return $.ajax({url:"/Commons/GetCookie",data:{key:n},type:"POST","async":!1,success:function(n){t=n.Object}}),t}function getCookieClient(n){let t=n+"=",r=decodeURIComponent(document.cookie),i=r.split(";");for(let n=0;n<i.length;n++){let r=i[n];while(r.charAt(0)==" ")r=r.substring(1);if(r.indexOf(t)==0)return r.substring(t.length,r.length)}return""}function removeCookie(n){$.ajax({url:"/Commons/RemoveCookie",data:{key:n},type:"DELETE",success:function(){},error:function(){}})}function LoadingOverlay(){$.LoadingOverlay("show")}function LoadingOverlayEnd(){$.LoadingOverlay("hide")}function toDataURL(n,t){var i=new XMLHttpRequest;i.onload=function(){var n=new FileReader;n.onloadend=function(){t(n.result)};n.readAsDataURL(i.response)};i.open("GET",n);i.responseType="blob";i.send()}function ResetItemSelected(n,t,i,r,u=0,f=false,e=true,o=true){var a,h,l,s;if((typeof i=="undefined"||i!==null)&&(a=!isNaN(i),$("#"+n)&&$("#"+t))){var c=$("#"+n+" tbody tr"),p=$("#"+n+" tbody tr td"),v=[];if(c.length>0&&p.length>1)for(h=0;h<c.length;h++)v.push($($(c[h]).find(" td input.traderItem")).val().split(":")[0]);l=jQuery.map(lstTraderItems,function(n){if(v.indexOf(n.Id.toString())===-1)return n});a&&(l=jQuery.map(l,function(n){if(n.WgIds&&(n.WgIds.join(",")+",").indexOf(i+",")>-1)return n}));r==null&&(r=$("select[name=workgroup]").val());r==null&&(r=0);var w="/Select2Data/GetTraderItemsByWorkgroup?workGroupId="+r+"&locationId="+u,b=$("#"+t+" option:not([selected])"),y=[];b.each(function(){var n=$(this);y.push({id:n.attr("value"),text:n.text()})});s={};$("#"+t).not(".multi-select").select2({ajax:{url:w,dataType:"json",delay:250,data:function(n){return s.keySearch=n.term,s.isSold=e,s.isBought=o,s},cache:!0,processResults:function(n){var t=[];return f==!0&&t.push({id:0,text:"Show all"}),t=t.concat(n.Object),n.Object.forEach(function(n){t.push({text:n.Name,itemId:n.Id,itemName:n.Name,itemImage:n.ImageUri,taxName:n.TaxRateName,taxRate:n.TaxRateValue,costUnit:n.CostUnit,value:n.Id,id:n.Id,newTag:!0})}),{results:t}}},defaultResults:y}).on("select2:selecting",function(n){var i=n.params.args.data,r="<option itemId='"+i.itemId+"' selected value='"+i.itemId+"' itemName='"+i.itemName+"' itemImage='"+i.itemImage+"' taxName='"+i.taxName+"' taxRate='"+i.taxRate+"' costUnit='"+i.costUnit+"'>"+i.text+"<\/option>";$("#"+t).html(r);n.preventDefault();$("#"+t).select2("close").trigger("change")}).val(0).trigger("change");qbicleLog("ResetItemSelected")}}function formatRepo(n){var t=$("<div class='select2-result-repository clearfix'><\/div>");return t.find(".select2-result-repository__title").text(n.full_name),t.find(".select2-result-repository__description").text(n.description),t.find(".select2-result-repository__forks").append(n.forks_count+" Forks"),t.find(".select2-result-repository__stargazers").append(n.stargazers_count+" Stars"),t.find(".select2-result-repository__watchers").append(n.watchers_count+" Watchers"),t}function ResetBudgetItemSelected(n,t){var u,r,e,i;if($("#"+n)&&$("#"+t)){var f=$("#"+n+" tbody tr"),s=$("#"+n+" tbody tr td"),o=[];if(f.length>0&&s.length>1)for(u=0;u<f.length;u++)o.push($($(f[u]).find(" td input.traderItem")).val().split(":")[0]);for(r=jQuery.map(lstTraderItems,function(n){if(o.indexOf(n.Id.toString())===-1)return n}),e="<option value='0'><\/option>",i=0;i<r.length;i++)e+="<option itemId='"+r[i].Id+"' itemName='"+r[i].Name+"' itemImage='"+r[i].ImageUri+"' itemUnit='"+r[i].Unit+"'value=\""+r[i].Id+'">'+r[i].Name+"<\/option>";$("#"+t).empty();$("#"+t).append(e);$("#"+t).not(".multi-select").select2()}}function resetFormTransfer(){$("#item_selected select").empty();$("#item_selected select").append("<option><\/option>");$("#item_selected select").not(".multi-select").select2({placeholder:"Please select"});$("#form_item_quantity").val("");$("#item_fee").val("")}function numberString(n,t){return t||(t=""),n=n?parseFloat(n.toString()):0,isNaN(n)&&(n=0),t+n.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")}function UpdateMenuActive(n){$(".app_main_nav li").removeClass("active");n&&$(n.parentElement).addClass("active");switch(currentTraderTab.toLocaleLowerCase()){case"apptrader":$(".trader-sale").addClass("active");break;case"purchases":$(".trader-purchase").addClass("active");break;case"transfers":$(".trader-transfer").addClass("active");break;case"contacts":$(".trader-contact").addClass("active");break;case"cashbank":$(".trader-bank").addClass("active");break;case"itemsproducts":$(".trader-item").addClass("active");break;case"budget":$(".trader-budget").addClass("active");break;case"reports":$(".trader-report").addClass("active");break;case"config":$(".trader-config").addClass("active");break;case"manufacturing":$(".trader-Manufacturing").addClass("active");break;case"pointofsale":$(".trader-pos").addClass("active");break;case"shiftmanagement":$(".trader-shiftManagement").addClass("active");break;case"orderdisplaysystem":$(".trader-pos-pds").addClass("active");break;case"system":$(".admin-system").addClass("active");break;case"domains":$(".admin-domain").addClass("active");break;case"bankmatetrans":$(".admin-bankmate-transactions").addClass("active");break;case"datarecovery":$(".admin-data-recovery").addClass("active");break;case"accountstatement":$(".admin-account-statement").addClass("active");break;case"adminskills":$(".admin-skill").addClass("active");break;case"saleschannels":$(".trader-channel").addClass("active");break;case"hlsetup":$(".hlsetup").addClass("active");break;case"domainrequest":$(".domainrequest").addClass("active");break;case"waitlistrequest":$(".waitlistrequest").addClass("active");break;case"extensionrequest":$(".extensionrequest").addClass("active");break;case"communityfeature":$(".communityfeature").addClass("active");break;case"monibackpromotion":$(".monibackpromotion").addClass("active");break;case"bulkdeal":$(".bulkdeal").addClass("active");break;default:$(".trader-sale").addClass("active");$("#mobile-tab-active").val("apptrader")}}function LoadListAdministratorDomain(){$.fn.DataTable.isDataTable("#tbl-administrator-domains")?$("#tbl-administrator-domains").DataTable().ajax.reload():setTimeout(function(){$("#tbl-administrator-domains").DataTable().ajax.reload()},1e3)}function ShowAdminDomains(){document.title="Administration - Domains";setTabTrader(currentTraderTab);$("#administration-content").load("/Administration/AdminDomainsTab",function(){$("#tbl-administrator-domains").on("processing.dt",function(n,t,i){$("#processingIndicator").css("display","none");i?$("#tbl-administrator-domains").LoadingOverlay("show"):$("#tbl-administrator-domains").LoadingOverlay("hide",!0)}).DataTable({destroy:!0,serverSide:!0,paging:!0,searching:!1,responsive:!0,lengthMenu:[[10,20,50,100],[10,20,50,100]],pageLength:10,deferLoading:30,order:[[1,"asc"]],ajax:{url:"/Domain/GetListDomainByAccount",type:"POST",data:function(n){return $.extend({},n,{name:$("#domainSearch").val(),dateRange:$("#domainDateRange").val(),status:$("#domainStatus").val(),type:"Administrator"})}},columns:[{data:"LogoUri",orderable:!1,width:"80px",render:function(n,t,i){return i.LogoUri?' <div id="avatar-'+i.Id+'" class="table-avatar" style="background-image: url(\''+apiDocRetrievalUrl+i.LogoUri+"&size=T');\">&nbsp;<\/div>":'<div id="avatar-'+i.Id+'" class="table-avatar" style="background-image: url(\'/Content/DesignStyle/img/icon_domain_default.png\');">&nbsp;<\/div>'}},{data:"Name",orderable:!0,render:function(n,t,i){return i.Name}},{data:"CreatedDate",orderable:!0,render:function(n,t,i){return i.CreatedDate}},{data:"Status",orderable:!0,render:function(n,t,i){return i.Status===domainStatusClose?'<div id="status-'+i.Id+'">Closed<\/div>':'<div id="status-'+i.Id+'">Active<\/div>'}},{data:null,orderable:!1,width:"80px",render:function(n,t,i){var r=' <div class="btn-group options">';return r+=' <button type="button" class="btn btn-success dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> Options &nbsp; <i class="fa fa-angle-down"><\/i><\/button>',r+='<ul class="dropdown-menu">',r+="  <li>",r+='<a href="javascript:void(0)" id="edit-anchor-'+i.Id+'" onclick="editDomain(\''+i.Key+"', '"+fixQuoteCode(i.Name)+"', '"+apiDocRetrievalUrl+i.LogoUri+"')\">Edit Domain<\/a>",r+="<\/li>",r+=" <li>",r+=' <a href="javascript:void(0)" id="openOrClose-'+i.Id+'" onclick="openOrCloseDomainById(\''+i.Key+"', '"+i.Id+"')\">",r+=i.Status===domainStatusOpened?"Close Domain":"Open Domain",r+=" <\/a>",r+=" <\/li>",r+=" <\/ul>",r+"<\/div>"}}]});$("#domainStatus").select2();$("#domainDateRange").daterangepicker({autoUpdateInput:!1,cancelClass:"btn-danger",opens:"right",locale:{cancelLabel:"Clear",format:"DD-MM-YYYY"}});$("#domainDateRange").on("apply.daterangepicker",function(n,t){$(this).val(t.startDate.format($dateFormatByUser.toUpperCase())+" - "+t.endDate.format($dateFormatByUser.toUpperCase()));LoadListAdministratorDomain()});$("#domainDateRange").on("cancel.daterangepicker",function(){$(this).val("");LoadListAdministratorDomain()});$("#domainSearch").keyup(searchThrottle(function(){LoadListAdministratorDomain()}));$("#domainStatus").change(function(){LoadListAdministratorDomain()});LoadListAdministratorDomain()})}function setTabTrader(n,t){$("#page").val()=="Administration"?(n&&(window.localStorage.AdminTab=n),t&&(window.localStorage.SubAdminTab=t)):(n&&(window.localStorage.TraderTab=n),t&&(window.localStorage.SubTraderTab=t))}function setTabLevel(n,t){n&&(window.localStorage["level"+n]=t,n===1?window.localStorage.TraderTab=t:n===2&&(window.localStorage.SubTraderTab=t))}function getTabLevel(n,t){return n?n===1&&t?window.localStorage.TraderTab:n===2&&t?window.localStorage.SubTraderTab:window.localStorage["level"+n]:null}function openTab(n,t){var i=null,r,u;if(n)i=getTabLevel(n,t),i&&$('a[href="#'+i+'"]').tab("show");else for(r=!0,u=1;r;)i=getTabLevel(u,t),i?($('a[href="#'+i+'"]').tab("show"),u++):r=!1}function getTabTrader(){var n={TraderTab:window.localStorage.TraderTab,SubTraderTab:window.localStorage.SubTraderTab};return $("#page").val()=="Administration"&&(n.TraderTab=window.localStorage.AdminTab,n.SubTraderTab=window.localStorage.SubAdminTab),n}function removeTabTrader(){localStorage.removeItem("TraderTab");localStorage.removeItem("SubTraderTab")}function setValueSelected(n){switch(n.toLocaleLowerCase()){case"apptrader":case"purchases":case"transfers":case"contacts":case"cashbank":case"itemsproducts":case"budget":case"reports":case"config":case"manufacturing":case"pointofsale":case"saleschannels":case"shiftmanagement":case"accountstatement":case"adminaccount":case"system":case"bankmatetrans":case"domains":case"datarecovery":case"adminskills":case"orderdisplaysystem":case"hlsetup":case"communityfeature":case"monibackpromotion":case"bulkdeal":case"saleschannels":case"domainrequest":case"waitlistrequest":case"extensionrequest":$("#mobile-tab-active").val(n.toLocaleLowerCase());break;default:$("#mobile-tab-active").val("apptrader");currentTraderTab="AppTrader";setTabTrader(currentTraderTab)}}function onSelectedMenuChange(){currentTraderTab=$("#mobile-tab-active").val();UpdateMenuActive();GetContentMobile(currentTraderTab)}function GetContentMobile(n){switch(n.toLocaleLowerCase()){case"apptrader":ShowSaleContent(!0);break;case"purchases":ShowPurchaseContent(!0);break;case"transfers":ShowTransfersContent(!0);break;case"contacts":ShowContactContent(!0);break;case"cashbank":ShowCashBankContent(!0);break;case"itemsproducts":ShowItemProductContent(!0);break;case"budget":ShowBudgetContent(!0);break;case"reports":ShowReportsContent(!0);break;case"config":ShowConfigContent(!0);break;case"manufacturing":ShowManufacturingContent(!0);break;case"pointofsale":ShowPointOfSaleContent(!0);break;case"shiftmanagement":ShowShiftManagementContent(!0);break;case"orderdisplaysystem":ShowOrderDisplaySystemContent(!0);break;case"system":ShowAdminSystems();break;case"domains":ShowAdminDomains();break;case"bankmatetrans":ShowAdminBankmatetrans();break;case"datarecovery":ShowAdminDataRecovery();break;case"accountstatement":ShowAdminAccountStatement();break;case"adminskills":ShowAdminSkills();break;case"saleschannels":ShowChannelsContent();break;case"hlsetup":ShowHLSetupContent();break;case"communityfeature":ShowAdminCommunityFeatureContent();break;case"domainrequest":ShowAdminDomainRequest();break;case"waitlistrequest":ShowAdminWaitlistRequest();break;case"extensionrequest":ShowAdminExtensionRequest();break;case"monibackpromotion":ShowAdminMonibackPromotionTabContent();break;case"bulkdeal":ShowBulkDealTabContent();break;default:ShowSaleContent(!0)}}function setMessageReload(n){window.localStorage[window.location.href.toLocaleLowerCase()]=n}function showMessageReload(){var n=window.localStorage[window.location.href.toLocaleLowerCase()];n&&(cleanBookNotification.error(n,"Qbicles"),LoadingOverlayEnd());window.localStorage.removeItem(window.location.href.toLocaleLowerCase())}function setLocalStorage(n,t){window.localStorage[n]=t}function getLocalStorage(n){return window.localStorage[n]}function removeLocalStorage(n){localStorage.removeItem(n)}function setFilterByDateTime(n,t,i,r){r||(r="DD/MM/YYYY");$("#"+t).dataTable().fnDestroy();$.fn.dataTable.ext.search&&$.fn.dataTable.ext.search.length>0&&($.fn.dataTable.ext.search=[]);$("#"+n).daterangepicker({autoUpdateInput:!1,cancelClass:"btn-danger",opens:"left",locale:{cancelLabel:"Clear",format:r}});$.fn.dataTable.ext.search.push(function(t,u){if(!$("#"+n).val()||$("#"+n).val()&&$("#"+n).val().trim()==="")return!0;var f=moment(($("#"+n).val().split("-")[0]+"").trim(),r),e=moment(($("#"+n).val().split("-")[1]+"").trim(),r),o=moment((u[i]+"").trim(),r);return f===null&&e===null?!0:f===null&&o<=e?!0:e===null&&o>=f?!0:o<=e&&o>=f?!0:!1});$("#"+n).on("apply.daterangepicker",function(i,u){$(this).val(u.startDate.format(r)+" - "+u.endDate.format(r));$("#"+n).html(u.startDate.format(r)+" - "+u.endDate.format(r));$("#"+t).DataTable().draw()});$("#"+n).on("cancel.daterangepicker",function(){$(this).val(null);$("#"+n).html("full history");$("#"+t).DataTable().draw()});$("#"+n).on("keyup",function(){$("#"+t).DataTable().draw()});$("#"+t).DataTable().draw()}function destroyTableById(n){$("#"+n).dataTable().fnClearTable();$("#"+n).dataTable().fnDraw();$("#"+n).dataTable().fnDestroy()}function destroyTableByClass(n){$("table."+n).dataTable().fnClearTable();$("table."+n).dataTable().fnDraw();$("table."+n).dataTable().fnDestroy()}function AjaxElementLoadPost(n,t,i){$("#"+i).LoadingOverlay("show");$("#"+i).empty();$("#"+i).load(n,t,function(){$("#"+i).LoadingOverlay("hide",!0)})}function AjaxElementLoad(n,t){$("#"+t).LoadingOverlay("show");$("#"+t).empty();$("#"+t).load(n,function(){$("#"+t).LoadingOverlay("hide",!0)})}function AjaxElementShowModal(n,t){$("#"+t).LoadingOverlay("show");$("#"+t).empty();$("#"+t).load(n,function(){$("#"+t).LoadingOverlay("hide",!0);$("#"+t).modal("show")})}function AjaxElementShowModalPostData(n,t,i){$("#"+i).LoadingOverlay("show");$("#"+i).empty();$("#"+i).load(n,t,function(){$("#"+i).LoadingOverlay("hide",!0);$("#"+i).modal("show")})}function removeValidateSelect(n){$(n).removeClass("valid-select")}function initValidate(){$(document).ready(function(){$(".valid-select").on("change",function(){$(this).val()!==null&&$(this).next().removeClass("error")})})}function delay(n,t){var i=0;return function(){var r=this,u=arguments;clearTimeout(i);i=setTimeout(function(){n.apply(r,u)},t||0)}}function bytesToSize(n){var t;return n===0?"0 Byte":(t=parseInt(Math.floor(Math.log(n)/Math.log(1024))),Math.round(n/Math.pow(1024,t),2)+" "+["Bytes","KB","MB","GB","TB"][t])}function LoadTableData(n,t,i,r,u){u||(u=1);i||(i={});$("#"+n).on("processing.dt",function(t,i,r){r&&$(".loadingoverlay").length===0?$("#"+n).LoadingOverlay("show",{minSize:"70x60px"}):$("#"+n).LoadingOverlay("hide",!0)}).DataTable({destroy:!0,dom:'<"top"fl<"clear">>rt<"bottomtable"ip<"clear">>',language:{infoFiltered:"",processing:loadingoverlay_value},serverSide:!0,info:!1,stateSave:!1,bLengthChange:!0,paging:!0,searching:!1,responsive:!0,scrollX:!1,autoWidth:!0,deferLoading:30,lengthMenu:[[10,20,50,100],[10,20,50,100]],pageLength:10,ajax:{url:t,type:"GET",dataType:"json",data:function(n){return $.extend({},n,i)}},columns:r,order:[[u,"asc"]]})}function _L(n){try{var t=_errormessages[n];return t?t:n}catch(i){return n}}function _L(n,t){try{var i=_errormessages[n];return i?i.format(t):n}catch(r){return n}}function ReLoadComment(n,t,i,r){$("#"+n).load("/Trader/LoadPostComment?type="+t+"&id="+i+"&page="+r,function(){})}function showTaxRatesDetail(n,t,i,r){var u,f,e;try{return(currencySetting||loadCurrencySettings(),u=currencySetting.SymbolDisplay==0?currencySetting.CurrencySymbol+"0":"0"+currencySetting.CurrencySymbol,!r||r===u)?"0":(f='<ul class="unstyled">',e=r.split(","),e.forEach(function(r){var e=r.split("-"),o=parseFloat(e[0]),s=n*t*(1-parseFloat(i)/100)*(o/100);u=toCurrencySymbol(s,!1);f+="<li>"+u+"<small> &nbsp; <i>("+e[1]+")<\/i><\/small><\/li>"}),f+='<\/ul><input type="hidden" value="'+r+'" class="txt-taxname">')}catch(o){return r}}function toCurrencySymbol(n,t){return currencySetting||loadCurrencySettings(),currencySetting&&(n=parseFloat(n),n=n.toFixed(currencySetting.DecimalPlace),n=n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,currencySetting.currencyGroupSeparator?currencySetting.currencyGroupSeparator:","),(typeof t=="undefined"||t)&&(n=currencySetting.SymbolDisplay==0?currencySetting.CurrencySymbol+n:n+currencySetting.CurrencySymbol)),n}function toCurrencyDecimalPlace(n){return typeof n!="number"&&(n=parseFloat(n)),currencySetting?n.toFixed(currencySetting.DecimalPlace):(loadCurrencySettings(),n.toFixed(currencySetting.DecimalPlace))}function stringToNumber(n){if(typeof n=="number")return n;currencySetting||loadCurrencySettings();var t=new RegExp("\\"+currencySetting.currencyGroupSeparator,"g");return parseFloat(n.replace(currencySetting.CurrencySymbol,"").replace(t,"").trim())}function loadCurrencySettings(){$.ajax({url:"/Qbicles/GetCurrencySettings",type:"get","async":!1,success:function(n){currencySetting=n?n:{currencyGroupSeparator:",",CurrencySymbol:"",SymbolDisplay:0,DecimalPlace:2}},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}})}function qbicleLog(){showLog}function logAccess(n){$.ajax({url:"/Commons/LogAccess?type="+n,data:{type:n},cache:!1,type:"POST","async":!1,success:function(){},error:function(){}})}function GenerateUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n==="x"?t:t&3|8;return i.toString(16)})}function UploadMediaS3ClientSide(n){var r=new $.Deferred,t={objectKey:"no-image",fileName:"",fileSize:""},f=document.getElementById(n).files,e,i,u;return f.length>0?(AWS.config.update({region:$s3BucketRegion,credentials:new AWS.CognitoIdentityCredentials({IdentityPoolId:$s3IdentityPoolId})}),e=new AWS.S3({apiVersion:"2006-03-01",params:{Bucket:$s3BucketName}}),i=f[0],t.fileName=i.name,t.fileSize=i.size,t.objectKey=GenerateUUID(),u=i.type,u=i.type.match("image.*")?"image":i.type.match("video.*")?"video":"application",e.upload({Key:t.objectKey,Body:i,ContentType:i.type,Metadata:{"file-name":t.fileName,"file-type":u,"file-extension":t.fileName.split(".").pop()},ACL:"bucket-owner-full-control"},function(n){if(n){t.objectKey="no-image";cleanBookNotification.error(n,"Qbicles");r.resolve(t);return}r.resolve(t)})):r.resolve(t),r.promise()}function UploadBatchMediasS3ClientSide(n){var t=new $.Deferred,i=[],r=1;return _.forEach(n,function(n){var t=n.File,f=n.Id,r=t.type,u;r=t.type.match("image.*")?"image":t.type.match("video.*")?"video":"application";u={Key:f,Body:t,ContentType:t.type,Metadata:{"file-name":n.Name,"file-type":r,"file-extension":n.Extension},ACL:"bucket-owner-full-control"};i.push(u)}),Promise.all(i.map(function(i){AWS.config.update({region:$s3BucketRegion,credentials:new AWS.CognitoIdentityCredentials({IdentityPoolId:$s3IdentityPoolId})});var u=new AWS.S3({apiVersion:"2006-03-01",params:{Bucket:$s3BucketName}});u.upload(i,function(i){i&&cleanBookNotification.error(i,"Qbicles");r===n.length&&t.resolve();r++}).on("httpUploadProgress",function(n){var t=parseInt(n.loaded*100/n.total);$("progress").attr("value",t)})})),t.promise()}function initJsTree(){$(".jstree").bind("loaded.jstree",function(){$("div#jstree_id").jstree("_open_to","#selected-account")}).jstree({core:{themes:{dots:!0,stripes:!1,variant:"large"}},search:{case_insensitive:!0,show_only_matches:!0},plugins:["themes","search","html_data","ui","wholerow"]});$(".jstree").on("select_node.jstree",function(n,t){t.instance.toggle_node(t.node)}).on("select_node.jstree",function(n,t){t.instance.get_node(t.node,!0).children("a").attr("href")!=="#"&&(document.location=t.instance.get_node(t.node,!0).children("a").attr("href"))});var n=function(){$(".treeview").fadeIn(800)};setTimeout(n,200);$(".search-tree").keyup(function(){var n=$(this).val();$(".jstree").jstree("search",n)})}function LoadAccountTree(n){LoadingOverlay();$("#app-bookkeeping-treeview").html("");$("#app-bookkeeping-treeview").load("/Bookkeeping/TreeViewAccountByNodeIdPartial?id=0&number=0&linkedId="+n,function(){initJsTree();LoadingOverlayEnd()})}function fixQuoteCode(n){return n?n.replace(/'/g,"\\'").replace(/"/g,"&#34;"):n}function getQuerystring(n){const t=new URLSearchParams(location.search);return t?t.get(n):""}function initPendingDomainRequestTable(){var n=$("#admin-pending-domainrequest").on("processing.dt",function(n,t,i){$("#processingIndicator").css("display","none");i?$("#admin-pending-domainrequest").LoadingOverlay("show"):$("#admin-pending-domainrequest").LoadingOverlay("hide",!0)}).DataTable({destroy:!0,serverSide:!0,paging:!0,searching:!1,responsive:!0,lengthMenu:[[10,20,50,100],[10,20,50,100]],pageLength:10,ajax:{url:"/Domain/LoadDomainRequestTableContent",type:"POST",data:function(n){return $.extend({},n,{keySearch:$("#pending-request-search").val(),createdUserIdSearch:$("#pending-request-creator").val(),dateRange:$("#pending-request-daterange").val(),domainTypeSearch:$("#pending-request-type").val(),lstRequestStatusSearch:[1]})}},columns:[{data:"requestId",orderable:!1,render:function(n,t,i){var r=i.requestId;return""+('<input type="checkbox" requestId="'+r+"\" style=\"position: relative; top: 0;\" onclick=\"if($('#admin-pending-domainrequest input:checked').length > 0){$('.withselected').fadeIn();}else{$('.withselected').fadeOut();};\">")}},{data:"RequestedDate",orderable:!0},{data:"RequestedByName",orderable:!0,render:function(n,t,i){var u=i.RequestedByName,f=i.RequestedByLogoUri,e=i.RequestById,r="";return r+='<a href="/Community/UserProfilePage?uId='+e+'">',r+='<div class="table-avatar mini pull-left" style="background-image: url(\''+f+"');\"><\/div>",r+='<div class="avatar-name pull-left" style="color: #333; line-height: 4; padding-left: 15px;">'+u+"<\/div>",r+'<div class="clearfix"><\/div><\/a>'}},{data:"DomainName",orderable:!1,render:function(n,t,i){var u=i.DomainLogoUri,f=i.DomainName,r="";return r+='<div class="table-avatar mini pull-left" style="background-image: url(\''+u+"');\"><\/div>",r+='<div class="avatar-name pull-left" style="color: #333; line-height: 4; padding-left: 15px;">'+f+"<\/div>",r+'<div class="clearfix"><\/div>'}},{data:"RequestTypeStr",orderable:!0},{orderable:!1,render:function(n,t,i){var r="";return r+='<div class="btn-group">',r+='<button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">',r+='Actions &nbsp; <i class="fa fa-angle-down"><\/i>',r+="<\/button>",r+='<ul class="dropdown-menu dropdown-menu-right primary">',r+='<li><a href="#app-mbm-admin-transfers" onclick="triggerDomainRequest('+i.requestId+', 2)" data-toggle="modal">Approve<\/a><\/li>',r+='<li><a href="#" onclick="triggerDomainRequest('+i.requestId+', 3)">Reject<\/a><\/li>',r+="<\/ul>",r+"<\/div>"}}]})}function initHistoryDomainRequestTable(){var n=$("#admin-history-domainrequest").on("processing.dt",function(n,t,i){$("#processingIndicator").css("display","none");i?$("#admin-history-domainrequest").LoadingOverlay("show"):$("#admin-history-domainrequest").LoadingOverlay("hide",!0)}).DataTable({destroy:!0,serverSide:!0,paging:!0,searching:!1,responsive:!0,lengthMenu:[[10,20,50,100],[10,20,50,100]],pageLength:10,ajax:{url:"/Domain/LoadDomainRequestTableContent",type:"POST",data:function(n){return $.extend({},n,{keySearch:$("#history-request-search").val(),dateRange:$("#history-request-daterange").val(),createdUserIdSearch:$("#history-request-creator").val(),domainTypeSearch:$("#history-request-type").val(),lstRequestStatusSearch:[2,3]})}},columns:[{data:"RequestedDate",orderable:!0},{data:"RequestedByName",orderable:!0,render:function(n,t,i){var u=i.RequestedByName,f=i.RequestedByLogoUri,e=i.RequestById,r="";return r+='<a href="/Community/UserProfilePage?uId='+e+'">',r+='<div class="table-avatar mini pull-left" style="background-image: url(\''+f+"');\"><\/div>",r+='<div class="avatar-name pull-left" style="color: #333; line-height: 4; padding-left: 15px;">'+u+"<\/div>",r+'<div class="clearfix"><\/div><\/a>'}},{data:"DomainName",orderable:!1,render:function(n,t,i){var u=i.DomainLogoUri,f=i.DomainName,r="";return r+='<div class="table-avatar mini pull-left" style="background-image: url(\''+u+"');\"><\/div>",r+='<div class="avatar-name pull-left" style="color: #333; line-height: 4; padding-left: 15px;">'+f+"<\/div>",r+'<div class="clearfix"><\/div>'}},{data:"RequestTypeStr",orderable:!0},{data:"Status",orderable:!0,render:function(n,t,i){return""+i.RequestStatusLabel}}]})}function initUserDomainRequestTable(){var n=$("#domain-request-history").on("processing.dt",function(n,t,i){$("#processingIndicator").css("display","none");i?$("#domain-request-history").LoadingOverlay("show"):$("#domain-request-history").LoadingOverlay("hide",!0)}).dataTable({destroy:!0,serverSide:!0,paging:!0,searching:!1,responsive:!0,lengthMenu:[[10,20,50,100],[10,20,50,100]],pageLength:10,order:[[0,"desc"]],ajax:{url:"/Domain/LoadDomainRequestTableContent",type:"POST",data:function(n){return $.extend({},n,{keySearch:$("#domain-request-key").val(),dateRange:$("#domain-request-daterange").val(),createdUserIdSearch:"",domainTypeSearch:0,lstRequestStatusSearch:[1,2,3],isSearchingForCurrentUser:!0})}},columns:[{data:"RequestedDate",orderable:!0},{data:"DomainName",orderable:!1,render:function(n,t,i){var u=i.DomainLogoUri,f=i.DomainName,r="";return r+='<div class="table-avatar mini pull-left" style="background-image: url(\''+u+"');\"><\/div>",r+='<div class="avatar-name pull-left" style="color: #333; line-height: 4; padding-left: 15px;">'+f+"<\/div>",r+'<div class="clearfix"><\/div>'}},{data:"RequestTypeStr",orderable:!0},{data:"Status",orderable:!0,render:function(n,t,i){return""+i.RequestStatusLabel}},{orderable:!1,render:function(n,t,i){var r="";return(i.Status==1||i.Status==3)&&(r+='<a href="mailto:support@qbicles.com" class="btn btn-primary">Contact us<\/a>'),r}},]})}function triggerDomainRequest(n,t){$("#admin-pending-domainrequest").LoadingOverlay("show");$.ajax({method:"POST",dataType:"JSON",url:"/Domain/ProcessDomainRequest",data:{domainRequestId:n,status:t},success:function(n){n.result?(cleanBookNotification.updateSuccess(),$("#admin-pending-domainrequest").DataTable().ajax.reload(),$("#admin-history-domainrequest").DataTable().ajax.reload()):cleanBookNotification.error(n.msg,"Qbicles")},error:function(n){cleanBookNotification.error(n.msg,"Qbicles")}});$("#admin-pending-domainrequest").LoadingOverlay("hide")}function processMultipleDomainRequest(n){var t,i;LoadingOverlay();t=[];$("#admin-pending-domainrequest input:checked").each(function(){t.push($(this).attr("requestid"))});i="/Domain/ProcessMultipleDomainRequests";$.ajax({method:"POST",dataType:"JSON",url:i,data:{lstRequestId:t,status:n},success:function(n){n.result?(cleanBookNotification.updateSuccess(),$("#admin-pending-domainrequest").DataTable().ajax.reload(),$("#admin-history-domainrequest").DataTable().ajax.reload(),$(".withselected").fadeOut()):cleanBookNotification.error(n.msg,"Qbicles")},error:function(n){cleanBookNotification.error(n.msg,"Qbicles")}});LoadingOverlayEnd()}function showDomainRequestHistory(){initUserDomainRequestTable();$("#domain-request-daterange").on("apply.daterangepicker",function(n,t){$(this).val(t.startDate.format($dateFormatByUser.toUpperCase())+" - "+t.endDate.format($dateFormatByUser.toUpperCase()));$("#domain-request-history").DataTable().ajax.reload()});$("#domain-request-daterange").on("cancel.daterangepicker",function(){$(this).val("");$("#domain-request-history").DataTable().ajax.reload()});$("#domain-request-key").keyup(delay(function(){$("#domain-request-history").DataTable().ajax.reload()},1e3));$("#domain-history").modal("show")}function showDomainExtensionHistoryTab(n){var t="/Domain/UpdateCurrentDomain?domainKey="+n;$.ajax({method:"POST",url:t,success:function(n){n.result?window.location="/Administration/AdminPermissions?tabActive=ExtensionHistory":cleanBookNotification.error(n.msg)},error:function(n){cleanBookNotification.error(n.msg)}})}function updateURL(n,t){if(history.pushState){var i=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+n+"="+t;window.history.pushState({path:i},"",i)}}function updateNavBarOpenStatus(){var n=$("body").hasClass("sidebar-collapse");$.ajax({method:"POST",dataType:"JSON",url:"/UserProfile/UpdateUserNavBarOpenStatus",data:{isClosed:n},error:function(n){cleanBookNotification.error(n.msg,"Qbicles")}})}function openWindowWithPost(n,t){var i=document.createElement("form"),u,r;i.target="_blank";i.method="POST";i.action=n;i.style.display="none";for(u in t)r=document.createElement("input"),r.type="hidden",r.name=u,r.value=t[u],i.appendChild(r);document.body.appendChild(i);i.submit();document.body.removeChild(i)}function validateAddComment(){var n=$("#txt-comment-approval").val();n.length>1500?$("#addcomment-error").show():$("#addcomment-error").hide()}function addCommentForApproval(n){if(!busycomment){var t=$("#txt-comment-approval");t.val()&&(isPlaceholder(!0,"#list-comments-approval"),busycomment=!0,$.ajax({url:"/QbicleComments/AddCommentToApproval",data:{message:t.val(),approvalKey:n},type:"POST",success:function(n){n&&t.val("");busycomment=!1},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles");busycomment=!1}}).always(function(){isPlaceholder(!1,"")}))}}function LoadMorePosts(n,t,i){$.ajax({url:"/Qbicles/LoadMoreActivityPosts",data:{activityKey:n,size:loadCountPost*t},cache:!1,type:"POST",dataType:"html",beforeSend:function(){},success:function(n){if(n===""){$("#btnLoadPosts").remove();return}$("#"+i).append(n).hide().fadeIn(250);loadCountPost=loadCountPost+1},error:function(n){cleanBookNotification.error(n.responseText,"Qbicles")}})}function LoadMoreMedias(n,t,i){$.ajax({url:"/Qbicles/LoadMoreActivityMedias",data:{activityId:n,size:loadCountMedia*t},cache:!1,type:"POST",dataType:"html",beforeSend:function(){},success:function(n){if(n===""){$("#btnLoadMedias").remove();return}$("#"+i).append(n).hide().fadeIn(250);loadCountMedia=loadCountMedia+1},error:function(n){cleanBookNotification.error(n.responseText,"Qbicles")}})}function validateAddCommentTask(){var n=$("#txt-comment-task").val();n.length>1500?$("#addcomment-error").show():$("#addcomment-error").hide()}function AddCommentToTask(n){if(!busycomment){var t=$("#txt-comment-task");t.val()&&!$("#addcomment-error").is(":visible")&&(isPlaceholder(!0,"#list-comments-task"),busycomment=!0,$.ajax({url:"/QbicleComments/AddCommentToTask",data:{message:t.val(),taskKey:n},type:"POST",success:function(n){n.result&&(t.val(""),n.msg!=""&&($("#list-comments-task").prepend(n.msg),isDisplayFlicker(!1)));busycomment=!1},error:function(){isPlaceholder(!1,"");cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Task")}}).always(function(){busycomment=!1}))}}function AddCommentTransaction(n){var t=$("#txt-comment-transaction");isPlaceholder(!0,"#transaction-comments-"+n);busycomment=!0;$.ajax({url:"/QbicleComments/AddCommentTransaction",data:{message:t.val(),id:n},type:"POST",success:function(n){n&&t.val("")},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles");isPlaceholder(!1,"")}}).always(function(){busycomment=!1})}function AddCommentJournalEntry(n){var t=$("#txt-comment-task");isPlaceholder(!0,"#list-comments-journal");busycomment=!0;$.ajax({url:"/QbicleComments/AddCommentJournalEntry",data:{message:t.val(),id:n},type:"POST",success:function(n){n&&t.val("")},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles");isPlaceholder(!1,"")}}).always(function(){busycomment=!1})}function RemoveOptionSelect2(n){$("#"+n).select2("destroy");$("#"+n+" option:selected").remove();$("#"+n).not(".multi-select").select2({placeholder:"Please select"})}function AddOptionSelect2(n,t,i){$("#"+n).select2("destroy");$("#"+n).append("<option value='"+t+"'>"+i+"<\/option>");$("#"+n).not(".multi-select").select2({placeholder:"Please select"})}function initSelect2MethodAJAX(n,t="",i={},r=false){if(t==""){cleanBookNotification.error(_L("ERROR_MSG_5"),"Qbicles");return}var f=$("#"+n+" option:not([selected])"),u=[];f.each(function(){var n=$(this);u.push({id:n.attr("value"),text:n.text()})});$("#"+n).select2({ajax:{url:t,dataType:"json",delay:250,data:function(n){return i.keySearch=n.term,i},cache:!0,processResults:function(n){var t=[];return r==!0&&t.push({id:0,text:"Show all"}),t=t.concat(n.Object),{results:t}}},defaultResults:u})}function validateEmails(n){var r="",t,i;const u=n.split(/[;,]/);for(t=0;t<u.length;t++)i=u[t].trim(),i.length>0&&!/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(i)&&(r+=i+"\n");return r}var loadingoverlay_value="<div style=\"background-color: rgba(255, 255, 255, 0.8);position: fixed;display: flex;flex-direction: column;align-items: center;justify-content: center;z-index: 2147483647;background-image: url('/Content/DesignStyle/img/loadingnew.gif');background-position: center center;background-repeat: no-repeat;top: 0px;left: 0px;width: 100%;height: 100%;background-size: 100px;\"><\/div>",showLog=!1,currencySetting,lstTraderItems=[],currentTraderTab,activeTab,itemOverViewFilter;UpdateTitle=function(){switch(currentTraderTab.toLocaleLowerCase()){case"apptrader":$(".mod_title h4").text("Sales");break;case"purchases":$(".mod_title h4").text("Purchases");break;case"transfers":$(".mod_title h4").text("Transfers");break;case"contacts":$(".mod_title h4").text("Contacts");break;case"cashbank":$(".mod_title h4").text("Cash & Bank");break;case"itemsproducts":$(".mod_title h4").text("Items & Products");break;case"budget":$(".mod_title h4").text("Budget");break;case"reports":$(".mod_title h4").text("Reports");break;case"config":$(".mod_title h4").text("App Configuration");break;case"manufacturing":$(".mod_title h4").text("Manufacturing");break;case"pointofsale":$(".mod_title h4").text("Devices");break;case"saleschannels":$(".mod_title h4").text("Sales Channels");break;case"shiftmanagement":$(".mod_title h4").text("Shift Management");break;case"orderdisplaysystem":$(".mod_title h4").text("Order Display System");break;default:$(".mod_title h4").text("Sales")}};currentTraderTab="";activeTab="";ValidateCurrentLocation=function(){var n=getCookie("CurrentLocationManage");currentTraderTab=getTabTrader().TraderTab;n===null||n==="0"||n===0?UpdateCurrentLocationManage(currentTraderTab?currentTraderTab:""):currentTraderTab&&currentTraderTab!==""?($("#mobile-tab-active").val(currentTraderTab.toLowerCase()),UpdateMenuActive(),GetContentMobile(currentTraderTab.toLowerCase())):ShowContent()};UpdateCurrentLocationManage=function(n){var t,i;n||(t=getTabTrader().TraderTab,n=t?t:"Sale");window.location.href.indexOf("Trader/ItemsProducts")>0&&UpdateTab();i=$("#local-manage-select").val();$.ajax({type:"get",url:"/Trader/UpdateCurrentLocationManage?id="+i,dataType:"json",success:function(){$("div.app_topnav.restyle").load("/Trader/NavigationTraderPartial",function(){if(n==="sale")$('#menu_traderapp a[href="#AppTrader"]').click();else{var t=$('#menu_traderapp a[href="#'+n+'"]');t.length>0?t.click():$('#menu_traderapp a[href="#AppTrader"]').click()}})},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles");LoadingOverlayEnd()}})};ShowContent=function(n){$("#local-manage-div").show();var t=window.location.href;n?(t=$(n).attr("href"),t=t.substr(t.indexOf("#")+1,t.length)):t.indexOf("#")>=0&&(t=t.substr(t.indexOf("#")+1,t.length));t&&(t=t.split("#"));currentTraderTab=t[0];setValueSelected(currentTraderTab);UpdateMenuActive(n);switch(currentTraderTab.toLocaleLowerCase()){case"apptrader":ShowSaleContent();break;case"purchases":ShowPurchaseContent();break;case"transfers":ShowTransfersContent();break;case"contacts":ShowContactContent();break;case"cashbank":ShowCashBankContent();break;case"itemsproducts":ShowItemProductContent();break;case"budget":ShowBudgetContent();break;case"reports":ShowReportsContent();break;case"config":ShowConfigContent();break;case"manufacturing":ShowManufacturingContent();break;case"pointofsale":ShowPointOfSaleContent();break;case"shiftmanagement":ShowShiftManagementContent();break;case"orderdisplaysystem":ShowOrderDisplaySystemContent();break;case"system":ShowAdminSystems();break;case"domains":ShowAdminDomains();break;case"bankmatetrans":ShowAdminBankmatetrans();break;case"datarecovery":ShowAdminDataRecovery();break;case"accountstatement":ShowAdminAccountStatement();break;case"adminskills":ShowAdminSkills();break;case"saleschannels":ShowChannelsContent();break;case"hlsetup":ShowHLSetupContent();break;case"communityfeature":ShowAdminCommunityFeatureContent();break;case"domainrequest":ShowAdminDomainRequest();break;case"waitlistrequest":ShowAdminWaitlistRequest();break;case"extensionrequest":ShowAdminExtensionRequest();break;case"monibackpromotion":ShowAdminMonibackPromotionTabContent();break;case"bulkdeal":ShowBulkDealTabContent();break;default:ShowSaleContent()}};UpdateTab=function(){activeTab==="pricebook-tab"?(SelectPriceBookTab(),$('a[href="#'+activeTab+'"]').tab("show")):activeTab==="adjuststock-tab"?(SelectAdjustStockTab(),$('a[href="#'+activeTab+'"]').tab("show")):activeTab==="waste-report-tab"?($('a[href="#adjuststock-tab"]').tab("show"),SelectAdjustStockWasteTab()):activeTab==="inventoryaudit-tab"?(SelectInventoryAuditTab(),$('a[href="#'+activeTab+'"]').tab("show")):(isChangeItem=!0,selectTraderItemsTab())};ShowSaleContent=function(){document.title="Trader > Sales";setTabTrader(currentTraderTab);$("#trader-sale-content").empty();$("#trader_content").load("/Trader/TraderSaleTab",function(){UpdateTitle()})};ShowPurchaseContent=function(){document.title="Trader > Purchases";setTabTrader(currentTraderTab);$("#trader_content").load("/Trader/TraderPurchasesTab",function(){UpdateTitle()})};ShowTransfersContent=function(){document.title="Trader > Transfers";setTabTrader(currentTraderTab);$("#trader_content").load("/Trader/TransfersTab",function(){UpdateTitle()})};ShowContactContent=function(){document.title="Trader > Contacts";setTabTrader(currentTraderTab);$("#trader_content").load("/Trader/ContactTab",function(){})};ShowCashBankContent=function(){document.title="Trader > Cash & Bank";setTabTrader(currentTraderTab);$("#trader_content").load("/Trader/CashBankTab",function(){UpdateTitle()})};ShowItemProductContent=function(){document.title="Trader > Items & Products";setTabTrader(currentTraderTab);$("#trader_content").load("/Trader/ItemsProductsTab",function(){UpdateTitle()})};ShowManufacturingContent=function(){document.title="Trader > Manufacturing";setTabTrader(currentTraderTab);$("#trader_content").load("/Trader/ManufacturingTab",function(){UpdateTitle()})};ShowBudgetContent=function(){document.title="Trader > Budget";setTabTrader(currentTraderTab);$("#trader_content").load("/Trader/BudgetTab",function(){var n=getTabTrader().SubTraderTab;n==="scenario"&&($(".budget-tab li").removeClass("active"),$("#budget-groups").removeClass("active"),$(".budget-scenario-li").addClass("active"),$("#budget-scenarios").addClass("in active"),localStorage.removeItem("SubTraderTab"));UpdateTitle()})};ShowReportsContent=function(){document.title="Trader > Reports";setTabTrader(currentTraderTab);$("#trader_content").load("/Trader/ReportsTab",function(){UpdateTitle()})};ShowPointOfSaleContent=function(){document.title="Trader > Devices";setTabTrader(currentTraderTab);$("#trader_content").load("/Trader/DeviceTab",function(){UpdateTitle()})};ShowSalesChannelContent=function(){document.title="Trader > Sales Channels";setTabTrader(currentTraderTab);$("#trader_content").load("/Trader/SalesChannelTab",function(){UpdateTitle()})};ShowShiftManagementContent=function(){document.title="Trader > ShiftManagement";setTabTrader(currentTraderTab);$("#trader_content").load("/Trader/ShiftManagementTab",function(){UpdateTitle()})};ShowOrderDisplaySystemContent=function(){setTabTrader(currentTraderTab);$("#trader_content").load("/Trader/OrderDisplaySystemTab",function(){UpdateTitle()})};ShowChannelsContent=function(){setTabTrader(currentTraderTab);$("#trader_content").load("/Trader/ChannelsTab",function(){UpdateTitle()})};ShowConfigContent=function(){document.title="Trader > App Configuration";$("#local-manage-div").hide();setTabTrader(currentTraderTab);$("#trader_content").load("/Trader/ConfigTab",function(){UpdateTitle()})};ShowAdminSystems=function(){document.title="Administration - System";setTabTrader(currentTraderTab);$("#administration-content").load("/Administration/AdminSystemsTab",function(){})};ShowAdminDomainRequest=function(){document.title="Administration - Domain Request";setTabTrader(currentTraderTab);$("#administration-content").load("/Administration/AdminDomainRequestTab",function(){})};ShowAdminWaitlistRequest=function(){document.title="Administration - Waitlist";setTabTrader(currentTraderTab);$("#administration-content").load("/Administration/AdminWaitlistRequestTab",function(){})};ShowAdminExtensionRequest=function(){document.title="Administration - Extension Request";setTabTrader(currentTraderTab);$("#administration-content").load("/Administration/AdminExtensionRequestTabContent",function(){})};ShowAdminCommunityFeatureContent=function(){document.title="Administration - Community Features";setTabTrader(currentTraderTab);$("#administration-content").load("/Administration/AdminCommunityFeatureTabContent",function(){})};ShowAdminMonibackPromotionTabContent=function(){document.title="Administration - Moniback Promotions";setTabTrader(currentTraderTab);$("#administration-content").load("/Administration/AdminMonibackPromotionTabContent",function(){})};ShowBulkDealTabContent=function(){document.title="Administration - Bulk Deal";setTabTrader(currentTraderTab);$("#administration-content").load("/Administration/BulkDealTabContent",{},function(){})};ShowHLSetupContent=function(){document.title="Administration - Categories & lists";setTabTrader(currentTraderTab);$("#administration-content").load("/Administration/AdminHighlightSetup",function(){})};ShowAdminBankmatetrans=function(){document.title="Administration - Bankmate transactions";setTabTrader(currentTraderTab);$("#administration-content").load("/Administration/AdminBankmatetransTab",function(){})};ShowAdminDataRecovery=function(){setTabTrader(currentTraderTab);$("#administration-content").load("/Administration/AdminDataRecoveryTab",function(){})};ShowAdminAccountStatement=function(){setTabTrader(currentTraderTab);$("#administration-content").load("/Administration/AdminAccountStatementTab",function(){})};ShowAdminSkills=function(){setTabTrader(currentTraderTab);$("#administration-content").load("/Administration/AdminSkillsTab",function(){})};CheckStatus=function(n,t){var i=new $.Deferred;return $.ajax({type:"get",url:"/Trader/CheckStatusTrader?type="+t+"&id="+n,"async":!1,contentType:!1,processData:!1,dataType:"json",success:function(n){n.result===!0?i.resolve(n):(n.actionVal===3||n.actionVal===2)&&i.resolve(n)},error:function(){i.resolve("")}}),i.promise()};CheckStatusApproval=function(n){var t=new $.Deferred;return $.ajax({type:"GET",url:"/Trader/CheckStatusApprovalReq",data:{appId:n},dataType:"json",success:function(n){n.result===!0?t.resolve(n):(n.actionVal===3||n.actionVal===2)&&t.resolve(n)},error:function(){t.resolve("")}}),t.promise()};$(document).ajaxError(function(n,t){t.status===405?(cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles"),setTimeout(function(){location.reload()},3e3)):t.status===401&&location.reload()});$(document).ready(function(){for(var t=$(".modal"),n=0;n<t.length;++n)if($(t[n]).hasClass("fade"))$("#"+$(t[n]).attr("id")).on("show.bs.modal",function(){var n=$(this).data("bs.modal").options;n.backdrop=$(this).data("backdrop")!="static"?!0:"static";n.keyboard=!0;n.focus="input:first"})});String.prototype.format=function(n){var t=this;return t.replace(String.prototype.format.regex,function(t){var i=parseInt(t.substring(1,t.length-1));return i>=0?n[i]:i===-1?"{":i===-2?"}":""})};String.prototype.format.regex=new RegExp("{-?[0-9]+}","g");itemOverViewFilter={GroupIds:[],Types:[],Brands:[],Needs:[],Rating:[],Tags:[]};jQuery(document).ready(function(){$(".validate-control select").on("change",function(){$(this).val()&&$(this).next()[0].localName==="label"&&$($(this).next()).hasClass("error")?$(this).next().remove():$(this).val()&&$(this).next()[0].localName==="span"&&$(this).next().next().remove()})});$(function(){setInterval(function(){$.get("/Domain/HeartBeat")},24e4)});var loadCountPost=1,loadCountMedia=1,busycomment=!1;