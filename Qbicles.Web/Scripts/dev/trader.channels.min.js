function reloadDefaultTopic(n){var t=$("#wg-qbicle").val();$("#wg-topic").empty();$.getJSON("/Operator/GetTopicByQbicle",{qbicleId:t?t:0,currentTopicId:n},function(n){$("#wg-topic").select2({placeholder:"Select a state",data:n});firstload&&$("#wg-topic").trigger("change");firstload=!0})}function loadModalPriceList(n){$b2bModals.$modal_pricelist.empty();$b2bModals.$modal_pricelist.modal("show");$b2bModals.$modal_pricelist.load("/TraderChannels/LoadModalPriceList?id="+n,function(){var n=$("#frmb2bpricelist");n.validate({rules:{Name:{required:!0,minlength:3,maxlength:150},Icon:{filesize:!0},Summary:{required:!0,minlength:3,maxlength:500}}});n.submit(function(t){if((t.preventDefault(),!isBusy)&&n.valid()){$.LoadingOverlay("show");var i=document.getElementById("b2b-price-icon-input").files;i.length>0?UploadMediaS3ClientSide("b2b-price-icon-input").then(function(n){if(n.objectKey==="no_image"||n.objectKey==="no-image"){LoadingOverlayEnd("hide");cleanBookNotification.error(_L("ERROR_MSG_S3_UPLOAD"),"Qbicles");return}$("#b2b-price-icon-object-key").val(n.objectKey);$("#b2b-price-icon-object-name").val(n.fileName);$("#b2b-price-icon-object-size").val(n.fileSize);SaveB2bPriceList()}):($("#b2b-price-icon-object-key").val(""),$("#b2b-price-icon-object-name").val(""),$("#b2b-price-icon-object-size").val(""),SaveB2bPriceList())}})})}function SaveB2bPriceList(){var n=new FormData($("#frmb2bpricelist")[0]);$.ajax({type:"post",cache:!1,url:"/TraderChannels/SavePriceList",enctype:"multipart/form-data",data:n,processData:!1,contentType:!1,beforeSend:function(){isBusy=!0},success:function(n){n.result?($b2bModals.$modal_pricelist.modal("hide"),loadContentPriceList(),cleanBookNotification.success(_L("UPDATE_MSG_SUCCESS"),"Trader")):!n.result&&n.msg?cleanBookNotification.error(n.msg,"Trader"):cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Trader");isBusy=!1;LoadingOverlayEnd()},error:function(){isBusy=!1;cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Trader");LoadingOverlayEnd()}})}function loadModalDeliveryChargeFramework(n,t){$b2bModals.$modal_deliverychargeframework.empty();$b2bModals.$modal_deliverychargeframework.modal("show");$b2bModals.$modal_deliverychargeframework.load("/TraderChannels/LoadModalDeliveryChargeFramework?",{priceListId:t,id:n},function(){var n=$("#frmChargeFramework");n.validate({rules:{Name:{required:!0,minlength:3,maxlength:150},DistanceTravelledFlatFee:{required:!0},DistanceTravelPerKm:{required:!0},TimeTakenFlatFee:{required:!0},TimeTakenPerSecond:{required:!0},ValueOfDeliveryFlatFee:{required:!0},ValueOfDeliveryPercentTotal:{required:!0,min:0,max:100}}});n.submit(function(i){(i.preventDefault(),isBusy)||n.valid()&&($.LoadingOverlay("show"),$.ajax({type:this.method,cache:!1,url:this.action,data:$(this).serialize(),dataType:"json",beforeSend:function(){isBusy=!0},success:function(n){n.result?($b2bModals.$modal_deliverychargeframework.modal("hide"),loadContentChargeFramework(t),cleanBookNotification.success(_L("UPDATE_MSG_SUCCESS"),"Trader")):!n.result&&n.msg?cleanBookNotification.error(n.msg,"Trader"):cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Trader");isBusy=!1;LoadingOverlayEnd()},error:function(){isBusy=!1;cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Trader");LoadingOverlayEnd()}}))});initSelect2avatarDelivery()})}function initSelect2avatarDelivery(){$(".select2avatar-delivery").select2({placeholder:"Please select",templateResult:formatOptions2,templateSelection:formatSelected2})}function searchDeliveryDrivers(){var n=$("#txtmembersearch").val();$(".contact-list-found").LoadingOverlay("show");$(".contact-list-found").load("/TraderChannels/LoadModalDeliveryDriver",{keyword:n},function(){$(".existing-member").show();$(".contact-list-found").LoadingOverlay("hide")})}function loadModalDeliveryVehicle(n){$b2bModals.$modal_deliveryvehicle.empty();$b2bModals.$modal_deliveryvehicle.modal("show");$b2bModals.$modal_deliveryvehicle.load("/TraderChannels/LoadModalDeliveryVehicle?id="+n,function(){var n=$("#frmVehicle");n.validate({rules:{Name:{required:!0,minlength:3,maxlength:150},RefOrRegistration:{required:!0,maxlength:50}}});n.submit(function(t){(t.preventDefault(),isBusy)||n.valid()&&($.LoadingOverlay("show"),$.ajax({type:this.method,cache:!1,url:this.action,data:$(this).serialize(),dataType:"json",beforeSend:function(){isBusy=!0},success:function(n){n.result?($b2bModals.$modal_deliveryvehicle.modal("hide"),reloadTableVehicles(),cleanBookNotification.success(_L("UPDATE_MSG_SUCCESS"),"Trader")):!n.result&&n.msg?cleanBookNotification.error(n.msg,"Trader"):cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Trader");isBusy=!1;LoadingOverlayEnd()},error:function(){isBusy=!1;cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Trader");LoadingOverlayEnd()}}))});initSelect2avatarDelivery()})}function loadContentPriceList(){$b2bcontent.$content_pricelist.empty();$b2bcontent.$content_pricelist.LoadingOverlay("show");$b2bcontent.$content_pricelist.load("/TraderChannels/LoadContentPriceList",{keyword:$("#txtplkeyword").val()},function(){$b2bcontent.$content_pricelist.LoadingOverlay("hide")})}function loadContentChargeFramework(n){$(".pricelists").hide();$("#framework-1").fadeIn();$b2bcontent.$content_framework.empty();$b2bcontent.$content_framework.LoadingOverlay("show");$b2bcontent.$content_framework.load("/TraderChannels/LoadContentChargeFramework",{priceId:n},function(){$b2bcontent.$content_framework.LoadingOverlay("hide")})}function formatOptions2(n){if(!n.id)return n.text;return $('<div class="select2imgwrap"><div class="select2img" style="background-image: url(\''+$(n.element).data("iconurl")+'\');"><\/div> <span class="select2text">'+n.text+"<\/span><\/div>")}function formatSelected2(n){if(!n.id)return n.text;return $('<div class="select2imgwrap"><div class="select2img mini" style="background-image: url(\''+$(n.element).data("iconurl")+'\');"><\/div> <span class="select2text">'+n.text+"<\/span><\/div>")}function deletePriceList(n){bootbox.confirm({show:!0,backdrop:!0,closeButton:!0,animate:!0,title:"Trader",message:_L("ERROR_MSG_708"),callback:function(t){if(t){$.post("/TraderChannels/DeletePriceList",{id:n},function(n){n.result?loadContentPriceList():!n.result&&n.msg?cleanBookNotification.error(n.msg,"Trader"):cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Trader")});return}}})}function deleteChargeFramework(n){bootbox.confirm({show:!0,backdrop:!0,closeButton:!0,animate:!0,title:"Trader",message:_L("ERROR_MSG_708"),callback:function(t){if(t){$.post("/TraderChannels/DeleteChargeFramework",{id:n},function(n){n.result?loadContentChargeFramework($("#hdfPriceListId").val()):!n.result&&n.msg?cleanBookNotification.error(n.msg,"Trader"):cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Trader")});return}}})}function initDataTable(){$b2btables.$table_vehicle.on("processing.dt",function(n,t,i){$("#processingIndicator").css("display","none");i?$("#logistics-vehicles").LoadingOverlay("show"):$("#logistics-vehicles").LoadingOverlay("hide",!0)}).dataTable({destroy:!0,serverSide:!0,paging:!0,searching:!1,deferLoading:30,order:[[0,"asc"]],ajax:{url:"/TraderChannels/SearchVehicles",data:function(n){return $.extend({},n,{keyword:$("#txtvehiclekeyword").val()})}},columns:[{title:"Vehicle type",data:"VehicleType",searchable:!0,orderable:!0},{title:"Name",data:"Name",searchable:!0,orderable:!0},{title:"Reference or registration",data:"RefOrRegistration",searchable:!0,orderable:!0},{title:"Options",data:"Id",searchable:!0,orderable:!1,render:function(n){var t='<div class="btn-group"><button class="btn btn-primary" data-toggle="dropdown"><i class="fa fa-cog"><\/i><\/button>';return t+='<ul class="dropdown-menu dropdown-menu-right primary">',t+='<li><a href="#" onclick="loadModalDeliveryVehicle('+n+')">Edit<\/a><\/li>',t+='<li><a href="#" onclick="deleteVehicle('+n+')">Delete<\/a><\/li>',t+"<\/ul><\/div>"}}]});$b2btables.$table_drivers.on("processing.dt",function(n,t,i){$("#processingIndicator").css("display","none");i?$("#logistics-drivers").LoadingOverlay("show"):$("#logistics-drivers").LoadingOverlay("hide",!0)}).dataTable({destroy:!0,serverSide:!0,paging:!0,searching:!1,deferLoading:30,order:[[0,"asc"]],ajax:{url:"/TraderChannels/SearchDrivers",data:function(n){return $.extend({},n,{keyword:$("#txtSearchDriver").val()})}},columns:[{title:"Driver",data:"Driver",searchable:!0,orderable:!0,render:function(n,t,i){var r='<a href="#"><div class="table-avatar mini pull-left" style="background-image: url(\''+i.DriverIcon+"');\"><\/div>";return r+='<div class="avatar-name pull-left" style="color: #333; line-height: 4; padding-left: 15px;">'+n+"<\/div>",r+'<div class="clearfix"><\/div><\/a>'}},{title:"Email",data:"Email",searchable:!0,orderable:!0,render:function(n){return'<a href="mailto:'+n+'">'+n+"<\/a>"}},{title:"Verhicle",data:"VehicleId",searchable:!0,orderable:!1,render:function(n,t,i){var r='<select name="vehicle" onchange="updateVehicleDriver('+i.Id+',this)" class="form-control select2 dt-select2" style="width: 100%;">';return r+="<option><\/option>",dataVehicles.forEach(function(t){r+='<optgroup label="'+fixQuoteCode(t.GroupName)+'">';t.Items&&t.Items.forEach(function(t){r+='<option value="'+t.Id+'" '+(t.Id==n?"selected":"")+">"+fixQuoteCode(t.Text)+"<\/option>"});r+="<\/optgroup>"}),r+="<\/select>"}},{title:"Status",data:"Status",searchable:!0,orderable:!0,render:function(n){var t='<label class="label label-lg label-success">Active<\/label>';return n!=1&&(t='<label class="label label-lg label-warning">Off duty<\/label>'),t}},{title:"Options",data:"Id",searchable:!0,orderable:!1,render:function(n,t,i){var r='<div class="btn-group"><button class="btn btn-primary" data-toggle="dropdown" aria-expanded="false"><i class="fa fa-cog"><\/i><\/button>';return r+='<ul class="dropdown-menu dropdown-menu-right primary">',r+=i.Status==1?'<li><a href="#" onclick="setOnOffDuty('+n+',2)">Set off duty<\/a><\/li>':'<li><a href="#" onclick="setOnOffDuty('+n+',1)">Set on duty<\/a><\/li>',r+='<li><a href="#" onclick="loadModalLocationChange('+n+')">Change location<\/a><\/li>',r+='<li><a href="#" onclick="deleteDriver('+n+')">Delete<\/a><\/li>',r+"<\/ul><\/div>"}}],drawCallback:function(){$(".dt-select2").select2({placeholder:"Please select"})}})}function reloadTableVehicles(){setTimeout(function(){$b2btables.$table_vehicle.DataTable().ajax.reload()},100);loadVehicles()}function reloadTableDrivers(){setTimeout(function(){$b2btables.$table_drivers.DataTable().ajax.reload()},100)}function loadVehicles(){$.get("/TraderChannels/GetVehiclesForSelect2",function(n){dataVehicles=n})}function deleteVehicle(n){bootbox.confirm({show:!0,backdrop:!0,closeButton:!0,animate:!0,title:"Trader",message:_L("ERROR_MSG_708"),callback:function(t){if(t){$.post("/TraderChannels/DeleteVehicle",{id:n},function(n){n.result?reloadTableVehicles():!n.result&&n.msg?cleanBookNotification.error(n.msg,"Trader"):cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Trader")});return}}})}function deleteDriver(n){bootbox.confirm({show:!0,backdrop:!0,closeButton:!0,animate:!0,title:"Trader",message:_L("ERROR_MSG_708"),callback:function(t){if(t){$.post("/TraderChannels/DeleteDriver",{id:n},function(n){n.result?reloadTableDrivers():!n.result&&n.msg?cleanBookNotification.error(_L(n.msg),"Trader"):cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Trader")});return}}})}function setOnOffDuty(n,t){$.post("/TraderChannels/UpdateStatusDriver",{id:n,status:t},function(n){n.result?reloadTableDrivers():!n.result&&n.msg?cleanBookNotification.error(n.msg,"Trader"):cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Trader")})}function loadModalLocationChange(n){$b2bModals.$modal_driverclocationchange.empty();$b2bModals.$modal_driverclocationchange.modal("show");$b2bModals.$modal_driverclocationchange.load("/TraderChannels/LoadModalLocationChange?driverId="+n,function(){var n=$("#frmLocationchange");n.submit(function(n){(n.preventDefault(),isBusy)||($.LoadingOverlay("show"),$.ajax({type:this.method,cache:!1,url:this.action,data:$(this).serialize(),dataType:"json",beforeSend:function(){isBusy=!0},success:function(n){n.result?($b2bModals.$modal_driverclocationchange.modal("hide"),reloadTableDrivers(),cleanBookNotification.success(_L("UPDATE_MSG_SUCCESS"),"Trader")):!n.result&&n.msg?cleanBookNotification.error(n.msg,"Trader"):cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Trader");isBusy=!1;LoadingOverlayEnd()},error:function(){isBusy=!1;cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Trader");LoadingOverlayEnd()}}))});$("#frmLocationchange .select2").select2()})}function updateVehicleDriver(n,t){$.post("/TraderChannels/UpdateVehicleDriver",{id:n,vehicleId:$(t).val()},function(n){n.result?cleanBookNotification.success(_L("UPDATE_MSG_SUCCESS"),"Trader"):!n.result&&n.msg?cleanBookNotification.error(n.msg,"Trader"):cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Trader")})}function saveMember(){$.LoadingOverlay("show");$.post("/TraderChannels/AddDriver",{posUId:$("#hdfPosUid").val(),accountId:$("#hdfAccountId").val(),locationId:$("#slLocationIdForDriver").val(),driverUserId:$("#hdfUserid").val()},function(n){n.result?($b2bModals.$modal_deliverydriveradd.modal("hide"),reloadTableDrivers(),$("#lnkBackSearch").click(),$("#txtmembersearch").val(""),$(".contact-list-found").empty(),cleanBookNotification.success(_L("UPDATE_MSG_SUCCESS"),"Trader")):!n.result&&n.msg?cleanBookNotification.error(n.msg,"Trader"):cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Trader");LoadingOverlayEnd()})}function loadContentMemberDetail(n){$b2bcontent.$content_contactadd.empty();$b2bcontent.$content_contactadd.LoadingOverlay("show");$b2bcontent.$content_contactadd.load("/TraderChannels/LoadContentMemberDetail?posUId="+n,function(){$b2bcontent.$content_contactadd.LoadingOverlay("hide");$(".contact-list-found").hide();$(".contact-invite").hide();$(".contact-add").hide();$(".contact-add").fadeIn()})}function loadContentItemInfo(){var t=$("#select-traderitems").val(),n;t&&(n=$("#item-info"),n.empty(),n.LoadingOverlay("show"),n.load("/TraderChannels/LoadContentItemInfo?itemId="+t,function(){$("#tbliteminfo").DataTable();n.LoadingOverlay("hide")}))}function saveDeliverySettings(n){$.LoadingOverlay("show");var t={Id:0,DeliveryService:{Id:n}};$.post("/TraderChannels/SaveDeliverySettings",{settings:t},function(n){n.result?cleanBookNotification.success(_L("UPDATE_MSG_SUCCESS"),"Trader"):!n.result&&n.msg?cleanBookNotification.error(n.msg,"Trader"):cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Trader");LoadingOverlayEnd()})}function initPriceCloneCurrentLocation(n,t){$("#frmPriceListCLocationClone input[name=cloneId]").val(n);$("#frmPriceListCLocationClone input[name=cloneName]").val(t);$b2bModals.$modal_chargeframeworkclone.modal("show")}function initFormClonePriceList(){var n=$("#frmPriceListCLocationClone");n.validate({rules:{cloneName:{required:!0,minlength:3,maxlength:150}}});n.submit(function(t){(t.preventDefault(),isBusy)||n.valid()&&($.LoadingOverlay("show"),$.ajax({type:this.method,cache:!1,url:this.action,data:$(this).serialize(),dataType:"json",beforeSend:function(){isBusy=!0},success:function(n){n.result?($b2bModals.$modal_chargeframeworkclone.modal("hide"),loadContentPriceList(),cleanBookNotification.success(_L("UPDATE_MSG_SUCCESS"),"Trader")):!n.result&&n.msg?cleanBookNotification.error(n.msg,"Trader"):cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Trader");isBusy=!1;LoadingOverlayEnd()},error:function(){isBusy=!1;cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Trader");LoadingOverlayEnd()}}))})}function initFormCloneOtherLocationPriceList(){var n=$("#frmPriceListOtherLocationClone");n.validate({rules:{cloneName:{required:!0,minlength:3,maxlength:150},locationId:{required:!0}}});n.submit(function(t){(t.preventDefault(),isBusy)||n.valid()&&($.LoadingOverlay("show"),$.ajax({type:this.method,cache:!1,url:this.action,data:$(this).serialize(),dataType:"json",beforeSend:function(){isBusy=!0},success:function(n){n.result?($b2bModals.$modal_chargeframeworkport.modal("hide"),loadContentPriceList(),cleanBookNotification.success(_L("UPDATE_MSG_SUCCESS"),"Trader")):!n.result&&n.msg?cleanBookNotification.error(n.msg,"Trader"):cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Trader");isBusy=!1;LoadingOverlayEnd()},error:function(){isBusy=!1;cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Trader");LoadingOverlayEnd()}}))})}function loadModalLocationChange(n){$b2bModals.$modal_chargeframeworkport.empty();$b2bModals.$modal_chargeframeworkport.modal("show");$b2bModals.$modal_chargeframeworkport.load("/TraderChannels/LoadModalChargeFrameworkPort?priceId="+n,function(){initFormCloneOtherLocationPriceList();$("#frmPriceListOtherLocationClone .select2").select2()})}function initSelectedAccount(){}function selectAccount(n,t){var i=$(".accountid-"+t).data("name");$(".selectaccount").removeClass("selectaccount");$(n).addClass("selectaccount");$("#hdfAccountId").val(t);BKAccount.Id=t;BKAccount.Name=i;$("#hdfAccountId").val(t);closeSelected();$("#app-bookkeeping-treeview").modal("hide")}function closeSelected(){BKAccount.Id?($(".accountInfo").empty(),$(".accountInfo").append(BKAccount.Name)):$(".accountInfo").empty();$(".accountInfo").text().length>0?($(".addbtnaccount").attr("style","display:none;"),$(".editbtnaccount").removeAttr("style")):$(".accountInfo").text().length===0&&($(".editbtnaccount").attr("style","display:none;"),$(".addbtnaccount").removeAttr("style"))}function saveB2BConfig(){var n={Services:$("#slB2BServices").val(),SourceQbicleId:$("#wg-qbicle").val(),DefaultTopicId:$("#wg-topic").val(),SettingOrder:$("#b2b-order").val(),LocationId:$("#local-manage-select").val()};$.post("/TraderChannels/SaveB2BConfig",n,function(t){t.result?($("#wg-topic").data("topic",n.DefaultTopicId),cleanBookNotification.success(_L("UPDATE_MSG_SUCCESS"),"Trader"),n.Services&&n.Services.indexOf("Logistics")>=0?$("#tabB2bConfig li.b2b-logistics").show():$("#tabB2bConfig li.b2b-logistics").hide(),n.Services&&n.Services.indexOf("Maintenance")>=0?$("#tabB2bConfig li.b2b-maintenance").show():$("#tabB2bConfig li.b2b-maintenance").hide()):cleanBookNotification.error(t.msg,"Trader")})}function saveB2CConfig(){var n={SettingOrder:$("#b2c-order").val(),LocationId:$("#local-manage-select").val(),DefaultSaleWorkGroupId:$("#wgsaledefault").val(),DefaultInvoiceWorkGroupId:$("#wginvoicedefault").val(),DefaultPaymentAccountId:$("#b2ccashbankaccount").val(),DefaultTransferWorkGroupId:$("#wgtransferdetault").val(),DefaultPaymentWorkGroupId:$("#wgpaymentdefault").val()};$.post("/TraderChannels/SaveB2CConfig",n,function(t){t.result?(cleanBookNotification.success(_L("UPDATE_MSG_SUCCESS"),"Trader"),$("#wg-topic").data("topic",n.DefaultTopicId)):cleanBookNotification.error(t.msg,"Trader")})}function LocationChange(){var n=$("#local-manage-select").val();$.getJSON("/SalesChannels/LoadB2C_WG_AC_ST_Default",{locationId:n},function(n){$("#b2c_order").empty();$("#wgsaledefault").empty();$("#wginvoicedefault").empty();$("#wgpaymentdefault").empty();$("#wgtransferdetault").empty();$("#b2ccashbankaccount").empty();n.B2cOrderStatus.unshift({id:"",text:""});$("#b2c_order").select2({placeholder:"Select a state",data:n.B2cOrderStatus});n.SaleWorkgroups.unshift({id:"",text:""});$("#wgsaledefault").select2({placeholder:"Choice a workgroup",data:n.SaleWorkgroups});n.InvoiceWorkgroups.unshift({id:"",text:""});$("#wginvoicedefault").select2({placeholder:"Choice a workgroup",data:n.InvoiceWorkgroups});n.PaymentWorkgroups.unshift({id:"",text:""});$("#wgpaymentdefault").select2({placeholder:"Choice a workgroup",data:n.PaymentWorkgroups});n.PaymentWorkgroups.unshift({id:"",text:""});$("#wgtransferdetault").select2({placeholder:"Choice a workgroup",data:n.TransferWorkgroups});n.PaymentAccounts.unshift({id:"",text:""});$("#b2ccashbankaccount").select2({placeholder:"Choice an account",data:n.PaymentAccounts})})}var firstload=!1,isBusy=!1,$b2bModals={$modal_pricelist:$("#delivery-charge-pricelist-add"),$modal_deliverychargeframework:$("#delivery-charge-framework-add"),$modal_deliveryvehicle:$("#delivery-vehicle-add"),$modal_driverclocationchange:$("#b2b-driver-location-change"),$modal_deliverydriveradd:$("#delivery-driver-add"),$modal_chargeframeworkclone:$("#b2b-charge-framework-clone"),$modal_chargeframeworkport:$("#b2b-charge-framework-port")},$b2bcontent={$content_pricelist:$("#b2b-charges-content"),$content_framework:$("#framework-1"),$content_contactadd:$(".contact-add")},$b2btables={$table_vehicle:$("#tblvehicles"),$table_drivers:$("#tbldrivers")},dataVehicles=[],BKAccount={Id:0,Name:""};$(document).ready(function(){$("div.channel .select2").select2({placeholder:"Please select"});$(".checkmulti").multiselect({includeSelectAllOption:!1,enableFiltering:!1,buttonWidth:"100%",maxHeight:400,enableClickableOptGroups:!0});initDataTable();$("#txtplkeyword").keyup(delay(function(){loadContentPriceList()},400));$("#txtvehiclekeyword").keyup(delay(function(){reloadTableVehicles()},400));$("#txtmembersearch").keyup(delay(function(){searchDeliveryDrivers()},400));$("#txtSearchDriver").keyup(delay(function(){reloadTableDrivers()},400));loadVehicles();initFormClonePriceList();$("#select-traderitems").select2({ajax:{url:"/TraderItem/Select2TraderItemsByLocationId",delay:250,data:function(n){return{keyword:n.term,page:n.page||1}},cache:!0},minimumInputLength:1})});BackToAllChannels=function(){$(".channels").show();$(".sale_channel_content").hide();$(".sale_channel_content_detail").empty()};ShowSalesChannelsContent=function(n){$(".sale_channel_content_detail").LoadingOverlay("show");setCookie("CurrentLocationManage",$("#local-manage-select").val());$(".channels").hide();$(".sale_channel_content_detail").empty();var t="/SalesChannels/SalesChannelB2BContent";switch(n){case"channel_b2b":t="/SalesChannels/SalesChannelB2BContent";break;case"channel_b2c":t="/SalesChannels/SalesChannelB2CContent";break;case"channel_pos":t="/PointOfSale/PointOfSaleContent?value=GeneralChannel"}$(".sale_channel_content_detail").load(t,function(){$(".sale_channel_content_detail").LoadingOverlay("hide");$(".sale_channel_content").show()})};