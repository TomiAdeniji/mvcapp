function UpdateStatusApproval(n){$.LoadingOverlay("show");$.ajax({url:"/Qbicles/SetRequestStatusForApprovalRequest",type:"GET",dataType:"json",data:{appKey:n,status:$("#action_approval").val()},success:function(n){n.actionVal>0?RenderContentUpdated():cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}}).always(function(){LoadingOverlayEnd()})}function RenderContentUpdated(){LoadingOverlay();$("#invoice_content").empty();$("#invoice_content").load("/TraderInvoices/InvoiceReviewContent?key="+$invoiceKey,function(){LoadingOverlayEnd();cleanBookNotification.updateSuccess()})}function OnFocusOutControl(n){strValueChanged=n;strValueChanged!==strValueOld&&UpdateInvoiceReview()}function OnFocusControl(n){strValueOld=n}function UpdateInvoiceReview(){$.LoadingOverlay("show");CheckStatus($("#invoice-id").val(),"Invoice").then(function(n){var t,i;LoadingOverlayEnd();n.result&&n.Object=="PendingReview"?($.LoadingOverlay("show"),dueDateChanged===""&&(t=moment($("#invoice-duedate").val(),"DD/MM/YYYY"),dueDateChanged=moment(t).format("MM/DD/YYYY")),i={Key:$("#invoice-key").val(),DueDate:dueDateChanged,InvoiceAddress:$("#invoice-invoiceaddress").val(),PaymentDetails:$("#invoice-paymentdetails").val()},$.ajax({url:"/TraderInvoices/UpdateInvoiceReview",type:"POST",dataType:"json",data:{invoice:i},success:function(n){n.result?cleanBookNotification.updateSuccess():cleanBookNotification.UpdateFail();setTimeout(function(){$.LoadingOverlay("hide")},500)},error:function(n){$.LoadingOverlay("hide");Console.log(n);cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}})):n.result&&n.Object!="PendingReview"?cleanBookNotification.error(_L("ERROR_MSG_272"),"Qbicles"):n.result==!1&&cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")})}var $invoiceKey=$("#invoice-key").val(),dueDateOld="",dueDateChanged="",strValueOld,strValueChanged;$("#invoice-duedate").on("show.daterangepicker",function(n,t){dueDateOld=t.startDate.format("YYYY-MM-DD")});$("#invoice-duedate").on("apply.daterangepicker",function(n,t){dueDateChanged=t.startDate.format("YYYY-MM-DD");dueDateOld!==dueDateChanged&&UpdateInvoiceReview()});strValueOld="";strValueChanged="";