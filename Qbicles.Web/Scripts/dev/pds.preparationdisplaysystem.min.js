function SavePrepDisplayDevice(){var i=$("#pds-admin").val(),t,u,f,e,s;if(i===null||typeof i=="undefined"){cleanBookNotification.error("PDS required least one Administrator!","Qbicles");return}if(t=$("#device-user").val(),t===null||typeof t=="undefined"){cleanBookNotification.error("PDS required least one User!","Qbicles");return}if($("#pds-name").val()===""){$("#pds-form").validate().showErrors({pdsname:"This field is required."});return}$.LoadingOverlay("show");var n=$("#pds-id").val(),o=$("#pds-assocsets").val(),r={Id:n,Name:$("#pds-name").val(),Queue:{Id:$("#pds-queue").val()},Type:{Id:$("#ods-device-type").val()},Administrators:[],Users:[],CategoryExclusionSets:[]};for(u=0;u<i.length;u++)r.Administrators.push({Id:i[u]});for(f=0;f<t.length;f++)r.Users.push({Id:t[f]});if(o!=null)for(e=0;e<o.length;e++)r.CategoryExclusionSets.push({Id:o[e]});s="/PDS/CreatePrepDisplayDevice";n>0&&(s="/PDS/UpdatePrepDisplayDevice");$.ajax({url:s,type:"post",dataType:"json",data:{prepDisplayDevice:r},success:function(t){t.actionVal===1?(n>0?($("#pds-type-main-"+n).text($("#ods-device-type option:selected").text()),$("#pds-queue-name-main-"+n).text(t.Object.Name),$("#pds-queue-name-main-"+n).text(t.Object.Queue),$("#pds-admins-name-main-"+n).text(t.Object.Admins)):$("#pds-list").append(t.msg),$("#app-trader-pds-add-edit").modal("hide"),cleanBookNotification.createSuccess()):$("#pds-form").validate().showErrors({pdsname:t.msg});showSubPOSDevice("pds-device","tab-pds-device")},error:function(n){cleanBookNotification.error(n,"Qbicles")}}).always(function(){LoadingOverlayEnd();$(".modal-backdrop.fade.in").remove()})}function ConfirmDeletePrepDisplayDevice(n){$prepDisplayDeviceIdDelete=n;$("#name-delete").text($("#pds-name-main-"+$prepDisplayDeviceIdDelete).text());$("#confirm-delete").modal("show")}function updateOrderDisplayRefresh(n){var t=$(n).val(),i,r;!isNaN(parseFloat(t))&&parseFloat(t)<0&&(t=0,$(n).val(0));i={Id:$("#setting_id").val(),OrderDisplayRefreshInterval:t};$.LoadingOverlay("show");r="/PointOfSale/SaveOrderDisplayRefreshSetting";$.ajax({url:r,type:"post",dataType:"json",data:{setting:i},success:function(n){n.actionVal===2?cleanBookNotification.updateSuccess():cleanBookNotification.error(n.msg,"Qbicles")},error:function(n){cleanBookNotification.error(n,"Qbicles")}}).always(function(){LoadingOverlayEnd()})}function CancelDelete(){$("#confirm-delete").modal("hide")}function DeletePrepQueue(){$.LoadingOverlay("show");$.ajax({type:"delete",url:"/PDS/DeletePrepDisplayDevice",data:{id:$prepDisplayDeviceIdDelete},dataType:"json",success:function(n){n.result?($("#pds-item-"+$prepDisplayDeviceIdDelete).remove(),$("#confirm-delete").modal("hide"),cleanBookNotification.removeSuccess()):cleanBookNotification.error(n.msg,"Qbicles")},error:function(n){cleanBookNotification.error("Have an error delete menu, detail: "+n.error,"Qbicles")}}).always(function(){LoadingOverlayEnd()})}var $locationManager=$("#location-manager").val(),$prepDisplayDeviceIdDelete;$("#pds-search").on("keyup",function(){if($("#pds-search").val().length>3||$("#pds-search").val().length===0){var n="/PDS/SearchPrepDisplayDevice?name="+$("#pds-search").val();AjaxElementLoad(n,"pds-list")}});PrepDisplayDeviceAddEdit=function(n){var t="/PDS/AddEditPrepDisplayDevice?id="+n;AjaxElementShowModal(t,"app-trader-pds-add-edit")};$prepDisplayDeviceIdDelete=0;