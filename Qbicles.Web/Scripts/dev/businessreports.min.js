function initNavClick(){$("ul.nav-stacked li a").click(function(){var n=$(this).attr("href");setTimeout(function(){switch(n){case"#sales":loadTabContent(n,tabs.issalesload);tabs.issalesload=!0;break;case"#purchase":loadTabContent(n,tabs.ispurchaseload);tabs.ispurchaseload=!0;break;case"#invoices":loadTabContent(n,tabs.isinvoicesload);tabs.isinvoicesload=!0;break;case"#payments":loadTabContent(n,tabs.ispaymentsload);tabs.ispaymentsload=!0;break;case"#transfers":loadTabContent(n,tabs.istranfersload);tabs.istranfersload=!0;break;case"#orders":loadTabContent(n,tabs.isordersload);tabs.isordersload=!0;break;case"#bookkeeping":loadTabContent(n,tabs.isbookkeepingload);tabs.isbookkeepingload=!0;case"#inventory":loadTabContent(n,tabs.isinventoryload);tabs.isinventoryload=!0}},200)})}function loadTabContent(n,t){if(!t){n=n.replace("#","");var i;switch(n){default:i=$("#"+n)}i.empty();i.LoadingOverlay("show");i.load("/BusinessReports/LoadBusinessReportTab",{tab:n},function(){i.LoadingOverlay("hide");initPlugins(n);overrideFunctions(n);$(".dataTables_filter").hide()})}}function overrideFunctions(n){switch(n){case"orders":loadDataOrdersSale();loadDataOrdersPurchase();$("#orders-sale input[name=search]").keyup(delay(function(){$("#tblOrdersSale").DataTable().ajax.reload()},500));$("#orders-sale input[name=daterange]").change(delay(function(){$("#tblOrdersSale").DataTable().ajax.reload()},500));$("#orders-sale select[name=location]").change(function(){$("#tblOrdersSale").DataTable().ajax.reload()});$("#orders-sale select[name=channel]").change(function(){$("#tblOrdersSale").DataTable().ajax.reload()});$("#orders-sale select[name=contacts]").change(function(){$("#tblOrdersSale").DataTable().ajax.reload()});$("#orders-sale select[name=filterInvoice]").change(function(){$("#tblOrdersSale").DataTable().ajax.reload()});$("#orders-sale select[name=filterPayment]").change(function(){$("#tblOrdersSale").DataTable().ajax.reload()});$("#orders-sale select[name=filterDelivery]").change(function(){$("#tblOrdersSale").DataTable().ajax.reload()});$("#orders-purchase input[name=search]").keyup(delay(function(){$("#tblOrdersPurchase").DataTable().ajax.reload()},500));$("#orders-purchase input[name=daterange]").change(delay(function(){$("#tblOrdersPurchase").DataTable().ajax.reload()},500));$("#orders-purchase select[name=location]").change(function(){$("#tblOrdersPurchase").DataTable().ajax.reload()});$("#orders-purchase select[name=contacts]").change(function(){$("#tblOrdersPurchase").DataTable().ajax.reload()});$("#orders-purchase select[name=filterInvoice]").change(function(){$("#tblOrdersPurchase").DataTable().ajax.reload()});$("#orders-purchase select[name=filterPayment]").change(function(){$("#tblOrdersPurchase").DataTable().ajax.reload()});$("#orders-purchase select[name=filterDelivery]").change(function(){$("#tblOrdersPurchase").DataTable().ajax.reload()});break;case"purchase":loadDataPurchase();$("#purchase input[name=search]").keyup(delay(function(){$("#tblPurchase").DataTable().ajax.reload()},500));$("#purchase input[name=daterange]").change(delay(function(){$("#tblPurchase").DataTable().ajax.reload()},500));$("#purchase select[name=location]").change(function(){$("#tblPurchase").DataTable().ajax.reload()});$("#purchase select[name=channel]").change(function(){$("#tblPurchase").DataTable().ajax.reload()});$("#purchase select[name=contacts]").change(function(){$("#tblPurchase").DataTable().ajax.reload()});break;case"sales":loadDataSales();loadDashBoardSales();$("#sales input[name=search]").keyup(delay(function(){$("#tblSales").DataTable().ajax.reload();loadDashBoardSales()},500));$("#sales input[name=daterange]").change(delay(function(){$("#tblSales").DataTable().ajax.reload();loadDashBoardSales()},500));$("#sales select[name=location]").change(function(){$("#tblSales").DataTable().ajax.reload();loadDashBoardSales()});$("#sales select[name=channel]").change(function(){$("#tblSales").DataTable().ajax.reload();loadDashBoardSales()});$("#sales select[name=contacts]").change(function(){$("#tblSales").DataTable().ajax.reload();loadDashBoardSales()});var t=$(".cd-accordion-menu");t.length>0&&t.each(function(){var n=$(this);n.on("change",'input[type="checkbox"]',function(){var n=$(this);n.prop("checked")?n.siblings("ul").attr("style","display:none;").slideDown(300):n.siblings("ul").attr("style","display:block;").slideUp(300)})});$(".dash-showhide").bind("click",function(n){n.preventDefault();collapseSummary()});break;case"invoices":loadDataInvoices();$("#invoices input[name=search]").keyup(delay(function(){$("#tblInvoices").DataTable().ajax.reload()},500));$("#invoices input[name=daterange]").change(delay(function(){$("#tblInvoices").DataTable().ajax.reload()},500));$("#invoices select[name=contacts]").change(function(){$("#tblInvoices").DataTable().ajax.reload()});break;case"payments":loadDataPayments();$("#payments input[name=search]").keyup(delay(function(){$("#tblPayments").DataTable().ajax.reload()},500));$("#payments input[name=daterange]").change(delay(function(){$("#tblPayments").DataTable().ajax.reload()},500));$("#payments select[name=contacts]").change(function(){$("#tblPayments").DataTable().ajax.reload()});break;case"transfers":loadDataTransfers();$("#transfers input[name=search]").keyup(delay(function(){$("#tblTransfers").DataTable().ajax.reload()},500));$("#transfers input[name=daterange]").change(delay(function(){$("#tblTransfers").DataTable().ajax.reload()},500));break;case"bookkeeping":loadDataManufacturing();initBKSubTab();break;case"inventory":loadDataInventoryTbl()}}function initPlugins(n){$("#"+n+" .checkmulti").multiselect({includeSelectAllOption:!0,enableFiltering:!0,buttonWidth:"100%",maxHeight:400,enableClickableOptGroups:!0});$("#"+n+" .select2").select2();var t=$("#"+n+" .daterange");t.daterangepicker({autoUpdateInput:!0,cancelClass:"btn-danger",opens:"left",locale:{cancelLabel:"Clear",format:$dateTimeFormatByUser},timePicker:!0});t.on("apply.daterangepicker",function(n,t){$(this).val(t.startDate.format($dateTimeFormatByUser)+" - "+t.endDate.format($dateTimeFormatByUser));$(this).change()});t.on("cancel.daterangepicker",function(){$(this).val(null);$(this).change()})}function loadDataPurchase(){$("#tblPurchase").on("processing.dt",function(n,t,i){$("#processingIndicator").css("display","none");i&&$(".loadingoverlay").length===0?$("#tblPurchase").LoadingOverlay("show"):$("#tblPurchase").LoadingOverlay("hide",!0)}).DataTable({destroy:!0,dom:'<"top"fl<"clear">>rt<"bottomtable"ip<"clear">>',language:{infoFiltered:""},serverSide:!0,info:!1,stateSave:!1,bLengthChange:!0,paging:!0,searching:!1,responsive:!0,scrollX:!1,autoWidth:!0,lengthMenu:[[10,20,50,100],[10,20,50,100]],pageLength:10,ajax:{url:"/BusinessReports/GetPurchase",type:"POST",dataType:"json",data:function(n){var t=getParamaters("#purchase");return $.extend({},n,t)}},columns:[{name:"FullRef",data:"FullRef",orderable:!0},{name:"Location",data:"Location",orderable:!0},{name:"Channel",data:"PurchaseChannel",orderable:!0},{name:"Contact",data:"Contact",orderable:!0},{name:"Total",data:"PurchaseTotal",orderable:!0},{name:"Status",data:"Status",orderable:!0,render:function(n,t,i){return'<span class="label label-lg '+i.LabelStatus+'">'+i.Status+"<\/span>"}},{name:null,data:null,orderable:!1,width:"100px",render:function(n,t,i){var r='<button class="btn btn-primary" disabled><i class="fa fa-eye"><\/i> &nbsp; Manage<\/button>';return i.AllowEdit&&(r='<button class="btn btn-primary" onclick="window.location.href = \'/TraderPurchases/PurchaseMaster?id='+i.Id+'\';"><i class="fa fa-eye"><\/i> &nbsp; Manage<\/button>'),r}}],order:[[0,"asc"]]})}function loadDataSales(){$("#tblSales").on("processing.dt",function(n,t,i){$("#processingIndicator").css("display","none");i&&$(".loadingoverlay").length===0?$("#tblSales").LoadingOverlay("show"):$("#tblSales").LoadingOverlay("hide",!0)}).DataTable({destroy:!0,dom:'<"top"fl<"clear">>rt<"bottomtable"ip<"clear">>',language:{infoFiltered:""},serverSide:!0,info:!1,stateSave:!1,bLengthChange:!0,paging:!0,searching:!1,responsive:!0,scrollX:!1,autoWidth:!0,lengthMenu:[[10,20,50,100],[10,20,50,100]],pageLength:10,ajax:{url:"/BusinessReports/GetSales",type:"POST",dataType:"json",data:function(n){var t=getParamaters("#sales");return $.extend({},n,t)}},columns:[{name:"FullRef",data:"FullRef",orderable:!0},{name:"Location",data:"Location",orderable:!0},{name:"SalesChannel",data:"SalesChannel",orderable:!0},{name:"Contact",data:"Contact",orderable:!0},{name:"SaleTotal",data:"SaleTotal",orderable:!0},{name:"Status",data:"Status",orderable:!0,render:function(n,t,i){return'<span class="label label-lg '+i.LabelStatus+'">'+i.Status+"<\/span>"}},{name:null,data:null,orderable:!1,width:"100px",render:function(n,t,i){var r='<button class="btn btn-primary" disabled><i class="fa fa-eye"><\/i> &nbsp; Manage<\/button>';return i.AllowEdit&&(r='<button class="btn btn-primary" onclick="window.location.href = \'/TraderSales/SaleMaster?key='+i.Key+'\';"><i class="fa fa-eye"><\/i> &nbsp; Manage<\/button>'),r}}],order:[[0,"asc"]]})}function loadDashBoardSales(){$(".loadingoverlay").length===0&&$.LoadingOverlay("show");var n=getParamaters("#sales");$("#section_dashboard").load("/TraderSales/SaleReportGetDataDashBoard",n,function(){$(".dash-concise").show();LoadingOverlayEnd()})}function loadDataInvoices(){var n=$("#tblInvoices");n.on("processing.dt",function(n,t,i){$("#processingIndicator").css("display","none");i&&$(".loadingoverlay").length===0?$(n.currentTarget).LoadingOverlay("show"):$(n.currentTarget).LoadingOverlay("hide",!0)}).dataTable({destroy:!0,serverSide:!0,paging:!0,searching:!0,order:[[0,"asc"]],ajax:{url:"/BusinessReports/GetInvoices",type:"POST",dataType:"json",data:function(n){var t=getParamaters("#invoices");return $.extend({},n,t)}},columns:[{data:"Ref",searchable:!0,orderable:!0},{name:"Contact",data:"Contact",orderable:!0},{data:"Date",searchable:!0,orderable:!0},{data:"Amount",searchable:!0,orderable:!0},{data:"Status",searchable:!1,orderable:!0,render:function(n){var t="";switch(n){case 0:t='<span class="label label-lg label-info">Draft<\/span>';break;case 1:t='<span class="label label-lg label-warning">Pending Review<\/span>';break;case 2:t='<span class="label label-lg label-primary">Pending Approval<\/span>';break;case 3:t='<span class="label label-lg label-danger">Denied<\/span>';break;case 4:t='<span class="label label-lg label-success">Approved<\/span>';break;case 5:t='<span class="label label-lg label-danger">Discarded<\/span>';break;default:t='<span class="label label-lg label-success">Issued<\/span>'}return t}},{data:"Id",searchable:!1,orderable:!1,render:function(n,t,i){return i.AllowEdit&&!i.IsBill?'<button class="btn btn-primary" onclick="window.location.href=\'/TraderInvoices/InvoiceManage?key='+i.Key+'\'"><i class="fa fa-eye"><\/i> &nbsp; Manage<\/button>':i.AllowEdit&&i.IsBill?'<button class="btn btn-primary" onclick="window.location.href=\'/TraderBill/BillManage?key='+i.Key+'\'"><i class="fa fa-eye"><\/i> &nbsp; Manage<\/button>':'<button class="btn btn-primary" disabled=""><i class="fa fa-eye"><\/i> &nbsp; Manage<\/button>'}},]})}function loadDataPayments(){var n=$("#tblPayments");n.on("processing.dt",function(n,t,i){$("#processingIndicator").css("display","none");i&&$(".loadingoverlay").length===0?$(n.currentTarget).LoadingOverlay("show"):$(n.currentTarget).LoadingOverlay("hide",!0)}).dataTable({destroy:!0,serverSide:!0,paging:!0,searching:!0,order:[[2,"desc"]],ajax:{url:"/BusinessReports/GetPayments",type:"POST",dataType:"json",data:function(n){var t=getParamaters("#payments");return $.extend({},n,t)}},columns:[{data:"Ref",searchable:!0,orderable:!0},{name:"Contact",data:"Contact",orderable:!0},{data:"Date",searchable:!0,orderable:!0},{data:"Amount",searchable:!0,orderable:!0},{data:"Status",searchable:!1,orderable:!0,render:function(n){var t="";switch(n){case 0:t='<span class="label label-lg label-info">Draft<\/span>';break;case 1:t='<span class="label label-lg label-warning">Pending Review<\/span>';break;case 2:t='<span class="label label-lg label-primary">Pending Approval<\/span>';break;case 3:t='<span class="label label-lg label-danger">Denied<\/span>';break;case 4:t='<span class="label label-lg label-success">Approved<\/span>';break;default:t='<span class="label label-lg label-danger">Discarded<\/span>'}return t}},{data:"Id",searchable:!1,orderable:!1,render:function(n,t,i){return i.AllowEdit?'<button class="btn btn-primary" onclick="window.location.href =\'/TraderPayments/PaymentManage?id='+n+'\';"><i class="fa fa-eye"><\/i> &nbsp; Manage<\/button>':'<button class="btn btn-primary" disabled=""><i class="fa fa-eye"><\/i> &nbsp; Manage<\/button>'}}]})}function loadDataTransfers(){var n=$("#tblTransfers");n.on("processing.dt",function(n,t,i){$("#processingIndicator").css("display","none");i&&$(".loadingoverlay").length===0?$(n.currentTarget).LoadingOverlay("show"):$(n.currentTarget).LoadingOverlay("hide",!0)}).dataTable({destroy:!0,serverSide:!0,paging:!0,searching:!0,order:[[3,"desc"]],ajax:{url:"/BusinessReports/GetTransfers",type:"POST",dataType:"json",data:function(n){var t=getParamaters("#transfers");return $.extend({},n,t)}},columns:[{name:"FullRef",data:"FullRef",searchable:!0,orderable:!0},{name:"From",data:"From",searchable:!0,orderable:!0},{name:"To",data:"To",orderable:!0,render:function(n,t,i){return i.Route?'<a href="/Community/UserProfilePage?uId='+i.Route+'" target="_blank">'+n+"<\/a>":n}},{name:"Date",data:"Date",searchable:!0,orderable:!0},{name:"Reason",data:"Reason",searchable:!0,orderable:!0},{name:"Status",data:"Status",searchable:!1,orderable:!0,render:function(n){var t="";switch(n){case"Initiated":t='<span class="label label-lg label-info">Initiated<\/span>';break;case"PendingPickup":t='<span class="label label-lg label-primary">Pending Pickup<\/span>';break;case"PickedUp":t='<span class="label label-lg label-success">Picked up<\/span>';break;case"Delivered":t='<span class="label label-lg label-success">Delivered<\/span>';break;case"Draft":t='<span class="label label-lg label-primary">Draft<\/span>';break;case"Denied":t='<span class="label label-lg label-danger">Denied<\/span>';break;case"Discarded":t='<span class="label label-lg label-danger">Discarded<\/span>'}return t}},{data:"Id",searchable:!1,orderable:!1,render:function(n,t,i){var r='<button class="btn btn-primary" disabled><i class="fa fa-eye"><\/i> &nbsp; Manage<\/button>';return i.AllowEdit&&(r='<button class="btn btn-primary" onclick="window.location.href=\'/TraderTransfers/TransferMaster?key='+i.Key+'\';"><i class="fa fa-eye"><\/i> &nbsp; Manage<\/button>'),r}},]})}function loadDataOrdersSale(){var n=$("#tblOrdersSale");n.on("processing.dt",function(n,t,i){$("#processingIndicator").css("display","none");i&&$(".loadingoverlay").length===0?$(n.currentTarget).LoadingOverlay("show"):$(n.currentTarget).LoadingOverlay("hide",!0)}).dataTable({destroy:!0,serverSide:!0,paging:!0,searching:!0,responsive:!0,aaSorting:[],ajax:{url:"/BusinessReports/GetOrders",type:"POST",dataType:"json",data:function(n){var t=getParamaters("#orders-sale");return t.isSaleOrderShow=!0,$.extend({},n,t)}},columns:[{name:"Ref",data:"Ref",searchable:!0,orderable:!0},{name:"CreatedDate",data:"CreatedDate",searchable:!0,orderable:!0},{name:"Location",data:"Location",searchable:!0,orderable:!0},{name:"Channel",data:"Channel",searchable:!0,orderable:!0},{name:"Contact",data:"Contact",orderable:!0},{name:"Total",data:"Total",searchable:!0,orderable:!0},{name:"Status",data:"Status",searchable:!1,orderable:!0,render:function(n){var t="";switch(n){case"Draft":t='<span class="label label-lg label-info">Draft<\/span>';break;case"AwaitingProcessing":t='<span class="label label-lg label-primary">Awaiting processing<\/span>';break;case"InProcessing":t='<span class="label label-lg label-primary">In processing<\/span>';break;case"Processed":t='<span class="label label-lg label-success">Processed<\/span>';break;case"ProcessedWithProblems":t='<span class="label label-lg label-danger">Processed with problems<\/span>'}return t}},{name:"Status",data:"Sale",orderable:!0,render:function(n,t,i){var r="";if(i.SaleKey){r+='<a href="/TraderSales/SaleMaster?key='+i.SaleKey+'" target="_blank">'+n;switch(i.SaleStatus){case"Draft":r+='<br /><span class="label label-info">Draft<\/span>';break;case"PendingReview":r+='<br /><span class="label label-warning">Awaiting Review<\/span>';break;case"PendingApproval":r+='<br /><span class="label label-warning">Awaiting Approval<\/span>';break;case"SaleApproved":r+='<br /><span class="label label-success">Approved<\/span>';break;case"SaleDenied":r+='<br /><span class="label label-danger">Denied<\/span>';break;case"SaleDiscarded":r+='<br /><span class="label label-danger">Discarded<\/span>';break;case"SalesOrderedIssued":r+='<br /><span class="label label-danger">Ordered Issued<\/span>'}r+="<\/a>"}else r="--";return r}},{name:"Invoice",data:"Invoice",orderable:!0,render:function(n,t,i){var r="";if(i.InvoiceId){r='<a href="/TraderInvoices/InvoiceManage?key='+i.InvoiceKey+'" target="_blank">'+n;switch(i.InvoiceStatus){case"Draft":r+='<br /><span class="label label-info">Draft<\/span>';break;case"PendingReview":r+='<br /><span class="label label-warning">Awaiting Review<\/span>';break;case"PendingApproval":r+='<br /><span class="label label-warning">Awaiting Approval<\/span>';break;case"InvoiceApproved":r+='<br /><span class="label label-success">Approved<\/span>';break;case"InvoiceDenied":r+='<br /><span class="label label-danger">Denied<\/span>';break;case"InvoiceDiscarded":r+='<br /><span class="label label-danger">Discarded<\/span>';break;case"InvoiceIssued":r+='<br /><span class="label label-success">Issued<\/span>'}r+="<\/a>"}else r="--";return r}},{name:"Payment",data:"Payments",orderable:!1,render:function(n){var t="";return n.length>0?n.forEach(function(n){if(n.Id&&(t+='<a href="/TraderPayments/PaymentManage?id='+n.Id+'" target="_blank">'+n.Ref),n.Status)switch(n.Status){case"Draft":t+='<br /><span class="label label-info">Draft<\/span>';break;case"PendingReview":t+='<br /><span class="label label-warning">Awaiting Review<\/span>';break;case"PendingApproval":t+='<br /><span class="label label-warning">Awaiting Approval<\/span>';break;case"PaymentApproved":t+='<br /><span class="label label-success">Approved<\/span>';break;case"PaymentDenied":t+='<br /><span class="label label-danger">Denied<\/span>';break;case"PaymentDiscarded":t+='<br /><span class="label label-danger">Discarded<\/span>'}t+="<\/a><br/>"}):t+="--",t}},{name:"Transfer",data:"Transfer",orderable:!0,render:function(n,t,i){var r="";if(i.TransferId){r='<a href="/TraderTransfers/TransferMaster?key='+i.TransferKey+'" target="_blank">'+n+"<\/a>";switch(i.TransferStatus){case"Draft":r+='<br /><span class="label label-info">Draft<\/span>';break;case"Initiated":r+='<br /><span class="label label-primary">Initiated<\/span>';break;case"PendingPickup":r+='<br /><span class="label label-warning">Pending Pickup<\/span>';break;case"PickedUp":r+='<br /><span class="label label-warning">Picked Up<\/span>';break;case"Delivered":r+='<br /><span class="label label-success">Delivered<\/span>';break;case"Denied":r+='<br /><span class="label label-danger">Denied<\/span>';break;case"Discarded":r+='<br /><span class="label label-danger">Discarded<\/span>'}r+="<\/a>"}else r="--";return r}},{data:"Id",searchable:!1,orderable:!1,render:function(n,t,i){var u=!1,r='<div class="btn-group">';return r+='<button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">Options &nbsp; <i class="fa fa-angle-down"><\/i><\/button>',r+='<ul class="dropdown-menu dropdown-menu-right primary" style="right: 0;">',i.Channel=="B2C"&&(r+='<li><a href="/B2C/ManageOrder?id='+n+'">Manage<\/a><\/li>',u=!0),i.Status=="AwaitingProcessing"||i.Status=="InProcessing"&&i.OrderProblem!="Non"?(r+='<li><a href="javascript:void(0);" onclick="reProcessOrder('+n+')">Process<\/a><\/li>',u=!0):i.Status=="InProcessing"&&(r+='<li><a href="javascript:void(0);" onclick="reProcessOrderInProcessing('+n+')">Process<\/a><\/li>',u=!0),r+=" <\/ul><\/div>",u?r:""}},]})}function loadDataOrdersPurchase(){var n=$("#tblOrdersPurchase");n.on("processing.dt",function(n,t,i){$("#processingIndicator").css("display","none");i&&$(".loadingoverlay").length===0?$(n.currentTarget).LoadingOverlay("show"):$(n.currentTarget).LoadingOverlay("hide",!0)}).dataTable({destroy:!0,serverSide:!0,paging:!0,aaSorting:[],searching:!0,responsive:!0,ajax:{url:"/BusinessReports/GetOrders",type:"POST",dataType:"json",data:function(n){var t=getParamaters("#orders-purchase");return t.isSaleOrderShow=!1,t.channel=3,$.extend({},n,t)}},columns:[{name:"Ref",data:"Ref",searchable:!0,orderable:!0},{name:"CreatedDate",data:"CreatedDate",searchable:!0,orderable:!0},{name:"Location",data:"DestinationLocation",searchable:!0,orderable:!0},{name:"Contact",data:"Contact",orderable:!0},{name:"Total",data:"Total",searchable:!0,orderable:!0},{name:"Status",data:"Status",searchable:!1,orderable:!0,render:function(n){var t="";switch(n){case"Draft":t='<span class="label label-lg label-info">Draft<\/span>';break;case"AwaitingProcessing":t='<span class="label label-lg label-primary">Awaiting processing<\/span>';break;case"InProcessing":t='<span class="label label-lg label-primary">In processing<\/span>';break;case"Processed":t='<span class="label label-lg label-success">Processed<\/span>';break;case"ProcessedWithProblems":t='<span class="label label-lg label-danger">Processed with problems<\/span>'}return t}},{name:"Status",data:"Purchase",orderable:!0,render:function(n,t,i){var r="";if(i.PurchaseId){r+='<a href="/TraderPurchases/PurchaseMaster?id='+i.PurchaseId+'" target="_blank">'+n;switch(i.PurchaseStatus){case"Draft":r+='<br /><span class="label label-info">Draft<\/span>';break;case"PendingReview":r+='<br /><span class="label label-warning">Awaiting Review<\/span>';break;case"PendingApproval":r+='<br /><span class="label label-warning">Awaiting Approval<\/span>';break;case"PurchaseApproved":r+='<br /><span class="label label-success">Approved<\/span>';break;case"PurchaseDenied":r+='<br /><span class="label label-danger">Denied<\/span>';break;case"PurchaseDiscarded":r+='<br /><span class="label label-danger">Discarded<\/span>';break;case"PurchaseOrderIssued":r+='<br /><span class="label label-danger">Ordered Issued<\/span>'}r+="<\/a>"}else r="--";return r}},{name:"Bill",data:"Bill",orderable:!0,render:function(n,t,i){var r="";if(i.BillId){r='<a href="/TraderBill/BillManage?id='+i.BillId+'" target="_blank">'+i.Bill;switch(i.BillStatus){case"Draft":r+='<br /><span class="label label-info">Draft<\/span>';break;case"PendingReview":r+='<br /><span class="label label-warning">Awaiting Review<\/span>';break;case"PendingApproval":r+='<br /><span class="label label-warning">Awaiting Approval<\/span>';break;case"InvoiceApproved":r+='<br /><span class="label label-success">Approved<\/span>';break;case"InvoiceDenied":r+='<br /><span class="label label-danger">Denied<\/span>';break;case"InvoiceDiscarded":r+='<br /><span class="label label-danger">Discarded<\/span>';break;case"InvoiceIssued":r+='<br /><span class="label label-danger">Issued<\/span>'}r+="<\/a>"}else r="--";return r}},{name:"Payment",data:"Payments",orderable:!1,render:function(n){var t="";return n.length>0?n.forEach(function(n){if(n.Id&&(t+='<a href="/TraderPayments/PaymentManage?id='+n.Id+'" target="_blank">'+n.Ref),n.Status)switch(n.Status){case"Draft":t+='<br /><span class="label label-info">Draft<\/span>';break;case"PendingReview":t+='<br /><span class="label label-warning">Awaiting Review<\/span>';break;case"PendingApproval":t+='<br /><span class="label label-warning">Awaiting Approval<\/span>';break;case"PaymentApproved":t+='<br /><span class="label label-success">Approved<\/span>';break;case"PaymentDenied":t+='<br /><span class="label label-danger">Denied<\/span>';break;case"PaymentDiscarded":t+='<br /><span class="label label-danger">Discarded<\/span>'}t+="<\/a><br/>"}):t+="--",t}},{name:"Transfer",data:"Transfer",orderable:!0,render:function(n,t,i){var r="";if(i.TransferId){r='<a href="/TraderTransfers/TransferMaster?key='+i.TransferKey+'" target="_blank">'+i.Transfer+"<\/a>";switch(i.TransferStatus){case"Draft":r+='<br /><span class="label label-info">Draft<\/span>';break;case"Initiated":r+='<br /><span class="label label-primary">Initiated<\/span>';break;case"PendingPickup":r+='<br /><span class="label label-warning">Pending Pickup<\/span>';break;case"PickedUp":r+='<br /><span class="label label-warning">Picked Up<\/span>';break;case"Delivered":r+='<br /><span class="label label-success">Delivered<\/span>';break;case"Denied":r+='<br /><span class="label label-danger">Denied<\/span>';break;case"Discarded":r+='<br /><span class="label label-danger">Discarded<\/span>'}r+="<\/a>"}else r="--";return r}},{data:"Id",searchable:!1,orderable:!1,render:function(n,t,i){var u=!1,r='<div class="btn-group">';return r+='<button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">Options &nbsp; <i class="fa fa-angle-down"><\/i><\/button>',r+='<ul class="dropdown-menu dropdown-menu-right primary" style="right: 0;">',i.Channel=="B2C"&&(r+='<li><a href="/B2C/ManageOrder?id='+n+'">Manage<\/a><\/li>',u=!0),i.Status=="AwaitingProcessing"||i.Status=="InProcessing"&&i.OrderProblem!="Non"?(r+='<li><a href="javascript:void(0);" onclick="reProcessOrder('+n+')">Process<\/a><\/li>',u=!0):i.Status=="InProcessing"&&(r+='<li><a href="javascript:void(0);" onclick="reProcessOrderInProcessing('+n+')">Process<\/a><\/li>',u=!0),r+=" <\/ul><\/div>",u?r:""}},]})}function getParamaters(n,t=""){var i={},r=$(n+" input[name=search]"),u=$(n+" input[name=daterange]"),f=$(n+" select[name=channel]"),e=$(n+" select[name=contacts]"),o=$(n+" select[name=location]"),s=$(n+" select[name=filterInvoice]"),h=$(n+" select[name=filterPayment]"),c=$(n+" select[name=filterDelivery]");return r.length>0&&(i.keyword=r.val()),u.length>0&&(i.datetime=u.val()),o.length>0&&(i.locationId=o.val()),f.length>0&&(i.channel=f.val()),e.length>0&&(i.contactId=e.val()),s.length>0&&(i.filterInvoice=s.val()),h.length>0&&(i.filterPayment=h.val()),c.length>0&&(i.filterDelivery=c.val()),i.modalId=t,i}function collapseSummary(){$(".dash-collapse").slideToggle();$(".dash-notify").slideToggle()}function loadDataManufacturing(){var n=$("#bk-manufacturing-table");n.on("processing.dt",function(t,i,r){$("#processingIndicator").css("display","none");r&&$(".loadingoverlay").length===0?n.LoadingOverlay("show"):n.LoadingOverlay("hide",!0)}).dataTable({destroy:!0,serverSide:!0,paging:!0,searching:!1,order:[[0,"desc"]],ajax:{url:"/BusinessReports/GetBkManufacturing",type:"POST",dataType:"json",data:function(n){return $.extend({},n,{keyword:$("#bk-manufacturing input[name=textsearch]").val(),daterange:$("#bk-manufacturing input[name=daterange]").val(),locationId:$("#bk-manufacturing select[name=loc]").val()})}},columns:[{name:"CreatedDate",data:"CreatedDate",searchable:!0,orderable:!0},{name:"CreatedBy",data:"CreatedBy",orderable:!0,render:function(n,t,i){return""+('<a href="/Community/UserProfilePage?uId='+i.CreatedById+'" target="_blank">'+i.CreatedBy+"<\/a>")}},{name:"JournalEntryNumber",data:"JournalEntryNumber",orderable:!0,render:function(n,t,i){return""+('<a href="/Bookkeeping/JournalEntry?id='+i.JournalEntryId+'" target="_blank">'+i.JournalEntryNumber+"<\/a>")}},{name:"JobRef",data:"JobRef",orderable:!0,render:function(n,t,i){return""+('<a href="/Manufacturing/ManuJobReview?id='+i.JobId+'" target="_blank">'+i.JobRef+"<\/a>")}},{name:"SaleRef",data:"SaleRef",orderable:!0,render:function(n,t,i){return""+('<a href="/TraderSales/SaleMaster?key='+i.SaleKey+'" target="_blank">'+i.SaleRef+"<\/a>")}},{name:"TransferInRef",data:"TransferInRef",orderable:!0,render:function(n,t,i){return""+('<a href="/TraderTransfers/TransferMaster?key='+i.TransferInKey+'" target="_blank">'+i.TransferInRef+"<\/a>")}},{name:"TransferOutRef",data:"TransferOutRef",orderable:!0,render:function(n,t,i){return""+('<a href="/TraderTransfers/TransferMaster?key='+i.TransferOutKey+'" target="_blank">'+i.TransferOutRef+"<\/a>")}}]})}function loadDataPayment(){var n=$("#bk-payment-table");n.on("processing.dt",function(t,i,r){$("#processingIndicator").css("display","none");r&&$(".loadingoverlay").length===0?n.LoadingOverlay("show"):n.LoadingOverlay("hide",!0)}).dataTable({destroy:!0,serverSide:!0,paging:!0,searching:!1,order:[[0,"desc"]],ajax:{url:"/BusinessReports/GetBkPaymentTblData",type:"POST",dataType:"json",data:function(n){return $.extend({},n,{keyword:$("#bk-payment input[name=textsearch]").val(),daterange:$("#bk-payment input[name=daterange]").val(),locationId:$("#bk-payment select[name=loc]").val()})}},columns:[{name:"CreatedDate",data:"CreatedDate",searchable:!0,orderable:!0},{name:"CreatedBy",data:"CreatedBy",orderable:!0,render:function(n,t,i){return""+('<a href="/Community/UserProfilePage?uId='+i.CreatedById+'" target="_blank">'+i.CreatedBy+"<\/a>")}},{name:"JournalEntryNumber",data:"JournalEntryNumber",orderable:!0,render:function(n,t,i){return""+('<a href="/Bookkeeping/JournalEntry?id='+i.JournalEntryId+'" target="_blank">'+i.JournalEntryNumber+"<\/a>")}},{name:"PaymentRef",data:"PaymentRef",orderable:!0,render:function(n,t,i){return""+('<a href="/TraderPayments/PaymentManage?id='+i.PaymentId+'" target="_blank">'+i.PaymentRef+"<\/a>")}}]})}function loadDataInventoryPurchase(){var n=$("#bk-invpurchase-table");n.on("processing.dt",function(t,i,r){$("#processingIndicator").css("display","none");r&&$(".loadingoverlay").length===0?n.LoadingOverlay("show"):n.LoadingOverlay("hide",!0)}).dataTable({destroy:!0,serverSide:!0,paging:!0,searching:!1,order:[[0,"desc"]],ajax:{url:"/BusinessReports/GetBkInvPurchase",type:"POST",dataType:"json",data:function(n){return $.extend({},n,{keyword:$("#bk-invent input[name=textsearch]").val(),daterange:$("#bk-invent input[name=daterange]").val(),locationId:$("#bk-invent select[name=loc]").val()})}},columns:[{name:"CreatedDate",data:"CreatedDate",searchable:!0,orderable:!0},{name:"CreatedBy",data:"CreatedBy",orderable:!0,render:function(n,t,i){return""+('<a href="/Community/UserProfilePage?uId='+i.CreatedById+'" target="_blank">'+i.CreatedBy+"<\/a>")}},{name:"JournalEntryNumber",data:"JournalEntryNumber",orderable:!0,render:function(n,t,i){return""+('<a href="/Bookkeeping/JournalEntry?id='+i.JournalEntryId+'" target="_blank">'+i.JournalEntryNumber+"<\/a>")}},{name:"PurchaseRef",data:"PurchaseRef",orderable:!0,render:function(n,t,i){return""+('<a href="/TraderPurchases/PurchaseMaster?id='+i.PurchaseId+'" target="_blank">'+i.PurchaseRef+"<\/a>")}},{name:"TransferRef",data:"TransferRef",orderable:!0,render:function(n,t,i){return""+('<a href="/TraderTransfers/TransferMaster?key='+i.TransferKey+'" target="_blank">'+i.TransferRef+"<\/a>")}}]})}function loadDataNonInventoryPurchase(){var n=$("#bk-noninvpurchase-table");n.on("processing.dt",function(t,i,r){$("#processingIndicator").css("display","none");r&&$(".loadingoverlay").length===0?n.LoadingOverlay("show"):n.LoadingOverlay("hide",!0)}).dataTable({destroy:!0,serverSide:!0,paging:!0,searching:!1,order:[[0,"desc"]],ajax:{url:"/BusinessReports/GetBkNonInvPurchase",type:"POST",dataType:"json",data:function(n){return $.extend({},n,{keyword:$("#bk-noninv input[name=textsearch]").val(),daterange:$("#bk-noninv input[name=daterange]").val(),locationId:$("#bk-noninv select[name=loc]").val()})}},columns:[{name:"CreatedDate",data:"CreatedDate",searchable:!0,orderable:!0},{name:"CreatedBy",data:"CreatedBy",orderable:!0,render:function(n,t,i){return""+('<a href="/Community/UserProfilePage?uId='+i.CreatedById+'" target="_blank">'+i.CreatedBy+"<\/a>")}},{name:"JournalEntryNumber",data:"JournalEntryNumber",orderable:!0,render:function(n,t,i){return""+('<a href="/Bookkeeping/JournalEntry?id='+i.JournalEntryId+'" target="_blank">'+i.JournalEntryNumber+"<\/a>")}},{name:"PurchaseRef",data:"PurchaseRef",orderable:!0,render:function(n,t,i){return""+('<a href="/TraderPurchases/PurchaseMaster?id='+i.PurchaseId+'" target="_blank">'+i.PurchaseRef+"<\/a>")}},{name:"BillRef",data:"BillRef",orderable:!0,render:function(n,t,i){return""+('<a href="/TraderBill/BillManage?id='+i.BillId+'" target="_blank">'+i.BillRef+"<\/a>")}}]})}function loadDataSaleInvoice(){var n=$("#bk-sinvoice-table");n.on("processing.dt",function(t,i,r){$("#processingIndicator").css("display","none");r&&$(".loadingoverlay").length===0?n.LoadingOverlay("show"):n.LoadingOverlay("hide",!0)}).dataTable({destroy:!0,serverSide:!0,paging:!0,order:[[0,"desc"]],searching:!1,ajax:{url:"/BusinessReports/GetBkSInvoice",type:"POST",dataType:"json",data:function(n){return $.extend({},n,{keyword:$("#bk-sinvoice input[name=textsearch]").val(),daterange:$("#bk-sinvoice input[name=daterange]").val(),locationId:$("#bk-sinvoice select[name=loc]").val()})}},columns:[{name:"CreatedDate",data:"CreatedDate",searchable:!0,orderable:!0},{name:"CreatedBy",data:"CreatedBy",orderable:!0,render:function(n,t,i){return""+('<a href="/Community/UserProfilePage?uId='+i.CreatedById+'" target="_blank">'+i.CreatedBy+"<\/a>")}},{name:"JournalEntryNumber",data:"JournalEntryNumber",orderable:!0,render:function(n,t,i){return""+('<a href="/Bookkeeping/JournalEntry?id='+i.JournalEntryId+'" target="_blank">'+i.JournalEntryNumber+"<\/a>")}},{name:"SaleRef",data:"SaleRef",orderable:!0,render:function(n,t,i){return""+('<a href="/TraderSales/SaleMaster?key='+i.SaleKey+'" target="_blank">'+i.SaleRef+"<\/a>")}},{name:"InvoiceRef",data:"InvoiceRef",orderable:!0,render:function(n,t,i){return""+('<a href="/TraderInvoices/InvoiceManage?key='+i.InvoiceKey+'" target="_blank">'+i.InvoiceRef+"<\/a>")}}]})}function loadDataSaleTransfer(){var n=$("#bk-stransfer-table");n.on("processing.dt",function(t,i,r){$("#processingIndicator").css("display","none");r&&$(".loadingoverlay").length===0?n.LoadingOverlay("show"):n.LoadingOverlay("hide",!0)}).dataTable({destroy:!0,serverSide:!0,paging:!0,order:[[0,"desc"]],searching:!1,ajax:{url:"/BusinessReports/GetBkSTransfer",type:"POST",dataType:"json",data:function(n){return $.extend({},n,{keyword:$("#bk-stransfer input[name=textsearch]").val(),daterange:$("#bk-stransfer input[name=daterange]").val(),locationId:$("#bk-stransfer select[name=loc]").val()})}},columns:[{name:"CreatedDate",data:"CreatedDate",searchable:!0,orderable:!0},{name:"CreatedBy",data:"CreatedBy",orderable:!0,render:function(n,t,i){return""+('<a href="/Community/UserProfilePage?uId='+i.CreatedById+'" target="_blank">'+i.CreatedBy+"<\/a>")}},{name:"JournalEntryNumber",data:"JournalEntryNumber",orderable:!0,render:function(n,t,i){return""+('<a href="/Bookkeeping/JournalEntry?id='+i.JournalEntryId+'" target="_blank">'+i.JournalEntryNumber+"<\/a>")}},{name:"TransferRef",data:"TransferRef",orderable:!0,render:function(n,t,i){return""+('<a href="/TraderTransfers/TransferMaster?key='+i.TransferKey+'" target="_blank">'+i.TransferRef+"<\/a>")}},{name:"Type",data:"Type",orderable:!0,render:function(n,t,i){var r="";return i.Type!=""&&(r+='<span class="label label-lg label-info">'+i.Type+"<\/span>"),r}}]})}function initBKSubTab(){$("#bookkeeping ul.nav-pills li a").click(function(){var n=$(this).attr("href");setTimeout(function(){switch(n){case"#bk-manufacturing":loadBKDataTableContent(n,bookkeepingSubTabs.isManufacturingLoad);bookkeepingSubTabs.isManufacturingLoad=!0;break;case"#bk-payment":loadBKDataTableContent(n,bookkeepingSubTabs.isPaymentLoad);bookkeepingSubTabs.isPaymentLoad=!0;break;case"#bk-invent":loadBKDataTableContent(n,bookkeepingSubTabs.isInventoryPurchaseLoad);bookkeepingSubTabs.isInventoryPurchaseLoad=!0;break;case"#bk-noninv":loadBKDataTableContent(n,bookkeepingSubTabs.isNonInventoryPurchaseLoad);bookkeepingSubTabs.isNonInventoryPurchaseLoad=!0;break;case"#bk-sinvoice":loadBKDataTableContent(n,bookkeepingSubTabs.isSaleInvoiceLoad);bookkeepingSubTabs.isSaleInvoiceLoad=!0;break;case"#bk-stransfer":loadBKDataTableContent(n,bookkeepingSubTabs.isSaleTransferLoad);bookkeepingSubTabs.isSaleTransferLoad=!0}},200)});$("#bk-manufacturing input[name=textsearch]").keyup(delay(function(){$("#bk-manufacturing-table").DataTable().ajax.reload()},500));$("#bk-manufacturing input[name=daterange]").change(delay(function(){$("#bk-manufacturing-table").DataTable().ajax.reload()},500));$("#bk-manufacturing select[name=loc]").change(delay(function(){$("#bk-manufacturing-table").DataTable().ajax.reload()},500));$("#bk-payment input[name=textsearch]").keyup(delay(function(){$("#bk-payment-table").DataTable().ajax.reload()},500));$("#bk-payment input[name=daterange]").change(delay(function(){$("#bk-payment-table").DataTable().ajax.reload()},500));$("#bk-payment select[name=loc]").change(delay(function(){$("#bk-payment-table").DataTable().ajax.reload()},500));$("#bk-invent input[name=textsearch]").keyup(delay(function(){$("#bk-invpurchase-table").DataTable().ajax.reload()},500));$("#bk-invent input[name=daterange]").change(delay(function(){$("#bk-invpurchase-table").DataTable().ajax.reload()},500));$("#bk-invent select[name=loc]").change(delay(function(){$("#bk-invpurchase-table").DataTable().ajax.reload()},500));$("#bk-noninv input[name=textsearch]").keyup(delay(function(){$("#bk-noninvpurchase-table").DataTable().ajax.reload()},500));$("#bk-noninv input[name=daterange]").change(delay(function(){$("#bk-noninvpurchase-table").DataTable().ajax.reload()},500));$("#bk-noninv select[name=loc]").change(delay(function(){$("#bk-noninvpurchase-table").DataTable().ajax.reload()},500));$("#bk-sinvoice input[name=textsearch]").keyup(delay(function(){$("#bk-sinvoice-table").DataTable().ajax.reload()},500));$("#bk-sinvoice input[name=daterange]").change(delay(function(){$("#bk-sinvoice-table").DataTable().ajax.reload()},500));$("#bk-sinvoice select[name=loc]").change(delay(function(){$("#bk-sinvoice-table").DataTable().ajax.reload()},500));$("#bk-stransfer input[name=textsearch]").keyup(delay(function(){$("#bk-stransfer-table").DataTable().ajax.reload()},500));$("#bk-stransfer input[name=daterange]").change(delay(function(){$("#bk-stransfer-table").DataTable().ajax.reload()},500));$("#bk-stransfer select[name=loc]").change(delay(function(){$("#bk-stransfer-table").DataTable().ajax.reload()},500))}function loadBKDataTableContent(n,t){if(!t)switch(n){case"#bk-manufacturing":loadDataManufacturing();break;case"#bk-payment":loadDataPayment();break;case"#bk-invent":loadDataInventoryPurchase();break;case"#bk-noninv":loadDataNonInventoryPurchase();break;case"#bk-sinvoice":loadDataSaleInvoice();break;case"#bk-stransfer":loadDataSaleTransfer();break;default:loadDataManufacturing()}}function reProcessOrder(n){$.LoadingOverlay("show");$.post("/BusinessReports/ReProcessOrder",{tradeOderId:n},function(n){$.LoadingOverlay("hide");n.result?(cleanBookNotification.success(_L("B2C_PROCESSED_ORDER"),"Qbicles"),$("#tblOrdersSale").DataTable().ajax.reload(),$("#tblOrdersPurchase").DataTable().ajax.reload()):cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")})}function reProcessOrderInProcessing(n){$.LoadingOverlay("show");$.post("/BusinessReports/ReProcessOrderInProcessing",{tradeOderId:n},function(n){$.LoadingOverlay("hide");n.result?(cleanBookNotification.success(_L("B2C_PROCESSED_ORDER"),"Qbicles"),$("#tblOrdersSale").DataTable().ajax.reload(),$("#tblOrdersPurchase").DataTable().ajax.reload()):cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")})}function showDetailTraderItemByGroup(n){$.LoadingOverlay("show");var t=$("#sales input[name=daterange]").val();$("#app-trader-product-group").load("/TraderSales/TraderSaleGetDetailTraderItems?ids="+n,{datetime:t},function(){LoadingOverlayEnd()})}function loadDataInventoryTbl(){var n=[{name:"Item",data:"Item",orderable:!0,render:function(n,t,i){return""+('<a href="#" onclick=ShowInventoryItemDetailModal('+i.UnitId+') data-toggle="modal">'+i.Item+"<\/a>")}},{id:"",name:"Unit",data:"Unit",orderable:!0,render:function(n,t,i){return i.ListUnitHtmlString}},{name:"CurrentInventory",data:"CurrentInventory",orderable:!1,render:function(n,t,i){return"<span id='row-current-inventory-"+i.Id+"'>"+i.CurrentInventory+"<\/span>"}},{name:"DaysToLast",data:"DaysToLast",orderable:!1,render:function(n,t,i){return i.DaysToLastHighlighted?"<span id='row-day-to-last-"+i.Id+"' class='label label-danger' data-tooltip='Reorder required' data-tooltip-color='#dd4b39'>"+i.DaysToLast+"<\/span>":"<span id='row-day-to-last-"+i.Id+"'>"+i.DaysToLast+"<\/span>"}},{name:"InventoryTotal",data:"InventoryTotal",orderable:!1,render:function(n,t,i){return"<span id='row-inventory-total-"+i.Id+"'>"+i.InventoryTotal+"<\/span>"}},{name:"Associated",data:"Associated",orderable:!1,render:function(n,t,i){return i.Associated==="0 item(s)"?"":"<button onclick='ShowIngredientsItemAssociated("+i.Id+")' class='btn btn-info'><i class='fa fa-cube'><\/i> &nbsp; "+i.Associated+"<\/button>"}}];$tblInventory=$("#tbl-inventory");$tblInventory.on("processing.dt",function(n,t,i){$("#processingIndicator").css("display","none");i&&$(".loadingoverlay").length===0?$tblInventory.LoadingOverlay("show"):$tblInventory.LoadingOverlay("hide",!0)}).DataTable({destroy:!0,serverSide:!0,paging:!0,searching:!1,responsive:!0,lengthMenu:[[10,20,50,100],[10,20,50,100]],pageLength:10,fnDrawCallback:function(){$("#tbl-inventory .select2").select2()},ajax:{url:"/BusinessReports/GetInventoryTblData",type:"GET",dataType:"json",data:function(n){return $.extend({},n,{keySearch:$("#inventory_search_text").val(),inventoryBasis:$("#inventory-basis-select").val(),maxDayToLast:$("#max-day-to-last").val(),days2Last:$("#filter_daterange").val(),dayToLastOperator:$("#day-to-last-basis-select").val(),locationId:$("#inventory-location").val(),hasSymbol:!1})}},columns:n})}function ShowIngredientsItemAssociated(n){var t=$("#inventory-location").val(),i="/BusinessReports/ShowInventoryAssociatedIngredientsItem?itemId="+n+"&locationId="+t;AjaxElementShowModal(i,"inventory-associated-items-view")}function UpdateInventoryUnit(n){var t=$("#"+n+"-unit").val(),i=$("#inventory-basis-select").val(),r=$("#max-day-to-last").val(),u=$("#filter_daterange").val(),f=$("#day-to-last-basis-select").val(),e=$("#inventory-location").val();$.LoadingOverlay("show");$.ajax({type:"get",url:"/BusinessReports/UpdateInventoryUnit",data:{unitId:t,itemId:n,inventoryBasis:i,maxDayToLast:r,days2Last:u,dayToLastOperator:f,locationId:e,hasSymbol:!1},dataType:"json",success:function(n){if(n.result){var t=n.Object.Id;$("#row-unit-item-"+t).text(n.Object.Unit);$("#row-current-inventory-"+t).text(n.Object.CurrentInventory);$("#row-day-to-last-"+t).text(n.Object.DaysToLast);$("#row-inventory-total-"+t).text(n.Object.InventoryTotal);cleanBookNotification.updateSuccess()}else{cleanBookNotification.error("Have an error, detail: "+n.msg,"Qbicles");return}},error:function(n){cleanBookNotification.error("Have an error, detail: "+n.error,"Qbicles")}}).always(function(){LoadingOverlayEnd()})}function ShowInventoryItemDetailModal(n){var t=$("#inventory-report-item"),i=$("#inventory-basis-select").val(),r=$("#max-day-to-last").val(),u=$("#filter_daterange").val(),f=$("#day-to-last-basis-select").val(),e=$("#inventory-location").val(),o={unitId:n,locationId:e,inventoryBasis:i,maxDayToLast:r,days2Last:u,dayToLastOperator:f};t.load("/BusinessReports/GetInventoryReportItemDetailModal/",o,function(){t.modal("show")})}function ShowTopSell(n){var t=getParamaters("#sales",n);$("#"+n).load("/TraderSales/ShowSaleDashboardReportDetail?modalId="+n,t,function(){$("#"+n).removeClass().addClass("modal left fade in");$("#"+n).show();document.body.style.overflow="hidden";$modalContent.addEventListener("scroll",preventScroll)})}function CloseTopSell(n){$("#"+n).removeClass();$("#"+n).hide();$modal.style.display="none";document.body.style.overflow="auto";$modalContent.removeEventListener("scroll",preventScroll)}function preventScroll(n){n.preventDefault()}var isBusy=!1,tabs={isordersload:!1,issalesload:!1,ispurchaseload:!1,isinvoicesload:!1,ispaymentsload:!1,istranfersload:!1,isbookkeepingload:!1,isinventoryload:!1},bookkeepingSubTabs={isManufacturingLoad:!1,isPaymentLoad:!1,isInventoryPurchaseLoad:!1,isNonInventoryPurchaseLoad:!1,isSaleInvoiceLoad:!1,isSaleTransferLoad:!1};$(document).ready(function(){initNavClick();var n=getQuerystring("tab");switch(n){case"sales":$("a[href=#sales]").click();break;case"purchase":$("a[href=#purchase]").click();break;case"invoices":$("a[href=#invoices]").click();break;case"payments":$("a[href=#payments]").click();break;case"transfers":$("a[href=#transfers]").click();break;case"bookkeeping":$("a[href=#bookkeeping]").click();default:$("a[href=#orders]").click()}});