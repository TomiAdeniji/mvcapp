function ConfirmDeleteReturnItem(n){$returnItemId=n;$("#name-delete").text($("#return-item-name-"+$returnItemId).text());$("#confirm-delete").modal("show")}function CancelDelete(){$("#confirm-delete").modal("hide")}function DeleteReturnItem(){$.LoadingOverlay("show");CheckStatus($saleReturnId,"SaleReturn").then(function(n){n.result&&n.Object!=="Approved"&&n.Object!=="Denied"&&n.Object!=="Discarded"?$.ajax({type:"delete",url:"/TraderSalesReturn/DeleteReturnItem",datatype:"json",data:{returnItem:{Id:$returnItemId}},success:function(n){if(n.result){$("#confirm-delete").modal("hide");var t=$("#table-tr-return-item-"+$returnItemId);$(t).css("background-color","#FF3700");$(t).fadeOut(500,function(){var n=$("#sale-return-manager-table").DataTable();n.destroy();$("#sale-return-manager-table tbody tr#table-tr-return-item-"+$returnItemId).remove();$("#sale-return-manager-table").DataTable().draw()});cleanBookNotification.removeSuccess()}else cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")},error:function(n){cleanBookNotification.error(n.responseText,"Qbicles")}}).always(function(){LoadingOverlayEnd()}):(LoadingOverlayEnd(),cleanBookNotification.error(_L("ERROR_MSG_272"),"Qbicles"),setTimeout(function(){location.reload()},1e3))})}function OnFocusOutReturnQty(n,t,i){strValueChanged=t;var u=parseFloat(t),r=parseFloat(i);if(u<0){$("return-item-row-qty-"+n).val(r);cleanBookNotification.error(_L("ERROR_MSG_650"),"Qbicles");return}if(strValueChanged!==strValueOld&&u>r){cleanBookNotification.error(_L("ERROR_MSG_651"),"Qbicles");$("return-item-row-qty-"+n).val(r);return}UpdateReturnQuantity(n,t)}function OnFocusReturnQty(n){strValueOld=n}function UpdateReturnQuantity(n,t){$.LoadingOverlay("show");CheckStatus($saleReturnId,"SaleReturn").then(function(i){i.result&&i.Object!=="Approved"&&i.Object!=="Denied"&&i.Object!=="Discarded"?$.ajax({type:"post",url:"/TraderSalesReturn/UpdateReturnItemQuantity",datatype:"json",data:{returnItem:{Id:n,ReturnQuantity:t}},success:function(n){n.result?cleanBookNotification.updateSuccess():cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")},error:function(n){cleanBookNotification.error(n.responseText,"Qbicles")}}).always(function(){LoadingOverlayEnd()}):(LoadingOverlayEnd(),cleanBookNotification.error(_L("ERROR_MSG_272"),"Qbicles"),setTimeout(function(){location.reload()},1e3))})}function OnFocusOutReturnCredit(n,t){if(strValueCreditChanged=t,parseFloat(t)<0){cleanBookNotification.error(_L("ERROR_MSG_652"),"Qbicles");$("return-item-row-credit-"+n).val(0);return}strValueCreditChanged!==strValueCreditOld&&UpdateReturnCredit(n,t)}function OnFocusReturnCredit(n){strValueCreditOld=n}function UpdateReturnCredit(n,t){$.LoadingOverlay("show");CheckStatus($saleReturnId,"SaleReturn").then(function(i){i.result&&i.Object!=="Approved"&&i.Object!=="Denied"&&i.Object!=="Discarded"?$.ajax({type:"post",url:"/TraderSalesReturn/UpdateReturnItemCredit",datatype:"json",data:{returnItem:{Id:n,Credit:t}},success:function(n){n.result?cleanBookNotification.updateSuccess():(LoadingOverlayEnd(),cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles"))},error:function(n){cleanBookNotification.error(n.responseText,"Qbicles")}}).always(function(){LoadingOverlayEnd()}):(LoadingOverlayEnd(),cleanBookNotification.error(_L("ERROR_MSG_272"),"Qbicles"),setTimeout(function(){location.reload()},1e3))})}function UpdateIsReturnToInventory(n,t){$.LoadingOverlay("show");CheckStatus($saleReturnId,"SaleReturn").then(function(i){i.result&&i.Object!=="Approved"&&i.Object!=="Denied"&&i.Object!=="Discarded"?$.ajax({type:"post",url:"/TraderSalesReturn/UpdateReturnItemIsReturnedToInventory",datatype:"json",data:{returnItem:{Id:t,IsReturnedToInventory:n}},success:function(n){n.result?cleanBookNotification.updateSuccess():(LoadingOverlayEnd(),cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles"))},error:function(n){cleanBookNotification.error(n.responseText,"Qbicles")}}).always(function(){LoadingOverlayEnd()}):(LoadingOverlayEnd(),cleanBookNotification.error(_L("ERROR_MSG_272"),"Qbicles"),setTimeout(function(){location.reload()},1e3))})}var $saleReturnId=$("#sale-return-id").val(),$returnItemId=0,strValueOld="",strValueChanged="",strValueCreditOld="",strValueCreditChanged="";