function DownloadInvoice(n){$.LoadingOverlay("show");var t="invoice-"+n+".pdf";$.ajax({type:"post",url:"/TraderInvoices/DownloadFile",datatype:"json",data:{invoiceId:n},success:function(n){LoadingOverlayEnd();var i=document.createElement("a");i.download=t;i.href=n;document.body.appendChild(i);i.click();document.body.removeChild(i);delete i},error:function(n){cleanBookNotification.error(n.responseText,"Qbicles");LoadingOverlayEnd()}})}function IssueInvoice(n){$.LoadingOverlay("show");$.ajax({url:"/TraderInvoices/IssueInvoice",type:"POST",dataType:"json",data:{id:n},success:function(n){n.result&&(LoadingOverlayEnd(),cleanBookNotification.updateSuccess(),document.getElementById("download-1").style.cursor="pointer",document.getElementById("download-2").disabled=!1,$("#download-3").removeClass("disabled"),$("#invoice-issue").text("Yes"))},error:function(){LoadingOverlayEnd();cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}})}function ShowGroupMember(){$("#app-trader-workgroup-preview").empty();$("#app-trader-workgroup-preview").load("/TraderTransfers/ShowListMemberForWorkGroup?wgId="+$("#payment-workgroup-select").val())}function WorkGroupSelectedChange(){$(".preview-workgroup").show();var n=$("#workgroup-select").val();n!==""?($.LoadingOverlay("show"),$.ajax({type:"get",url:"/TraderTransfers/getworkgroup?id="+n,dataType:"json",success:function(n){$.LoadingOverlay("hide");n.result?($(".preview-workgroup table tr td.location_name").text(n.Object.Location),$(".preview-workgroup table tr td.workgroup_process").text(n.Object.Process),$(".preview-workgroup table tr td.workgroup_qbicle").text(n.Object.Qbicle),$(".preview-workgroup table tr td.workgroup_member span").text(n.Object.Members)):($(".preview-workgroup table tr td.location_name").text(""),$(".preview-workgroup table tr td.workgroup_process").text(""),$(".preview-workgroup table tr td.workgroup_qbicle").text(""),$(".preview-workgroup table tr td.workgroup_member span").text(""))},error:function(){$.LoadingOverlay("hide");cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}})):($(".preview-workgroup table tr td.location_name").text(""),$(".preview-workgroup table tr td.workgroup_process").text(""),$(".preview-workgroup table tr td.workgroup_qbicle").text(""),$(".preview-workgroup table tr td.workgroup_member span").text(""))}function ReloadInvoicePayment(){$("#invoice-payments").empty();$("#invoice-payments").load("/TraderPayments/InvoicePaymentContent?key="+$invoiceKey,function(){LoadingOverlayEnd()})}function AddInvoicePayment(n){$.LoadingOverlay("show");$("#app-trader-invoice-payment").empty();$("#app-trader-invoice-payment").load("/TraderPayments/TraderInvoicePaymentAdd?invoiceId="+n,function(){LoadingOverlayEnd();$("#app-trader-invoice-payment").modal("toggle")});$paymentId=0}function EditInvoicePayment(n){$.LoadingOverlay("show");$("#app-trader-invoice-payment").empty();$("#app-trader-invoice-payment").load("/TraderPayments/TraderInvoicePaymentEdit?paymentId="+n,function(){LoadingOverlayEnd();$("#app-trader-invoice-payment").modal("toggle")});$paymentId=n}function ClearInvoicePayment(){$("#amount").val(0);$("#description").val("")}var $invoiceKey=$("#invoice-key").val(),$paymentId=0;