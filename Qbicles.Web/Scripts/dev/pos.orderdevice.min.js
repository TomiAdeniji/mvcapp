function LoadTableDataPosDeviceType(n,t,i,r){r||(r=0);$("#"+n).on("processing.dt",function(n,t,i){$("#processingIndicator").css("display","none");i&&$(".loadingoverlay").length===0?$(n.currentTarget).LoadingOverlay("show"):$(n.currentTarget).LoadingOverlay("hide",!0)}).DataTable({destroy:!0,dom:'<"top"fl<"clear">>rt<"bottomtable"ip<"clear">>',language:{infoFiltered:""},serverSide:!0,info:!0,stateSave:!1,bLengthChange:!0,paging:!0,searching:!1,responsive:!0,scrollX:!1,autoWidth:!0,deferLoading:30,lengthMenu:[[10,20,50,100],[10,20,50,100]],pageLength:10,ajax:{url:t,type:"GET",dataType:"json",data:function(n){return $.extend({},n,{keyword:$("#device_search").val(),orderTypeId:$("#device_filter").val()})}},columns:i,order:[[r,"asc"]]})}function LoadDataByServerSide(){var n=[{name:"Name",data:"Name",orderable:!0},{name:"OrderTypes",data:"OrderTypes",orderable:!1},{data:null,orderable:!1,width:"100px",render:function(n,t,i){var r="";return r+='<button class="btn btn-warning" style="margin-right: 10px;" data-toggle="modal" data-target="#app-trader-pos-device-type-addedit" onclick="addEditPosDeviceType('+i.Id+')"><i class="fa fa-pencil"><\/i><\/button>',r+(i.IsUse?'<button class="btn btn-danger" disabled><i class="fa fa-trash"><\/i><\/button>':'<button class="btn btn-danger" onclick="deleteDeviceType('+i.Id+')"><i class="fa fa-trash"><\/i><\/button>')}}];LoadTableDataPosDeviceType("community-list","/PointOfSale/TraderPosDeviceTypetDataTable",n,0);CallBackFilterPosDeviceTypeServeSide()}function CallBackFilterPosDeviceTypeServeSide(){$("#community-list").DataTable().ajax.reload()}function searchKeyWork(n){n?(clearTimeout(delayTimer),delayTimer=setTimeout(function(){CallBackFilterPosDeviceTypeServeSide()},1500)):CallBackFilterPosDeviceTypeServeSide()}function addEditPosDeviceType(n){LoadingOverlay();$("#app-trader-pos-device-type-addedit").load("/PointOfSale/AddEditDeviceType?id="+n,function(){LoadingOverlayEnd()})}function saveDeviceType(){var i,n,t,r;if($("#devicetype_form").valid()){if(i=[],n=$("#devicetype_types").val(),n&&n.length>0)for(t=0;t<n.length;t++)i.push({Id:n[t]});r={Id:$("#devicetype_id").val(),Name:$("#devicetype_name").val(),PosOrderTypes:i};LoadingOverlay();$.ajax({type:"post",url:"/PointOfSale/SaveDeviceType",datatype:"json",data:{deviceType:r},success:function(n){CallBackFilterPosDeviceTypeServeSide();n.actionVal==1?(cleanBookNotification.createSuccess(),$("#app-trader-pos-device-type-addedit").modal("toggle")):n.actionVal==2?(cleanBookNotification.updateSuccess(),$("#app-trader-pos-device-type-addedit").modal("toggle")):n.actionVal==4?$("#devicetype_form").validate().showErrors({devicename:n.msg}):(cleanBookNotification.error(_L("ERROR_MSG_380",[n.msg]),"Qbicles"),console.log(n.msg))},error:function(n){cleanBookNotification.error(n.responseText,"Qbicles")}}).always(function(){LoadingOverlayEnd()})}}function deleteDeviceType(n){LoadingOverlay();$.ajax({type:"delete",url:"/PointOfSale/DeletePosDeviceType?id="+n,datatype:"json",success:function(n){n.actionVal===1?(cleanBookNotification.removeSuccess(),CallBackFilterPosDeviceTypeServeSide()):cleanBookNotification.error(_L("ERROR_MSG_380",[n.msg]),"Qbicles")},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}}).always(function(){LoadingOverlayEnd()})}var delayTimer;