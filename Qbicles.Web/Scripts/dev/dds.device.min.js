function SearchDevice(){if($("#device-search").val().length>3||$("#device-search").val().length===0){var n="/DDS/DdsDevicesSearch?name="+$("#device-search").val()+"&ddsQueueId="+$("#device-queue-search").val();AjaxElementLoad(n,"device-list")}}function SaveDdsDevice(){var n,t,i,r;if($("#device-form").valid()){if($.LoadingOverlay("show"),n=$("#device-id").val(),t=$("#device-admin").val(),t===null||t===0){$("#device-form").validate().showErrors({deviceadmin:"There must be at least one Administrator selected."});LoadingOverlayEnd();return}i="/DDS/CreateDdsDevice?adminIds="+t+"&userIds="+$("#device-user").val();n>0&&(i="/DDS/UpdateDdsDevice?adminIds="+t+"&userIds="+$("#device-user").val());r={Id:n,Name:$("#device-name").val(),Type:{Id:$("#ods-device-type").val()},Queue:{Id:$("#device-queue").val()}};$.ajax({url:i,type:"post",dataType:"json",data:{device:r},success:function(t){if(!t.result){t.actionVal===9?$("#device-form").validate().showErrors({devicename:t.msg}):cleanBookNotification.error(t.msg,"Qbicles");return}n>0?($("#device-name-main-"+n).text(r.Name),$("#device-type-main-"+n).text($("#ods-device-type option:selected").text()),$("#device-queue-main-"+n).text($("#device-queue option:selected").text()),$("#device-admin-name-"+n).text($("#device-admin option:selected").toArray().map(n=>n.text).join()),$("#device-user-name-"+n).text($("#device-admin option:selected").toArray().map(n=>n.text).join()),cleanBookNotification.updateSuccess()):($("#device-list").append(t.msg),cleanBookNotification.createSuccess());$("#app-trader-dds-device-add-edit").modal("hide")},error:function(n){cleanBookNotification.error(n,"Qbicles")}}).always(function(){LoadingOverlayEnd()})}}function ConfirmDeleteDevice(n){$deviceIdDelete=n;$("#name-delete").text($("#device-name-main-"+$deviceIdDelete).text());$("#confirm-delete").modal("show")}function CancelDelete(){$("#confirm-delete").modal("hide")}function DeleteDds(){$.LoadingOverlay("show");$.ajax({type:"delete",url:"/DDS/DeleteDdsDevice",data:{id:$deviceIdDelete},dataType:"json",success:function(n){n.result?($("#dds-device-item-"+$deviceIdDelete).remove(),cleanBookNotification.removeSuccess(),$("#confirm-delete").modal("hide")):cleanBookNotification.error(n.msg,"Qbicles")},error:function(n){cleanBookNotification.error("Have an error delete device, detail: "+n.error,"Qbicles")}}).always(function(){LoadingOverlayEnd()})}DdsDeviceAddEdit=function(n){var t="/DDS/DdsDeviceAddEdit?id="+n;AjaxElementShowModal(t,"app-trader-dds-device-add-edit")};var $deviceIdDelete=0;