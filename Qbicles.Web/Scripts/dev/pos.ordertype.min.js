function LoadTableDataPosOrderType(n,t,i,r){r||(r=1);$("#"+n).on("processing.dt",function(n,t,i){$("#processingIndicator").css("display","none");i&&$(".loadingoverlay").length===0?$(n.currentTarget).LoadingOverlay("show"):$(n.currentTarget).LoadingOverlay("hide",!0)}).DataTable({destroy:!0,dom:'<"top"fl<"clear">>rt<"bottomtable"ip<"clear">>',language:{infoFiltered:""},serverSide:!0,info:!0,stateSave:!1,bLengthChange:!0,paging:!0,searching:!1,responsive:!0,scrollX:!1,autoWidth:!0,deferLoading:30,lengthMenu:[[10,20,50,100],[10,20,50,100]],pageLength:10,ajax:{url:t,type:"GET",dataType:"json",data:function(n){return $.extend({},n,{keyword:$("#order_type_search").val()})}},columns:i,order:[[r,"asc"]]})}function LoadDataByServerSide(){var n=[{name:"Name",data:"Name",orderable:!0},{name:"Classification",data:"Classification",orderable:!0},{name:"Summary",data:"Summary",orderable:!0},{data:null,orderable:!1,width:"100px",render:function(n,t,i){var r="";return r+='<button class="btn btn-warning" style="margin-right: 10px;" data-toggle="modal" data-target="#app-trader-pos-order-type-addedit" onclick="addEditPosOrderType('+i.Id+')"><i class="fa fa-pencil"><\/i><\/button>',r+(i.IsUse?'<button class="btn btn-danger" disabled onclick="deleteOrderType('+i.Id+')"><i class="fa fa-trash"><\/i><\/button>':'<button class="btn btn-danger" onclick="deleteOrderType('+i.Id+')"><i class="fa fa-trash"><\/i><\/button>')}}];LoadTableDataPosOrderType("community-list","/PointOfSale/TraderPosOrderTypetDataTable",n,0);CallBackFilterPosOrderTypeServeSide()}function CallBackFilterPosOrderTypeServeSide(){$("#community-list").DataTable().ajax.reload()}function searchKeyWork(){clearTimeout(delayTimer);delayTimer=setTimeout(function(){CallBackFilterPosOrderTypeServeSide()},1500)}function addEditPosOrderType(n){LoadingOverlay();$("#app-trader-pos-order-type-addedit").load("/PointOfSale/AddEditOrderType?id="+n,function(){LoadingOverlayEnd()})}function saveOrderType(){if($("#ordertype_form").valid()){var n={Id:$("#ordertype_id").val(),Name:$("#ordertype_name").val(),Summary:$("#ordertype_summary").val(),Classification:$("#ordertype_class").val()};LoadingOverlay();$.ajax({type:"post",url:"/PointOfSale/SaveOrderType",datatype:"json",data:{orderType:n},success:function(n){CallBackFilterPosOrderTypeServeSide();n.actionVal==1?(cleanBookNotification.createSuccess(),$("#app-trader-pos-order-type-addedit").modal("toggle")):n.actionVal==2?(cleanBookNotification.updateSuccess(),$("#app-trader-pos-order-type-addedit").modal("toggle")):n.actionVal==4?$("#ordertype_form").validate().showErrors({name:n.msg}):(cleanBookNotification.error(_L("ERROR_MSG_380",[n.msg]),"Qbicles"),console.log(n.msg))},error:function(n){cleanBookNotification.error(n.responseText,"Qbicles")}}).always(function(){LoadingOverlayEnd()})}}function deleteOrderType(n){LoadingOverlay();$.ajax({type:"delete",url:"/PointOfSale/DeletePosOrderType?id="+n,datatype:"json",success:function(n){n.actionVal===1?(cleanBookNotification.removeSuccess(),CallBackFilterPosOrderTypeServeSide()):cleanBookNotification.error(_L("ERROR_MSG_290"),"Qbicles")},error:function(){cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}}).always(function(){LoadingOverlayEnd()})}var delayTimer;