function setDefaulFilterAss(){}function addEditManufacturing(n,t){n||(n=0);t||(t=0);$("#app-trader-inventory-manufacturing").LoadingOverlay("show");$("#app-trader-inventory-manufacturing").empty();$("#app-trader-inventory-manufacturing").load("/Manufacturing/AddEdit?id="+n+"&locationId="+$("#local-manage-select").val()+"&itemId="+t,function(){$("#app-trader-inventory-manufacturing").LoadingOverlay("hide")})}function addEditManufacturingSpecific(n){n||(n=0);$("#app-trader-inventory-manufacturing-specific").LoadingOverlay("show");$("#app-trader-inventory-manufacturing-specific").empty();$("#app-trader-inventory-manufacturing-specific").load("/Manufacturing/AddEditSpecific?id="+n,function(){$("#app-trader-inventory-manufacturing-specific").LoadingOverlay("hide")})}function manuJobViewer(n){n||(n=0);$("#app-trader-inventory-recipe-view").LoadingOverlay("show");$("#app-trader-inventory-recipe-view").empty();$("#app-trader-inventory-recipe-view").load("/Manufacturing/ManujobViewer?id="+n,function(){$("#app-trader-inventory-recipe-view").LoadingOverlay("hide")})}function showTableManujob(){$("#assembledlist").LoadingOverlay("show");$("#assembledlist").empty();$("#assembledlist").load("/Manufacturing/ShowTableManuJob?locationId="+$("#local-manage-select").val(),function(){$("#assembledlist").LoadingOverlay("hide");assembledlistSearch()})}function showTableManujobAvailable(){$("#itemlist").LoadingOverlay("show");$(".manage-columns-available").removeClass("manage-columns");$("#itemlist").empty();$("#itemlist").load("/Manufacturing/ShowTableManuJoAvailable?locationId="+$("#local-manage-select").val(),function(){$("#itemlist").LoadingOverlay("hide")})}function showTraderGroupItems(){var n=$("select[name=workgroup]").val(),t=$("#local-manage-select").val(),i={workGroupId:n,locationId:t};initSelect2MethodAJAX("tradergroupitem","/Select2Data/GetGroupedTraderItemsByWG",i,!1)}function unitOnchange(){$("#manu-2").empty();$("#manu-2").load("/Manufacturing/ShowManujobByUnit?unitId="+$("#unit_selected").val()+"&locationId="+$("#local-manage-select").val(),function(){$("#manu-2").LoadingOverlay("hide")});$("#unit_selected-error").remove()}function loadUnit(){var t,n;if($("#unit_selected").empty(),$("#unit_selected").val(""),unitsSlected&&unitsSlected.length>0){for(t="",n=0;n<unitsSlected.length;n++)t+=$("#manu_unit").val()==unitsSlected[n].Id?'<option selected value="'+unitsSlected[n].Id+'">'+unitsSlected[n].Name+"<\/option>":'<option value="'+unitsSlected[n].Id+'">'+unitsSlected[n].Name+"<\/option>";$("#unit_selected").append(t);$("#unit_selected").not(".multi-select").select2()}else $("#unit_selected").not(".multi-select").select2();unitOnchange()}function traderGroupOnChange(){var n=$("#tradergroupitem").val();n!=""?($("#manu_item_product").empty(),$("#manu_item_product").load("/Manufacturing/GetTraderItem?itemId="+n+"&locationid="+$("#local-manage-select").val(),function(){$("#tradergroupitem").val()===null||$("#tradergroupitem").val()===""?$(".item-info").hide():$(".item-info").show();loadUnit()})):$(".item-info").hide();$("#tradergroupitem-error").remove()}function WorkGroupSelectedChange(){$workgroupId=$("#trader_workgroup_select").val();showTraderGroupItems();$workgroupId!==""?($.LoadingOverlay("show"),$.ajax({type:"get",url:"/TraderTransfers/getworkgroup?id="+$workgroupId,dataType:"json",success:function(n){LoadingOverlayEnd();$(".preview-workgroup").show();n.result?($(".preview-workgroup table tr td.location_name").text(n.Object.Location),$(".preview-workgroup table tr td.workgroup_process").text(n.Object.Process),$(".preview-workgroup table tr td.workgroup_qbicle").text(n.Object.Qbicle),$(".preview-workgroup table tr td.workgroup_member span").text(n.Object.Members)):($(".preview-workgroup table tr td.location_name").text(""),$(".preview-workgroup table tr td.workgroup_process").text(""),$(".preview-workgroup table tr td.workgroup_qbicle").text(""),$(".preview-workgroup table tr td.workgroup_member span").text(""));$("#trader_workgroup_select-error").remove()},error:function(){LoadingOverlayEnd();cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}})):$(".preview-workgroup").hide()}function ShowGroupMember(){$("#app-trader-workgroup-preview").empty();$("#app-trader-workgroup-preview").load("/TraderTransfers/ShowListMemberForWorkGroup?wgId="+$("#trader_workgroup_select").val());$("#app-trader-workgroup-preview").modal("toggle")}function validateForm(){var n=!0;return $("#manu_quantity-error").remove(),$("#unit_selected-error").remove(),$("#tradergroupitem-error").remove(),$("#trader_workgroup_select-error").remove(),$("#manu_quantity-error").remove(),($("#unit_selected").val()==null||$("#unit_selected").val()==="")&&(n=!1,$("#form_item").validate().showErrors({unit_select:"Unit is required."})),($("#tradergroupitem").val()==null||$("#tradergroupitem").val()==="")&&(n=!1,$("#form_item").validate().showErrors({item_select:"Item is required."})),($("#trader_workgroup_select").val()===null||$("#trader_workgroup_select").val()==="")&&(n=!1,$("#form_workgroup").validate().showErrors({workgroup:"Work group is required."})),($("#manu_quantity").val()==null||$("#manu_quantity").val()==""||$("#manu_quantity").val().length>15)&&(n=!1,$("#form_item").validate().showErrors({manu:"Please enter a quantity to assemble."})),n}function saveManuJob(){var t,i;if(validateForm()){$.LoadingOverlay("show");var n=$("#manujob_recipe_id").val(),r=$("#table_recipe_ingredients tbody tr"),u=$("#table_recipe_ingredients tbody tr td");if(n=="0"||n=="")return cleanBookNotification.error(_L("ERROR_MSG_633"),"Qbicles"),!1;t={Id:$("#reference_id").val(),NumericPart:parseFloat($("#refedit").text()),Type:$("#reference_type").val(),Prefix:$("#reference_prefix").val(),Suffix:$("#reference_suffix").val(),Delimeter:$("#reference_delimeter").val(),FullRef:$("#reference_fullref").val()};i={Id:$("#tradersale_form_id").val(),AssemblyUnit:{Id:$("#unit_selected").val()},WorkGroup:{Id:$("#trader_workgroup_select").val()},Product:{Id:$("#tradergroupitem").val()},Quantity:$("#manu_quantity").val(),Location:{Id:$("#local-manage-select").val()},Status:"Pending",SelectedRecipe:{Id:$("#manu_recipe").val()},Reference:t};$.ajax({type:"post",url:"/Manufacturing/SaveManujob",data:{manujob:i},dataType:"json",success:function(n){LoadingOverlayEnd();n.actionVal===1?($("#app-trader-inventory-manufacturing").modal("toggle"),cleanBookNotification.createSuccess(),showTableManujob()):n.actionVal===2?($("#app-trader-inventory-manufacturing").modal("toggle"),cleanBookNotification.updateSuccess(),showTableManujob()):n.actionVal===3&&cleanBookNotification.error(n.msg,"Qbicles")},error:function(){$.LoadingOverlay("hide");cleanBookNotification.error(_L("ERROR_MSG_EXCEPTION_SYSTEM"),"Qbicles")}})}}function ShowTableManufacturingValue(){$("#manufacring_content").LoadingOverlay("show");$("#manufacring_content").load("/Manufacturing/GetManufacturingTab",function(){$("#manufacring_content").LoadingOverlay("hide")})}function ManufacturingHistoryViewer(n){var t="/Manufacturing/ManufacturingHistoryViewer?id="+n;AjaxElementShowModal(t,"compound-item-history");return}var unitsSlected=[],itemIdSelectedAddEdit=0,filter={Ass:{Group:" ",Key:""},Avai:{Workgroup:" ",Key:""}};$(function(){ShowTableManufacturingValue()});