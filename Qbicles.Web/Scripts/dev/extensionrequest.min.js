function rejectSingleRequest(n,t,i,r){var u="/DomainExtension/GetExtensionRequestById?requestId="+n;$.ajax({method:"GET",dataType:"JSON",url:u}).done(function(u){if(u.result==!1){cleanBookNotification.error(u.msg,"Qbicles");return}var e=u.Object,o=e.DomainName,s=e.TypeName,f=$("#reject-reason-modal");$("#reject-reason").val("");f.find(".modal-body p").html("You're about to reject <strong>"+o+"'s<\/strong> request to post <strong>"+s+" Highlights<\/strong>. You can optionally provide a covering note to explain why.");f.find('button[type="submit"]').attr("onClick","ProcessExtensionRequest("+n+", '"+t+"', "+i+", "+r+")");f.modal("show")})}function rejectMultipleRequest(){var t=$("#pending-extensionrequest-list input:checked").length,n=$("#reject-reason-modal");$("#reject-reason").val("");n.find(".modal-body p").html("You're about to reject <strong> all "+t+" selected<\/strong> requests.You can optionally provide a covering note to explain why.");n.find('button[type="submit"]').attr("onClick","ProcessMultipleExtensionRequest(4)");n.modal("show")}function ProcessExtensionRequest(n,t,i,r){LoadingOverlay();$.ajax({method:"POST",dataType:"JSON",url:"/DomainExtension/ChangeExtensionRequestStatus",data:{requestId:n,domainKey:t,type:i,status:r,note:$("#reject-reason").val()},success:function(n){n.result?($("#pending-extensionrequest-list").DataTable().ajax.reload(),$("#history-extensionrequest-list").DataTable().ajax.reload(),$("#reject-reason").val(""),cleanBookNotification.updateSuccess(),LoadingOverlayEnd()):(cleanBookNotification.error(n.msg,"Qbicles"),LoadingOverlayEnd())},error:function(n){LoadingOverlayEnd();$("#reject-reason").val("");cleanBookNotification.error(n.msg,"Qbicles")}})}function ProcessMultipleExtensionRequest(n){var t,i;LoadingOverlay();t=[];$("#pending-extensionrequest-list input:checked").each(function(){t.push($(this).attr("requestid"))});i="/DomainExtension/UpdateMultipleExtensionRequestStatus";$.ajax({method:"POST",dataType:"JSON",url:i,data:{lstRequestIds:t,status:n,note:$("#reject-reason").val()},success:function(n){n.result?(cleanBookNotification.updateSuccess(),$("#pending-extensionrequest-list").DataTable().ajax.reload(),$("#history-extensionrequest-list").DataTable().ajax.reload(),$(".withselected").fadeOut()):cleanBookNotification.error(n.msg,"Qbicles")},error:function(n){cleanBookNotification.error(n.msg,"Qbicles")}});LoadingOverlayEnd()}initAdminPendingExtensionRequestTable=function(){var n=$("#pending-extensionrequest-list").on("processing.dt",function(n,t,i){$("#processingIndicator").css("display","none");i?$("#pending-extensionrequest-list").LoadingOverlay("show"):$("#pending-extensionrequest-list").LoadingOverlay("hide",!0)}).DataTable({destroy:!0,serverSide:!0,paging:!0,searching:!1,responsive:!0,lengthMenu:[[10,20,50,100],[10,20,50,100]],pageLength:10,drawCallback:function(){$(".withselected").fadeOut()},ajax:{url:"/DomainExtension/LoadExtensionRequestTableContent",type:"POST",data:function(n){return $.extend({},n,{keySearch:$("#pending-key").val(),createdUserIdSearch:$("#pending-creator").val(),dateRange:$("#pending-daterange").val(),extensionTypeSearch:$("#pending-type").val(),lstRequestStatusSearch:[2],domainKey:""})}},columns:[{data:"requestId",orderable:!1,render:function(n,t,i){var r=i.RequestId;return""+('<input type="checkbox" requestId="'+r+"\" style=\"position: relative; top: 0;\" onclick=\"if($('#pending-extensionrequest-list input:checked').length > 0){$('.withselected').fadeIn();}else{$('.withselected').fadeOut();};\">")}},{data:"RequestedDate",orderable:!0},{data:"RequestedByName",orderable:!0,render:function(n,t,i){var u=i.RequestedByName,f=i.RequestedByLogoUri,e=i.RequestById,r="";return r+='<a href="/Community/UserProfilePage?uId='+e+'">',r+='<div class="table-avatar mini pull-left" style="background-image: url(\''+f+"');\"><\/div>",r+='<div class="avatar-name pull-left" style="color: #333; line-height: 4; padding-left: 15px;">'+u+"<\/div>",r+'<div class="clearfix"><\/div><\/a>'}},{data:"DomainName",orderable:!0},{data:"TypeName",orderable:!0,render:function(n,t,i){var r="";return r+='<label class="label label-lg label-info">Highlights<\/label>',r+("&nbsp; "+i.TypeName+"<\/td>")}},{orderable:!1,render:function(n,t,i){var r="",u=i.RequestId,f=i.DomainKey,e=i.Type,o=i.TypeName,s=i.DomainName;return r+='<div class="btn-group">',r+='<button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">',r+='Actions &nbsp; <i class="fa fa-angle-down"><\/i>',r+="<\/button>",r+='<ul class="dropdown-menu dropdown-menu-right primary">',r+='<li><a href="#app-mbm-admin-transfers" onclick="ProcessExtensionRequest('+u+", '"+f+"',"+e+', 3)" data-toggle="modal">Approve<\/a><\/li>',r+='<li><a href="#" onclick="rejectSingleRequest('+u+", '"+f+"',"+e+', 4)">Reject<\/a><\/li>',r+="<\/ul>",r+"<\/div>"}}]})};initAdminHistoryExtensionRequestTable=function(){var n=$("#history-extensionrequest-list").on("processing.dt",function(n,t,i){$("#processingIndicator").css("display","none");i?$("#history-extensionrequest-list").LoadingOverlay("show"):$("#history-extensionrequest-list").LoadingOverlay("hide",!0)}).DataTable({destroy:!0,serverSide:!0,paging:!0,searching:!1,responsive:!0,lengthMenu:[[10,20,50,100],[10,20,50,100]],pageLength:10,ajax:{url:"/DomainExtension/LoadExtensionRequestTableContent",type:"POST",data:function(n){return $.extend({},n,{keySearch:$("#history-key").val(),createdUserIdSearch:$("#history-creator").val(),dateRange:$("#history-daterange").val(),extensionTypeSearch:$("#history-type").val(),lstRequestStatusSearch:[3,4],domainKey:""})}},columns:[{data:"RequestedDate",orderable:!0},{data:"RequestedByName",orderable:!0,render:function(n,t,i){var u=i.RequestedByName,f=i.RequestedByLogoUri,e=i.RequestById,r="";return r+='<a href="/Community/UserProfilePage?uId='+e+'">',r+='<div class="table-avatar mini pull-left" style="background-image: url(\''+f+"');\"><\/div>",r+='<div class="avatar-name pull-left" style="color: #333; line-height: 4; padding-left: 15px;">'+u+"<\/div>",r+'<div class="clearfix"><\/div><\/a>'}},{data:"DomainName",orderable:!0},{data:"TypeName",orderable:!0,render:function(n,t,i){var r="";return r+='<label class="label label-lg label-info">Highlights<\/label>',r+("&nbsp; "+i.TypeName+"<\/td>")}},{data:"Status",orderable:!0,render:function(n,t,i){return i.StatusLabel}},{data:"Note",orderable:!0}]})};