@using Qbicles.Models;
@using Qbicles.BusinessRules;
@using Qbicles.BusinessRules.Helper;
@using Qbicles.BusinessRules.Model;
@using Qbicles.Models.B2C_C2C;
@{
    Layout = null;
    ViewBag.Title = $"Qbicles | Business Creation";
    var lstDomainPlanLevels = (List<BusinessDomainLevel>)ViewBag.ListPlanLevels;
    var lstVisiblePlanLevels = lstDomainPlanLevels.Where(p => p.IsVisible).ToList();
    var standardPlanLevel = lstDomainPlanLevels.FirstOrDefault(p => p.Level == BusinessDomainLevelEnum.Standard);

    var hasError = ViewBag.HasError != null ? (bool)ViewBag.HasError : false;
    var errorMessage = ViewBag.ErrorMsg != null ? (string)ViewBag.ErrorMsg : "";
    var domain = (QbicleDomain)ViewBag.Domain ?? null;
    var isDomainCreated = domain != null;
    var isTransactionCallBack = ViewBag.IsTransactionCallBack != null ? (bool)ViewBag.IsTransactionCallBack : false;

    var domainPlan = (DomainPlan)ViewBag.DomainPlan;
    var isTransactionCancelled = ViewBag.IsTransactionCancelled != null ? (bool)ViewBag.IsTransactionCancelled : false;

    var domainRequest = (QbicleDomainRequest)ViewBag.DomainRequest ?? null;

    var selectedDomainLevelAsNumber = (domainPlan?.Level) == null ? 1 : ((int)domainPlan?.Level?.Level);

    var lstBanks = (List<PaystackBankModel>)ViewBag.ListBanks ?? new List<PaystackBankModel>();

    var b2cOrderCharge = (B2COrderPaymentCharges)ViewBag.B2COrderCharge ?? null;
}
<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Qbicles | Business Creation</title>

    <link rel="shortcut icon" type="image/x-icon" href="/Content/DesignStyle/img/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="~/Content/DesignStyle/img/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="~/Content/DesignStyle/img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="~/Content/DesignStyle/img/favicon-16x16.png">

    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">

    @Styles.Render("~/Content/qbiclescss")

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.1.24.min.js"></script>
    <script src="~/Scripts/dev/s3.upload.medial.js"></script>
    <script>
        var $s3BucketName = '@ViewBag.S3BucketName';
        var $s3BucketRegion = '@ViewBag.S3BucketRegion';
        var $s3IdentityPoolId = '@ViewBag.S3IdentityPoolId';
    </script>

</head>

<body>
    @*<input type="hidden" id="domain-request-id" value="0" />
        <input type="hidden" id="cost-per-additional-user-entry" value="@(lstDomainPlanLevels.FirstOrDefault(p => p.Level == BusinessDomainLevelEnum.Standard).CostPerAdditionalUser)" />
        <input type="hidden" id="default-cost-entry" value="@(lstDomainPlanLevels.FirstOrDefault(p => p.Level == BusinessDomainLevelEnum.Standard).Cost)" />
        <input type="hidden" id="domain-created-key" value="@(domain?.Key ?? "")" />*@

    <input type="hidden" id="domain-request-id" value="@(domainRequest?.Id ?? 0)" />
    <input type="hidden" id="domain-created-key" value="@(domain?.Key ?? "")" />
    <button class="hidden" onclick="LoadingOverlay()" id="start-loading-overlay-btn"></button>
    <button class="hidden" onclick="LoadingOverlayEnd()" id="stop-loading-overlay-btn"></button>
    <button class="hidden" onclick="cleanBookNotification.error('Something went wrong. Please contact to the administrators.', 'Qbicles')" id="exception-btn"></button>


    @foreach (var visiblePlanLevelItem in lstVisiblePlanLevels)
    {
        <input type="hidden" id="cost-per-additional-user-@visiblePlanLevelItem.Level" value="@visiblePlanLevelItem.CostPerAdditionalUser" />
        <input type="hidden" id="plan-cost-@visiblePlanLevelItem" value="@visiblePlanLevelItem.Cost" />
    }


    <a href="/Domain" class="btn btn-danger community-button sm w-auto animated fadeIn" style="position: absolute; top: 20px; right: 20px; z-index: 1000;">Cancel</a>

    <div class="wizard-full">

        <div class="helper contained-sidebar">

            <div>
                <div id="avatar" style="margin-top: 100px; background-image: url('@Url.Content("~/Content/DesignStyle/img/icon_app_commerce.png")');">&nbsp;</div>
                <h1>Add a Business Domain</h1>
                <br /><br />



                <ul class="nav nav-pills nav-stacked wizardtabs business text-left" style="margin-bottom: 10px;">
                    <li id="tab1link" class="active"><a href="#">Availability checker <i class="fa fa-check" style="display: none;"></i></a></li>
                    <li id="tab2link"><a href="#">Choose a plan <i class="fa fa-check" style="display: none;"></i></a></li>
                    <li id="tab3link"><a href="#">Domain specifics <i class="fa fa-check" style="display: none;"></i></a></li>
                    <li id="tabxlink"><a href="#">Receive payments <i class="fa fa-check" style="display: none;"></i></a></li>
                    <li id="tab5link"><a href="#">Payment <i class="fa fa-check" style="display: none;"></i></a></li>
                    <li id="callback"><a href="#">Done</a></li>

                    <!--
                    <li><a href="wizard-business--network.php">Network &amp; online presence</a></li>
                    <li><a href="wizard-business--verify.php">Verify your Domain</a></li>
                    -->
                </ul>

                <!--
                <br /><br /><br />
                <h5>Trading setup completion</h5>
                <br />
                <div class="stat" style="margin-bottom: 50px;"></div>
                -->

            </div>

        </div>

        <div class="tab-content wizard-steps" style="display: block; padding-top: 80px;">



            <!-- Step 1 -->
            @{
                // isDomainCreated: Show Done Step
                // isTransactionCallBack + !isDomainCreated: Show Payment Step
                var tab1Classes = !isDomainCreated && !isTransactionCallBack ? "in active" : "";
            }
            <div class="tab-pane fade @tab1Classes" id="tab1">


                <div class="wizard-form bness">

                    <div style="width: 800px; max-width: 100%; margin: 100px auto 0 auto;">

                        <div class="mod_title">
                            <h4>Availability checker</h4>
                            <h5>Your Domain name will also be used as your business name in Qbicles. Domain names can <strong>not</strong> be changed once active, so please type carefully!</h5>
                        </div>

                        <br />
                        <div class="row countrychoice">
                            <div class="col-xs-12">
                                <div class="form-group avatarpicker animated fadeIn">
                                    <input type="text" class="form-control input-lg" id="domain-name" value="@(domainRequest == null ? "" : domainRequest.RequestedName)"
                                           maxlength="45" placeholder="Your business name here" style="font-size: 22px !important; padding: 50px 50px 50px 15px !important;">
                                    <img src="/Content/DesignStyle/img/loading.gif" id="checking" style="display: none; height: 25px; width: auto; position: absolute; bottom: 57px; right: 20px;">
                                </div>
                            </div>
                        </div>

                        <div class="alert alert-qb text-center animated fadeIn unsupported" id="result" style="display: none; padding: 50px !important; margin: 15px auto 0 auto;">
                            <img src="/Content/DesignStyle/img/icon_approval.png" style="width: 140px; height: auto; margin-bottom: 30px;">
                            <h4 style="margin-bottom: 20px;">This name is available!</h4>
                            <p style="max-width: 80%; margin: 0 auto !important;">
                                If you're happy with this name, hit the button below to proceed and we'll temporarily reserve the name for you.
                                We will automatically free the name up if you don't complete this process within <strong>30 minutes</strong>, and the name cannot be changed once confirmed.
                            </p>

                            <br><br>
                            <a href="javascript:void(0)"
                               onclick="reserveDomainRequestName(this)"
                               class="btn btn-success community-button w-auto">
                                Secure this Domain name &nbsp; <i class="fa fa-angle-right"></i>
                            </a>
                            <button id="tab2-toggle-btn" data-target="#tab2" data-toggle="tab" class="hidden"></button>
                        </div>

                    </div>

                </div>

            </div>
            <!-- END Step 1 -->
            <!-- Step 2 -->
            <div class="tab-pane fade" id="tab2">

                <div class="wizard-form bness animated fadeIn">

                    <div class="mod_title">
                        <h5>Choose a plan</h5>
                        <h4>Select the plan you require below to proceed...</h4>
                    </div>
                    <br /><br />


                          <div id="planselect">

                              <div class="flex-grid-half-lg gridfix pricing addbusiness">

                                  @foreach (var planLevelItem in lstVisiblePlanLevels)
                                  {
                                      <div class="col activity-overview plain shadowed rounded" style="padding: 5px;">
                                          <div class="card-body">
                                              <h5 class="card-title text-muted text-uppercase text-center">Business @(planLevelItem.Level.ToString())</h5>
                                              <h6 class="card-price text-center">@(planLevelItem.Cost == null || planLevelItem.Cost == 0 ? "Free" : $"{(planLevelItem.Cost ?? 0).ToDecimalPlace(0)}{planLevelItem.Currency}/mth")</h6>

                                              <div class="planinfo">
                                                  <p>@(planLevelItem.Description)</p>
                                              </div>

                                              <br>
                                              <div class="row">
                                                  <div class="col-xs-12 text-center">
                                                      <a href="#" class="btn community-button btn-success w-auto"
                                                         onclick="changeRequestPlan(@((int)planLevelItem.Level))">Choose plan</a>
                                                      <a href="#breakdown" class="btn btn-info community-button w-auto">Learn more</a>
                                                  </div>
                                              </div>
                                          </div>
                                      </div>
                                  }
                                  <a href="#" id="show-tab3-btn" data-toggle="tab" data-target="#tab3" class="hidden btn community-button btn-success"></a>

                              </div>


                              <br /><br />

                              <div class="activity-overview generic help-text">
                                  <i class="fa fa-info-circle"></i>
                                  <p>
                                      All of our free trials offer 14 days unrestricted access to the plan of your choosing. You will be automatically billed
                                      14 days from the beginning of your trial unless you cancel during the trial period.
                                  </p>
                              </div>

                              <a id="breakdown"></a>
                              <div class="table-responsive">
                                  <table class="pricingtable table" data-tooltip-stickto="top" data-tooltip-color="teal" data-tooltip-max-width="200" data-tooltip-delay="0">
                                      <thead>
                                          <tr>
                                              <th>&nbsp;</th>
                                              <th class="text-center" style="width: 15%;">Free</th>
                                              <th class="text-center" style="width: 15%;">Business starter</th>
                                              <th class="text-center" style="width: 15%;">Business standard</th>
                                              <th class="text-center" style="width: 15%;">Business expert</th>
                                          </tr>
                                      </thead>
                                      <tbody>
                                          <tr>
                                              <td>Profile</td>
                                              <td class="text-center"><i class="fa fa-check green"></i></td>
                                              <td class="text-center"><i class="fa fa-check green"></i></td>
                                              <td class="text-center"><i class="fa fa-check green"></i></td>
                                              <td class="text-center"><i class="fa fa-check green"></i></td>
                                          </tr>
                                          <tr>
                                              <td>Catalogues</td>
                                              <td class="text-center"><i class="fa fa-check green"></i></td>
                                              <td class="text-center"><i class="fa fa-check green"></i></td>
                                              <td class="text-center"><i class="fa fa-check green"></i></td>
                                              <td class="text-center"><i class="fa fa-check green"></i></td>
                                          </tr>
                                          <tr>
                                              <td>Social loyalty &amp; promotions</td>
                                              <td class="text-center"><i class="fa fa-check green"></i></td>
                                              <td class="text-center"><i class="fa fa-check green"></i></td>
                                              <td class="text-center"><i class="fa fa-check green"></i></td>
                                              <td class="text-center"><i class="fa fa-check green"></i></td>
                                          </tr>
                                          <tr>
                                              <td>Maximum users</td>
                                              <td class="text-center">1</td>
                                              <td class="text-center">3</td>
                                              <td class="text-center">5</td>
                                              <td class="text-center">5</td>
                                          </tr>
                                          <tr>
                                              <td>B2C trading</td>
                                              <td class="text-center"><i class="fa fa-remove red"></i></td>
                                              <td class="text-center"><i class="fa fa-check green"></i></td>
                                              <td class="text-center"><i class="fa fa-check green"></i></td>
                                              <td class="text-center"><i class="fa fa-check green"></i></td>
                                          </tr>
                                          <tr>
                                              <td>B2B trading</td>
                                              <td class="text-center"><i class="fa fa-remove red"></i></td>
                                              <td class="text-center"><i class="fa fa-remove red"></i></td>
                                              <td class="text-center"><i class="fa fa-check green"></i></td>
                                              <td class="text-center"><i class="fa fa-check green"></i></td>
                                          </tr>
                                          <tr>
                                              <td>Reports</td>
                                              <td class="text-center">None</td>
                                              <td class="text-center"><span class="moreinfo" data-tooltip="Basic Sales Reports, Inventory Reports (need to be designed for mobile)">Basic</span></td>
                                              <td class="text-center"><span class="moreinfo" data-tooltip="Basic Sales Reports, Inventory Reports (need to be designed for mobile)">Basic</span></td>
                                              <td class="text-center"><span class="moreinfo" data-tooltip="Sales, Inventory, Movement, etc.">Expanded</span></td>
                                          </tr>
                                          <tr>
                                              <td>Bolt-on support</td>
                                              <td class="text-center"><i class="fa fa-remove red"></i></td>
                                              <td class="text-center"><i class="fa fa-remove red"></i></td>
                                              <td class="text-center"><i class="fa fa-check green"></i></td>
                                              <td class="text-center"><i class="fa fa-check green"></i></td>
                                          </tr>
                                          <tr>
                                              <td>Order &amp; delivery management</td>
                                              <td class="text-center"><i class="fa fa-remove red"></i></td>
                                              <td class="text-center"><i class="fa fa-remove red"></i></td>
                                              <td class="text-center"><i class="fa fa-check green"></i></td>
                                              <td class="text-center"><i class="fa fa-check green"></i></td>
                                          </tr>
                                          <tr>
                                              <td>Number of transactions</td>
                                              <td class="text-center">N/A</td>
                                              <td class="text-center">--</td>
                                              <td class="text-center">--</td>
                                              <td class="text-center">--</td>
                                          </tr>
                                          <tr>
                                              <td>Number of devices</td>
                                              <td class="text-center">N/A</td>
                                              <td class="text-center">N/A</td>
                                              <td class="text-center">N/A</td>
                                              <td class="text-center">--</td>
                                          </tr>
                                          <tr>
                                              <td>Number of locations</td>
                                              <td class="text-center">1</td>
                                              <td class="text-center">1</td>
                                              <td class="text-center">1</td>
                                              <td class="text-center">3</td>
                                          </tr>
                                          <tr>
                                              <td style="background: transparent;"></td>
                                              <td style="background: transparent;">
                                                  <a href="#" data-toggle="tab" data-target="#tab3" class="btn community-button btn-success w-auto"
                                                     onclick="$('#tab5link').hide(); $('#paid').hide(); $('#free').show(); recount(); $('#paidplanchosen').hide(); $('#tab2link').addClass('done').removeClass('active'); $('#tab2link a i').show(); $('#tab3link').addClass('active');">Get started</a>
                                              </td>
                                              <td style="background: transparent;"><a href="#" class="btn community-button btn-success w-auto" onclick="changeRequestPlan(2)">Free trial</a></td>

                                              <td style="background: transparent;"><a href="#" class="btn community-button btn-success w-auto">Free trial</a></td>
                                              <td style="background: transparent;"><a href="#" class="btn community-button btn-success w-auto">Free trial</a></td>
                                          </tr>
                                      </tbody>
                                  </table>
                              </div>

                          </div>



                    <!-- Plan chosen -->
                    <div class="row pricing addbusiness" id="paidplanchosen" style="display: none;">
                        <div class="col-xs-12 col-md-5">

                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title text-muted text-uppercase text-center">Business starter</h5>
                                    <h6 class="card-price text-center">10,000NGN monthly</h6>
                                    <br>

                                    <table class="pricingtable table" data-tooltip-stickto="top" data-tooltip-color="teal" data-tooltip-max-width="200" data-tooltip-delay="0">
                                        <tbody>
                                            <tr>
                                                <td>14 day free trial (cancel any time)</td>
                                                <td class="text-center"><i class="fa fa-check green"></i></td>
                                            </tr>
                                            <tr>
                                                <td>Profile</td>
                                                <td class="text-center"><i class="fa fa-check green"></i></td>
                                            </tr>
                                            <tr>
                                                <td>Catalogues</td>
                                                <td class="text-center"><i class="fa fa-check green"></i></td>
                                            </tr>
                                            <tr>
                                                <td>Social loyalty &amp; promotions</td>
                                                <td class="text-center"><i class="fa fa-check green"></i></td>
                                            </tr>
                                            <tr>
                                                <td>Maximum users</td>
                                                <td class="text-center">3</td>
                                            </tr>
                                            <tr>
                                                <td>B2C trading</td>
                                                <td class="text-center"><i class="fa fa-check green"></i></td>
                                            </tr>
                                            <tr>
                                                <td>B2B trading</td>
                                                <td class="text-center"><i class="fa fa-remove red"></i></td>
                                            </tr>
                                            <tr>
                                                <td>Reports</td>
                                                <td class="text-center"><span class="moreinfo" data-tooltip="Basic Sales Reports, Inventory Reports (need to be designed for mobile)">Basic</span></td>
                                            </tr>
                                            <tr>
                                                <td>Bolt-on support</td>
                                                <td class="text-center"><i class="fa fa-remove red"></i></td>
                                            </tr>
                                            <tr>
                                                <td>Order &amp; delivery management</td>
                                                <td class="text-center"><i class="fa fa-remove red"></i></td>
                                            </tr>
                                            <tr>
                                                <td>Number of transactions</td>
                                                <td class="text-center">N/A</td>
                                            </tr>
                                            <tr>
                                                <td>Number of devices</td>
                                                <td class="text-center">N/A</td>
                                            </tr>
                                            <tr>
                                                <td>Number of locations</td>
                                                <td class="text-center">1</td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <br>
                                    <a href="#" class="btn community-button btn-warning" onclick="$('#paidplanchosen').hide(); $('#planselect').fadeIn();">Change plan</a>
                                </div>
                            </div>

                        </div>
                        <div class="col-xs-12 col-md-7">

                            <div class="activity-overview plain rounded">
                                <h1>Manage your user slots</h1>
                                <br /><br />
                                <div class="row">
                                    <div class="col-xs-12 col-sm-6">
                                        <div class="form-group">
                                            <label>Current user limit</label>
                                            <input type="number" id="level-default-user-number" value="@(domainPlan?.Level?.NumberOfUsers ?? 0)" class="form-control chosen-plan-user-number" disabled>
                                            <p class="formhelp below">Your current user limit is controlled by your chosen plan. You may optionally increase this at additional cost per user, or alternatively review other plans.</p>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-sm-6">
                                        <div class="form-group">
                                            <label>User slots required</label>
                                            @{
                                                var planUserNumber = domainPlan?.Level?.NumberOfUsers ?? 0;
                                                var extraUserNumber = domainPlan?.NumberOfExtraUsers ?? 0;
                                                var totalUser = planUserNumber + extraUserNumber;
                                            }
                                            <input type="number" class="form-control chosen-plan-user-number" id="user-number" min="1" value="@totalUser">
                                            <p class="formhelp below">Please note each additional user will incur a fee of <strong id="cost-per-extra-str">5,000NGN</strong> per month. We'll confirm the total cost prior to you having to make any payments.</p>
                                        </div>
                                    </div>
                                </div>


                                <br />

                                <a href="#" class="btn community-button btn-primary w-auto" data-toggle="tab" data-target="#tab3"
                                   onclick="planCostCalculation()">Next</a>
                            </div>


                        </div>
                    </div>
                    <!-- END Plan chosen -->




                </div>

            </div>
            <!-- END Step 2 -->
            <!-- Step 3 -->
            <div class="tab-pane fade" id="tab3">

                <div class="wizard-form animated fadeIn">

                    <div style="width: 800px; max-width: 100%; margin: 100px auto 0 auto;">

                        <div class="mod_title">
                            <h5>Domain specifics</h5>
                            <h4>Some specifics about your business</h4>
                        </div>
                        <br /><br />

                        <div class="row">
                            <div class="col-xs-12">
                                <div class="form-group">
                                    <label for="avatar">Briefly summarise your business (max 500 characters)</label>
                                    <textarea name="summary" id="domain-description" onkeyup="validateAddDomainDescription()" class="form-control" style="max-width: 100%;"></textarea>
                                    <label id="domain-description-error" class="error" for="addcomment" style="display: none;">Your post is longer than the 500 characters limit. Please reduce the length.</label>
                                </div>
                            </div>
                            <div class="col-xs-12">
                                <div class="form-group">
                                    <label for="avatar">Choose a logo to associate with your business</label>
                                    <input type="file" id="domain-logo" name="avatar">
                                </div>
                            </div>
                        </div>


                        <br /><br />
                        <button class="btn btn-primary community-button w-auto"
                                onclick="processDomainLogoSaving()">
                            Next
                        </button>
                        <button id="open-receive-payment-btn" class="hidden" data-toggle="tab" data-target="#tabx"></button>

                    </div>

                </div>
            </div>
            <!-- END Step 3 -->



            <!-- Step X -->
            <div class="tab-pane fade" id="tabx">

                <div class="wizard-form animated fadeIn">

                    <div style="width: 800px; max-width: 100%; margin: 100px auto 0 auto;">

                        <div class="mod_title">
                            <h5>Receive payments</h5>
                            <h4>Add a sub account</h4>
                        </div>
                        <br />

                        <div class="activity-overview plain rounded">
                            <p style="margin: 0; padding: 0; font-size: 13px; line-height: 1.5;">The information below is optional, but required if you would like your customers to make payments through the system for their orders. Qbicles will take @((b2cOrderCharge?.QbiclesPercentageCharge ?? 0) * 100)% of every order up to a maximum of @(b2cOrderCharge?.QbiclesFlatFee ?? 0)NGN. Additional payment provider charges are applicable - please refer to <a href="https://support.paystack.com/hc/en-us/articles/360009881920-What-are-Paystack-s-transaction-charges" target="_blank">Paystack's transaction charges</a> for more information.</p>
                        </div>

                        <div class="row">
                            <div class="col-xs-12">
                                <div class="form-group">
                                    <label for="bname">Business name</label>
                                    <input type="text" class="form-control" id="subacc-business-name" name="bname">
                                </div>
                            </div>
                            <div class="col-xs-12">
                                <div class="form-group">
                                    <label for="bank">Bank</label>
                                    <select name="bank" class="form-control select2" id="subacc-bank-code" style="width: 100%;">
                                        @foreach (var bankItem in lstBanks)
                                        {
                                            <option value="@bankItem.code">@bankItem.name</option>
                                        }
                                    </select>
                                </div>
                            </div>
                            <div class="col-xs-12">
                                <div class="form-group">
                                    <label for="accnum">Account number</label>
                                    <input type="text" id="subacc-account-number" class="form-control" name="accnum">
                                </div>
                            </div>
                        </div>


                        <br /><br />
                        <button class="btn btn-primary community-button w-auto" data-toggle="tab" data-target="#tab5" id="paid"
                                onclick="saveSubAccountInfo()">
                            Next
                        </button>

                        <button id="free-plan-btn" class="hidden" data-toggle="tab" data-target="#tab6"></button>
                        <button id="paid-plan-btn" class="hidden" data-toggle="tab" data-target="#tab5"></button>
                    </div>

                </div>
            </div>
            <!-- END Step X -->



            <!-- Step 5 -->
            @{
                // isDomainCreated: Show Done Step
                // isTransactionCallBack + !isDomainCreated: Show Payment Step
                var tab5Classes = isTransactionCallBack && !isDomainCreated ? "in active" : "";
            }
            <div class="tab-pane fade @tab5Classes" id="tab5">
                <div class="row pricing addbusiness">
                    <div class="col-xs-12 col-md-4">

                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title text-muted text-uppercase text-center">Chosen plan</h5>
                                <h6 class="card-price text-center">Business starter</h6>
                                <br>

                                <table class="pricingtable table" data-tooltip-stickto="top" data-tooltip-color="teal" data-tooltip-max-width="200" data-tooltip-delay="0">
                                    <tbody>
                                        <tr>
                                            <td>14 day free trial (cancel any time)</td>
                                            <td class="text-center"><i class="fa fa-check green"></i></td>
                                        </tr>
                                        <tr>
                                            <td>Profile</td>
                                            <td class="text-center"><i class="fa fa-check green"></i></td>
                                        </tr>
                                        <tr>
                                            <td>Catalogues</td>
                                            <td class="text-center"><i class="fa fa-check green"></i></td>
                                        </tr>
                                        <tr>
                                            <td>Social loyalty &amp; promotions</td>
                                            <td class="text-center"><i class="fa fa-check green"></i></td>
                                        </tr>
                                        <tr>
                                            <td>Maximum users</td>
                                            <td class="text-center">3</td>
                                        </tr>
                                        <tr>
                                            <td>B2C trading</td>
                                            <td class="text-center"><i class="fa fa-check green"></i></td>
                                        </tr>
                                        <tr>
                                            <td>B2B trading</td>
                                            <td class="text-center"><i class="fa fa-remove red"></i></td>
                                        </tr>
                                        <tr>
                                            <td>Reports</td>
                                            <td class="text-center"><span class="moreinfo" data-tooltip="Basic Sales Reports, Inventory Reports (need to be designed for mobile)">Basic</span></td>
                                        </tr>
                                        <tr>
                                            <td>Bolt-on support</td>
                                            <td class="text-center"><i class="fa fa-remove red"></i></td>
                                        </tr>
                                        <tr>
                                            <td>Order &amp; delivery management</td>
                                            <td class="text-center"><i class="fa fa-remove red"></i></td>
                                        </tr>
                                        <tr>
                                            <td>Number of transactions</td>
                                            <td class="text-center">N/A</td>
                                        </tr>
                                        <tr>
                                            <td>Number of devices</td>
                                            <td class="text-center">N/A</td>
                                        </tr>
                                        <tr>
                                            <td>Number of locations</td>
                                            <td class="text-center">1</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                    </div>
                    <div class="col-xs-12 col-md-8">

                        <div class="activity-overview plain rounded">
                            <h1>Pricing information</h1>
                            <p>
                                Please review the information below before proceeding to payment. Once you're done, we'll take you to the business wizard so you can be up and running
                                quickly, and easily!
                            </p>


                            <br />
                            <table class="datatable table-striped table-hover" id="request-cost-table" style="width: 100%;">
                                <thead>
                                    <tr>
                                        <th>Item</th>
                                        <th>Quantity</th>
                                        <th>Cost</th>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td id="table-plan-name">@(domainPlan?.Level?.Name ?? "") plan</td>
                                        <td>1</td>
                                        <td><span id="table-default-cost">@(domainPlan?.CalculatedCost.ToDecimalPlace(0) ?? "0")</span>@(domainPlan?.Level?.Currency ?? "NGN")</td>
                                    </tr>
                                    <tr class="hidden">
                                        <td>Extra user slots</td>
                                        <td id="extra-number">@(domainPlan?.NumberOfExtraUsers ?? 0)</td>
                                        @{
                                            var pricePerExtraUser = domainPlan?.Level?.CostPerAdditionalUser ?? 0;
                                            var extraPrice = pricePerExtraUser * extraUserNumber;
                                        }
                                        <td><span id="table-extra-cost">@(extraPrice.ToDecimalPlace(0))</span>@(domainPlan?.Level?.Currency ?? "NGN")</td>
                                    </tr>
                                </tbody>
                            </table>


                            <br /><br /><br />

                            <h5 style="margin: 0; padding: 0 0 5px 0;">Total to pay</h5>
                            <h1 style="font-size: 32px; font-weight: 500; margin: 0; padding: 0;"><span id="total-cost">@(domainPlan?.CalculatedCost == null ? "0" : domainPlan.CalculatedCost.ToDecimalPlace(0))</span>NGN monthly</h1>


                            <br /><br />
                            <button class="btn btn-success community-button w-auto" onclick="createDomainCreationPaymentPlan()">Confirm and pay</button>
                            <button id="demotab-toggle-btn" class="btn btn-success community-button w-auto hidden" data-toggle="tab" data-target="#tabdemo"></button>
                            <button class="btn btn-danger community-button w-auto">Cancel</button>
                        </div>


                    </div>
                </div>
            </div>
            <!-- END Step 5 -->
            <!-- Payment step (iFrame demo) -->
            <div class="tab-pane fade" id="tabdemo">
                <div class="row pricing addbusiness">
                    <div class="col-xs-12">


                        <div class="activity-overview plain rounded">
                            <h1>Payment</h1>
                            <p>You'll be directed to Paystack below to make payment. If you have any issues seeing the content you can <a href="#">click here</a> to refresh and try again.</p>
                        </div>

                        <br />

                        <iframe id="paystack-frame" class="iframe-resp"></iframe>

                        <style>

                            .iframe-resp {
                                width: 100%;
                                height: 650px;
                                border: 0;
                                box-shadow: none;
                                overflow: auto;
                            }
                        </style>

                    </div>
                </div>
            </div>
            <!-- End Payment step -->
            <!-- Step 6 -->
            @{
                var tab6Classes = isDomainCreated ? "in active" : "";
            }
            <div class="tab-pane fade @tab6Classes" id="tab6">

                <div class="wizard-form bness text-center">

                    <div style="width: 800px; max-width: 100%; margin: 100px auto 0 auto;">

                        <img src="/Content/DesignStyle/img/icon_approval.png">
                        <br /><br />

                        <div class="mod_title">
                            <h4>Success!</h4>
                        </div>

                        <br />
                        <div class="activity-overview plain rounded">
                            <h5 id="domain-name-title">Your <strong>@(domain?.Name ?? "")</strong> Business Domain has been successfully created</h5>
                            <br />

                            <p>
                                We've created a basic Qbicle for you to get started with. Now your Business Domain is set up, it's time to start adding your business information.
                                Tap the button below to proceed to the Business Wizard and we'll walk you through the steps...
                            </p>

                            <br />
                            <a href="#" onclick="LaunchCreatedDomain()" class="community-button lg btn-success w-auto" style="display: inline-block; margin-bottom: 0;">Launch business wizard now</a>
                        </div>

                    </div>

                </div>

            </div>
            <!-- END Step 6 -->

        </div>



    </div>
</body>

</html>
<script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="~/Scripts/DesignStyle/lib/js/jquery.validate.min.js"></script>
<script src="~/Content/DesignStyle/js/html5tooltips.js"></script>
<script src="~/Content/DesignStyle/js/select2.full.min.js"></script>
<script src="//cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
<script src="//cdn.datatables.net/1.10.15/js/dataTables.bootstrap.min.js"></script>
<script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
<script src="~/Content/DesignStyle/js/owl.carousel.min.js"></script>
@*<script src="~/Content/DesignStyle/js/jquery.easing.1.3.js"></script>*@
<script src="~/Content/DesignStyle/js/jquery.circle-progress.js"></script>
<script src="~/Content/DesignStyle/js/select2.full.min.js"></script>
<script src="~/Content/DesignStyle/js/moment.js"></script>
<script src="~/Content/DesignStyle/js/daterangepicker.js"></script>
<script src="~/Content/DesignStyle/js/owl.carousel.min.js"></script>
<script src="~/Content/DesignStyle/js/bootstrap-multiselect.js"></script>
<script src="~/Content/DesignStyle/js/lodash/lodash.min.js"></script>
<script src="~/Scripts/toastr/cleanBookNotification.min.js"></script>
<script src="~/Scripts/dev/common-controller.js"></script>
<link href="~/Scripts/toastr/toastr.min.css" rel="stylesheet" />
<script src="~/Scripts/toastr/toastr.min.js"></script>
<script src="~/Content/DesignStyle/js/loadingoverlay.min.js"></script>
@*<script src="dist/js/app.js"></script>*@

@{
    if (System.Diagnostics.Debugger.IsAttached)
    {
        <script src="~/Scripts/dev/domain-creation.js"></script>
    }
    else
    {
        <script src="~/Scripts/dev/domain-creation.min.js"></script>

    }
}

<script>
    var freePlanLevel = @((int)BusinessDomainLevelEnum.Free);
    var starterPlanLevel = @((int)BusinessDomainLevelEnum.Starter);
    var standardPlanLevel = @((int)BusinessDomainLevelEnum.Standard);
    var expertPlanLevel = @((int)BusinessDomainLevelEnum.Expert);
    var existingPlanLevel = @((int)BusinessDomainLevelEnum.Existing);

    function validateAddDomainDescription() {
        var description = $("#domain-description").val();
        if (description.length > 500)
            $("#domain-description-error").show();
        else
            $("#domain-description-error").hide();
    }

    $(document).ready(function () {
        $(".select2").select2();

        if ('@hasError' == 'True' && '@isTransactionCallBack' == 'True' && '@isTransactionCancelled' == 'False')
        {
            updateSelectedBusinessDomainLevel(@(selectedDomainLevelAsNumber));
            // Go to the payment page
            $('#tab1link').addClass('done').removeClass('active');
            $('#tab1link a i').show();

            $('#tab2link').addClass('done').removeClass('active');
            $('#tab2link a i').show();

            $('#tab3link').addClass('done').removeClass('active');
            $('#tab3link a i').show();

            $('#tab4link').addClass('done').removeClass('active');
            $('#tab4link a i').show();

            $('#tabxlink').addClass('done').removeClass('active');
            $('#tabxlink a i').show();

            $('#tab5link').show();

            // Go to the payment page and show error message
            if ('@errorMessage' != '') {
                cleanBookNotification.error("@errorMessage", "Qbicles");
            } else {
                cleanBookNotification.error('Process the transaction failed! Please contact the administrator!', "Qbicles");
            }
        }
        else if ('@hasError' == 'False' && '@isTransactionCallBack' == 'True' && '@isTransactionCancelled' == 'True')
        {
            updateSelectedBusinessDomainLevel(@(selectedDomainLevelAsNumber));
            // Go to the payment page
            $('#tab1link').addClass('done').removeClass('active');
            $('#tab1link a i').show();

            $('#tab2link').addClass('done').removeClass('active');
            $('#tab2link a i').show();

            $('#tab3link').addClass('done').removeClass('active');
            $('#tab3link a i').show();

            $('#tab4link').addClass('done').removeClass('active');
            $('#tab4link a i').show();

            $('#tabxlink').addClass('done').removeClass('active');
            $('#tabxlink a i').show();

            $('#tab5link').show();
        }
        else if ('@(domain != null)' == 'True')
        {
            $('#tab1link').addClass('done').removeClass('active');
            $('#tab1link a i').show();

            $('#tab2link').addClass('done').removeClass('active');
            $('#tab2link a i').show();

            $('#tab3link').addClass('done').removeClass('active');
            $('#tab3link a i').show();

            $('#tab4link').addClass('done').removeClass('active');
            $('#tab4link a i').show();

            $('#tabxlink').addClass('done').removeClass('active');
            $('#tabxlink a i').show();

            $('#tab5link').addClass('done').removeClass('active');
            $('#tab5link a i').show();
            $('#tab5link').show();
        }

        if ('@errorMessage' != '' && '@hasError' == 'False') {
            cleanBookNotification.error("@errorMessage", "Qbicles");
        }

        $('#domain-name').keyup(delay(function () {
            checkDomainNameAvailability();
        }, 1000));
    })
</script>