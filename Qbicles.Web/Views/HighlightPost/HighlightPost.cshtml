@using Qbicles.Models.Highlight
@using Qbicles.BusinessRules
@using Qbicles.Models
@using Qbicles.Models.Qbicles
@using Qbicles.Models.Community
@model List<HighlightModel>
@{
    var lstDomain2Follow = (List<QbicleDomain>)ViewBag.NonFollowedDomain;
    var bookmarkedNumber = (int)(ViewBag.BookmarkedNum ?? 0);
    var flaggedNumber = (int)(ViewBag.FlaggedNum ?? 0);
    var listFollowedDomain = (List<QbicleDomain>)ViewBag.FollowedDomain;
    var lstCountries = (List<Country>)ViewBag.ListCountries;
    var propertyTypeList = (List<PropertyType>)ViewBag.PropertyTypeList;
    var propertyList = (List<PropertyExtras>)ViewBag.PropertyList;
    var listPostTags = (List<Tag>)ViewBag.ListPostTags;
}


<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper qbicle-detail mdv2-wrapper" style="position: relative; min-height: 0; height: auto;">


    <!-- Main content -->
    <section class="mdv2 dash" data-tooltip-color="teal" data-tooltip-delay="300" data-tooltip-animate-function="spin">


        <!-- App bar -->
        <div class="mdv2-col-app">

            <div data-spy="affix" class="contained-sidebar">


                <div class="sideoptions options-highlights">

                    <div class="qbicle-overview">

                        <div class="activity-overview plain company-overview welcome-info" style="flex: none; margin: 0; padding: 50px 30px 0 30px;">
                            <h2 style="font-weight: 500;">Qbicles Highlights</h2>
                            <p style="color: rgba(0, 0, 0, 0.5);">Articles, knowledge, news and classifieds from the Qbicles community. Browse, follow and form connections in Highlights.</p>
                            <br />


                            <div class="text-left followingblock" style="padding: 0;">

                                <h5>Following</h5>

                                @if (listFollowedDomain != null && listFollowedDomain.Count > 0)
                                {
                                    <div class="owl-carousel owl-theme following followed-domains">
                                        @foreach (var domainItem in listFollowedDomain)
                                        {
                                            <div class="item" domain-key="@domainItem.Key"><div class="theiravatar" style="background-image: url('@(domainItem.LogoUri.ToDocumentUri().ToString())')"></div></div>
                                        }
                                    </div>
                                }

                                <ul class="nav nav-stacked nav-pills highltabs" style="margin: 65px 0 45px 0;">
                                    <li class="bookmarked">
                                        <a href="#" onclick="totop();" data-tooltip="Show Highlights you've bookmarked"
                                           data-tooltip-stickto="right" data-tooltip-maxwidth="200">
                                            <img src="~/Content/DesignStyle/img/bookmark.png">
                                            Bookmarks
                                            <span class="label label-lg label-info">@bookmarkedNumber</span>
                                        </a>
                                    </li>
                                    <li class="flagged">
                                        <a href="#flagged" data-toggle="tab" onclick="totop();" data-tooltip="Show Highlights you've indicated you're interested in."
                                           data-tooltip-stickto="right" data-tooltip-maxwidth="200">
                                            <img src="~/Content/DesignStyle/img/flag.png">
                                            Flagged
                                            <span class="label label-lg label-info" id="flags">@flaggedNumber</span>
                                        </a>
                                    </li>
                                </ul>


                                <h5>Recommended for you</h5>

                                <ul class="avatar-listing team unstyled text-left" style="background: #fff;">
                                    @foreach (var domainItem in lstDomain2Follow)
                                    {
                                        <li>
                                            <a href="#">
                                                <div class="owner-avatar">
                                                    <div class="avatar-sm" style="background: url('@domainItem.LogoUri.ToDocumentUri().ToString()');"></div>
                                                </div>
                                                <h5>@domainItem.Name<br><small onclick="updateDomainFollowStatus('@domainItem.Key', 1)" class="altlink">+ Follow</small></h5>
                                            </a>
                                        </li>
                                    }
                                </ul>

                            </div>


                        </div>

                    </div>


                </div>

            </div>
        </div>
        <!-- END App bar -->
        <!-- Main area -->
        <div class="mdv2-col-dash" style="background: #f5f5f5; min-width: 0;">



            <div class="tab-content">


                <!-- Highlights -->
                <div class="tab-pane fade in active" id="highlights">

                    <div class="spacing" style="max-width: 790px; margin: 0 auto; position: relative;">


                        <div class="tab-content">


                            <!-- Highlights -->
                            <div class="tab-pane fade in active" id="highlights">
                                <div class="row" id="highlighttab">
                                    <div class="col-xs-12">

                                        <div class="followingblock ani">

                                            <button class="btn btn-info adv-search-link" data-link="#"><i class="fa fa-search"></i> &nbsp; Advanced search</button>

                                            <label>Filter by category and tags</label><br />

                                            <ul class="highltags ptags">
                                                <li hlType="0" lsType="0" class="revert">
                                                    <span><i class="fa fa-angle-left"></i> &nbsp; Change</span>
                                                <li><span hlType="4" lsType="1">Event</span></li>
                                                <li><span hlType="4" lsType="2">Job</span></li>
                                                <li><span hlType="3" lsType="0">Knowledge</span></li>
                                                <li><span hlType="2" lsType="0">News</span></li>
                                                <li><span hlType="4" lsType="3">Real estate</span></li>
                                            </ul>

                                            @if (listPostTags != null && listPostTags.Count > 0)
                                            {
                                                <ul class="highltags cattags" style="margin-top: 0;">
                                                    @foreach (var tagItem in listPostTags)
                                                    {
                                                        <li class="tag-@(tagItem.Id)"><span tagid="@(tagItem.Id)" tagname="@(tagItem.Name.Replace(" ", ""))">#@tagItem.Name</span></li>
                                                    }
                                                    <li onclick="showAllTagsModal()"><span><i class="fa fa-ellipsis-h"></i></span></li>
                                                </ul>
                                            }

                                        </div>
                                    </div>
                                </div>

                                <div id="bookmarkTab" class="row" style="display:none">
                                    <div class="col-xs-12">

                                        <div class="followingblock ani">

                                            <button class="btn btn-primary" onclick="window.location.reload(true);" style="margin-bottom: 20px;"><i class="fa fa-angle-left"></i> &nbsp; All Highlights</button>

                                        </div>
                                    </div>
                                </div>

                                <div class="row" id="flagTab" style="display:none">
                                    <div class="col-xs-12">

                                        <div class="followingblock ani">

                                            <button class="btn btn-primary" onclick="window.location.reload(true);" style="margin-bottom: 20px;"><i class="fa fa-angle-left"></i> &nbsp; All Highlights</button>

                                        </div>
                                    </div>
                                </div>


                                <div class="row adv-search" id="news">

                                    <div class="col-xs-12">
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-6">
                                                <div class="form-group">
                                                    <label for="search">Search</label>
                                                    <input type="text" id="news-adv-keysearch" class="form-control">
                                                </div>
                                            </div>
                                            <div class="col-xs-12 col-sm-6">
                                                <label for="published">Publish date</label><br />
                                                <div class="input-group" style="margin-bottom: 15px;">
                                                    <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                                    <input type="text" id="news-adv-datesearch" class="form-control singledate">
                                                </div>
                                            </div>
                                        </div>

                                        <br />
                                        <div class="row">
                                            <div class="col-xs-12">

                                                <button class="btn btn-danger" onclick="CancelAdvancedSearch(this)">Cancel</button>
                                                <button class="btn btn-success" onclick="resetPageLoad(); LoadMoreHighlightPost(true)">Search</button>

                                            </div>
                                        </div>

                                    </div>
                                </div>


                                <div class="row adv-search" id="knowledge">

                                    <div class="col-xs-12">
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-6">
                                                <div class="form-group">
                                                    <label for="search">Search</label>
                                                    <input type="text" id="knowledge-adv-searchkey" class="form-control">
                                                </div>
                                            </div>
                                            <div class="col-xs-12 col-sm-6">
                                                <div class="form-group">
                                                    <label for="search">Location</label>
                                                    <select name="location" id="knowledge-adv-locationsearch" class="form-control select2" style="width: 100%;">
                                                        <option value=" " selected>Show all</option>
                                                        @foreach (var countryItem in lstCountries)
                                                        {
                                                            <option value="@countryItem.CommonName">@countryItem.CommonName</option>
                                                        }
                                                    </select>
                                                </div>
                                            </div>
                                        </div>

                                        <br />
                                        <div class="row">
                                            <div class="col-xs-12">

                                                <button class="btn btn-danger" onclick="CancelAdvancedSearch(this)">Cancel</button>
                                                <button class="btn btn-success" onclick="resetPageLoad();LoadMoreHighlightPost(true)">Search</button>

                                            </div>
                                        </div>

                                    </div>
                                </div>


                                <div class="row adv-search" id="job">

                                    <div class="col-xs-12">
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-6">
                                                <div class="form-group">
                                                    <label for="search">Search</label>
                                                    <input id="job-adv-searchkey" type="text" class="form-control">
                                                </div>
                                            </div>
                                            <div class="col-xs-12 col-sm-6">
                                                <div class="form-group">
                                                    <label for="search">Country</label>
                                                    <select name="location" id="job-adv-locationsearch" onchange="CheckShowingAreaSelection(this, 'job-adv-area')" class="form-control select2" style="width: 100%;">
                                                        <option value=" " selected>Show all</option>
                                                        @foreach (var countryItem in lstCountries)
                                                        {
                                                            <option value="@countryItem.CommonName">@countryItem.CommonName</option>
                                                        }
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-xs-12 col-sm-6" id="job-adv-area" style="display:none">
                                                <div class="form-group">
                                                    <label for="search">Area</label>
                                                    <select name="location" id="job-adv-areaSearch" class="form-control select2" style="width: 100%;">
                                                        <option value="0" selected>Show all</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>

                                        <br />
                                        <div class="row">
                                            <div class="col-xs-12">

                                                <button class="btn btn-danger" onclick="CancelAdvancedSearch(this)">Cancel</button>
                                                <button class="btn btn-success" onclick="resetPageLoad();LoadMoreHighlightPost(true)">Search</button>

                                            </div>
                                        </div>

                                    </div>
                                </div>


                                <div class="row adv-search" id="event">

                                    <div class="col-xs-12">
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-6">
                                                <div class="form-group">
                                                    <label for="search">Search</label>
                                                    <input type="text" id="event-adv-keysearch" class="form-control">
                                                </div>
                                            </div>
                                            <div class="col-xs-12 col-sm-6">
                                                <div class="form-group">
                                                    <label for="search">Country</label>
                                                    <select name="location" id="event-adv-countrySearch" onchange="CheckShowingAreaSelection(this, 'event-adv-area')" class="form-control select2" style="width: 100%;">
                                                        <option value=" " selected>Show all</option>
                                                        @foreach (var countryItem in lstCountries)
                                                        {
                                                            <option value="@countryItem.CommonName">@countryItem.CommonName</option>
                                                        }
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-xs-12 col-sm-6">
                                                <label for="published">Date range</label><br />
                                                <div class="input-group" style="margin-bottom: 15px;">
                                                    <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                                    <input id="event-adv-searchdate" type="text" class="form-control daterange">
                                                </div>
                                            </div>
                                            <div class="col-xs-12 col-sm-6" id="event-adv-area" style="display:none">
                                                <div class="form-group">
                                                    <label for="search">Area</label>
                                                    <select name="location" id="event-adv-areaSearch" class="form-control select2" style="width: 100%;">
                                                        <option value="0" selected>Show all</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>

                                        <br />
                                        <div class="row">
                                            <div class="col-xs-12">

                                                <button class="btn btn-danger" onclick="CancelAdvancedSearch(this)">Cancel</button>
                                                <button class="btn btn-success" onclick="resetPageLoad();LoadMoreHighlightPost(true)">Search</button>

                                            </div>
                                        </div>

                                    </div>
                                </div>


                                <div class="row adv-search" id="realestate">

                                    <div class="col-xs-12">
                                        <div class="row">
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-6">
                                                    <div class="form-group">
                                                        <label for="search">Search</label>
                                                        <input type="text" id="re-adv-keysearch" class="form-control">
                                                    </div>
                                                </div>
                                                <div class="col-xs-12 col-sm-6">
                                                    <div class="form-group">
                                                        <label for="search">Location</label>
                                                        <select name="location" id="re-adv-locationsearch" onchange="CheckShowingAreaSelection(this, 're-adv-area')" class="form-control select2" style="width: 100%;">
                                                            <option value=" " selected>Show all</option>
                                                            @foreach (var countryItem in lstCountries)
                                                            {
                                                                <option value="@countryItem.CommonName">@countryItem.CommonName</option>
                                                            }
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-xs-12 col-sm-6">
                                                    <div class="form-group">
                                                        <label for="types">Property type</label>
                                                        <select name="types" id="re-adv-proptypesearch" class="form-control checkmulti" multiple>
                                                            <option value="0" selected>Any</option>
                                                            @foreach (var typeItem in propertyTypeList)
                                                            {
                                                                <option value="@typeItem.Id">@typeItem.Name</option>
                                                            }
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-xs-12 col-sm-3">
                                                    <div class="form-group">
                                                        <label for="beds">Bedrooms</label>
                                                        <select name="beds" id="re-adv-bedroomsearch" class="form-control select2" style="width: 100%;">
                                                            <option value="0" selected>Any</option>
                                                            <option value="1">1</option>
                                                            <option value="2">2</option>
                                                            <option value="3">3</option>
                                                            <option value="4">4</option>
                                                            <option value="5">5+</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-xs-12 col-sm-3">
                                                    <div class="form-group">
                                                        <label for="baths">Bathrooms</label>
                                                        <select name="baths" id="re-adv-bathroomsearch" class="form-control select2" style="width: 100%;">
                                                            <option value="0" selected>Any</option>
                                                            <option value="1">1</option>
                                                            <option value="2">2</option>
                                                            <option value="3">3+</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-6">
                                                    <div class="form-group">
                                                        <label for="facilities">Facilities</label>
                                                        <select name="facilities" id="re-adv-propertysearch" class="form-control checkmulti" multiple>
                                                            @foreach (var propertyItem in propertyList)
                                                            {
                                                                <option value="@propertyItem.Id">@propertyItem.Name</option>
                                                            }
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-xs-12 col-sm-6" id="re-adv-area" style="display:none">
                                                    <div class="form-group">
                                                        <label for="search">Area</label>
                                                        <select name="location" id="re-adv-areaSearch" class="form-control select2" style="width: 100%;">
                                                            <option value="0" selected>Show all</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>

                                            <br />
                                            <div class="row">
                                                <div class="col-xs-12">

                                                    <button class="btn btn-danger" onclick="CancelAdvancedSearch(this)">Cancel</button>
                                                    <button class="btn btn-success" onclick="resetPageLoad();LoadMoreHighlightPost(true)">Search</button>

                                                </div>
                                            </div>
                                        </div>


                                    </div>
                                </div>


                                <br /><br /><br />

                                <div id="post-list">
                                    @foreach (var postItem in Model)
                                    {
                                        if (postItem.Type == HighlightPostType.News)
                                        {
                                            <article class="promo-block">
                                                <div class="what">
                                                    <div class="user-options" style="margin-left: 0;">

                                                        <div style="display: flex; flex-direction: row;">
                                                            <div class="who"><div class="who-avatar" style="background-image: url('@postItem.LogoUri');"></div></div>

                                                            <div class="user-metainfo">
                                                                <h5>@postItem.BusinessName</h5><br />
                                                                <smaller>@postItem.CreatedDate.GetTimeRelative()</smaller>

                                                                <div class="highlight-opts">
                                                                    <div class="dropdown">
                                                                        <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown"><i class="fa fa-ellipsis-h"></i></button>
                                                                        <ul class="dropdown-menu hlnav dropdown-menu-right">
                                                                            @if (!string.IsNullOrEmpty(postItem.HyperLink))
                                                                            {
                                                                                <li><a href="#" onclick="window.open('https://@postItem.HyperLink', '_blank')">Open external site</a></li>
                                                                            }

                                                                            @if (postItem.IsDomainHiddenByCurrentUser)
                                                                            {
                                                                                <li><a href="#" style="cursor: pointer;" onclick="ChangeHidingStatus('@postItem.DomainKey', 2)">Unhide posts from @(postItem.BusinessName)</a></li>
                                                                            }
                                                                            else
                                                                            {
                                                                                <li><a href="#" style="cursor: pointer;" onclick="ChangeHidingStatus('@postItem.DomainKey', 1)">Hide posts from @(postItem.BusinessName)</a></li>
                                                                            }

                                                                            @if (postItem.IsDomainFollowedByCurrentUser)
                                                                            {
                                                                                <li><a style="cursor: pointer;" onclick="updateDomainFollowStatus('@postItem.DomainKey', 2)" class="red">Unfollow</a></li>
                                                                            }
                                                                            else
                                                                            {
                                                                                <li><a style="cursor: pointer;" onclick="updateDomainFollowStatus('@postItem.DomainKey', 1)">Follow</a></li>
                                                                            }

                                                                        </ul>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>

                                                        <div class="post-body">
                                                            <div class="labelling">
                                                                <label class="label label-lg label-primary">News</label>
                                                            </div>

                                                            <a href="/HighlightPost/HighlightPostDetail?hlPostId=@postItem.Id">
                                                                <div class="highlight-img" style="background-image: url('@postItem.ImageUri');">&nbsp;</div>
                                                            </a>

                                                            <div class="post-options">
                                                                <div class="row">
                                                                    <div class="col-xs-5"><a href="#" class="likecount" style="font-weight: 500; position: relative;">@postItem.LikeStatusString</a></div>
                                                                    <div class="col-xs-7">
                                                                        <ul class="hlopts">
                                                                            <li><a href="javascript:void(0)" onclick="ShowingSharingHLPostPartialView(@postItem.Id)"><i class="fa fa-share-alt"></i></a></li>
                                                                            <li>&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                                                            @if (postItem.IsBookmarkedByCurrentUser)
                                                                            {
                                                                                <li><a style="cursor: pointer" onclick="updateHLBookmarkStatus(@postItem.Id, 2, this)"><i class="fa fa-bookmark red"></i></a></li>
                                                                            }
                                                                            else
                                                                            {
                                                                                <li><a style="cursor: pointer" onclick="updateHLBookmarkStatus(@postItem.Id, 1, this)"><i class="fa fa-bookmark-o"></i></a></li>
                                                                            }
                                                                            @if (!postItem.IsCreatedByCurrentUser)
                                                                            {
                                                                                <li>&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                                                                if (postItem.IsLikedByCurrentUser)
                                                                                {
                                                                                    <li><a style="cursor: pointer" onclick="updateHLLikeStatus(@postItem.Id, 2, this)"><i class="fa fa-heart red"></i></a></li>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <li><a style="cursor: pointer" onclick="updateHLLikeStatus(@postItem.Id, 1, this)"><i class="fa fa-heart-o"></i></a></li>
                                                                                }
                                                                            }
                                                                        </ul>
                                                                    </div>
                                                                </div>
                                                            </div>


                                                            <div class="user-post">
                                                                <h1>@postItem.Title</h1>

                                                                @if (postItem.Tags != null && postItem.Tags.Count > 0)
                                                                {
                                                                    <div class="tag-list">
                                                                        @foreach (var tagItem in postItem.Tags)
                                                                        {
                                                                            <a href="#" class="label label-soft">#@tagItem.Name</a>
                                                                        }
                                                                    </div>
                                                                }

                                                                <br /><br />
                                                                <p style="white-space: pre-line;">@postItem.Content</p>

                                                                @if (!string.IsNullOrEmpty(postItem.Citation))
                                                                {
                                                                    <br /> <br />
                                                                    <i>via @postItem.Citation</i>
                                                                }

                                                                <br />

                                                                @if (!string.IsNullOrEmpty(postItem.HyperLink))
                                                                {
                                                                    <button class="btn btn-info community-button w-auto" onclick="window.open('https://@postItem.HyperLink', '_blank')" style="margin-top: 15px;"><i class="fa fa-external-link"></i> &nbsp; Open external site</button>
                                                                }

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </article>
                                        }
                                        else if (postItem.Type == HighlightPostType.Article)
                                        {
                                            <article class="promo-block">
                                                <div class="what">
                                                    <div class="user-options" style="margin-left: 0;">

                                                        <div style="display: flex; flex-direction: row;">
                                                            <div class="who"><div class="who-avatar" style="background-image: url('@postItem.LogoUri');"></div></div>

                                                            <div class="user-metainfo">
                                                                <h5>@postItem.BusinessName</h5><br />
                                                                <smaller>@postItem.CreatedDate.GetTimeRelative()</smaller>

                                                                <div class="highlight-opts">
                                                                    <div class="dropdown">
                                                                        <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown"><i class="fa fa-ellipsis-h"></i></button>
                                                                        <ul class="dropdown-menu hlnav dropdown-menu-right">
                                                                            <li><a href="javascript:void(0)" onclick="showArticleContentModal(@postItem.Id)">Read full article</a></li>
                                                                            @if (postItem.IsDomainHiddenByCurrentUser)
                                                                            {
                                                                                <li><a href="#" style="cursor: pointer;" onclick="ChangeHidingStatus('@postItem.DomainKey', 2)">Unhide posts from @(postItem.BusinessName)</a></li>
                                                                            }
                                                                            else
                                                                            {
                                                                                <li><a href="#" style="cursor: pointer;" onclick="ChangeHidingStatus('@postItem.DomainKey', 1)">Hide posts from @(postItem.BusinessName)</a></li>
                                                                            }
                                                                            @if (postItem.IsDomainFollowedByCurrentUser)
                                                                            {
                                                                                <li><a style="cursor: pointer;" onclick="updateDomainFollowStatus('@postItem.DomainKey', 2)" class="red">Unfollow</a></li>
                                                                            }
                                                                            else
                                                                            {
                                                                                <li><a style="cursor: pointer;" onclick="updateDomainFollowStatus('@postItem.DomainKey', 1)">Follow</a></li>
                                                                            }
                                                                        </ul>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>

                                                        <div class="post-body">
                                                            <div class="labelling">
                                                                <label class="label label-lg label-primary">Newsletter</label>
                                                            </div>

                                                            <a href="/HighlightPost/HighlightPostDetail?hlPostId=@postItem.Id">
                                                                <div class="highlight-img" style="background-image: url('@postItem.ImageUri');">&nbsp;</div>
                                                            </a>

                                                            <div class="post-options">
                                                                <div class="row">
                                                                    <div class="col-xs-5"><a href="#" class="likecount" style="font-weight: 500; position: relative;">@postItem.LikeStatusString</a></div>
                                                                    <div class="col-xs-7">
                                                                        <ul class="hlopts">
                                                                            <li><a href="javascript:void(0)" onclick="ShowingSharingHLPostPartialView(@postItem.Id)"><i class="fa fa-share-alt"></i></a></li>
                                                                            <li>&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                                                            @if (postItem.IsBookmarkedByCurrentUser)
                                                                            {
                                                                                <li><a style="cursor: pointer" onclick="updateHLBookmarkStatus(@postItem.Id, 2, this)"><i class="fa fa-bookmark red"></i></a></li>
                                                                            }
                                                                            else
                                                                            {
                                                                                <li><a style="cursor: pointer" onclick="updateHLBookmarkStatus(@postItem.Id, 1, this)"><i class="fa fa-bookmark-o"></i></a></li>
                                                                            }
                                                                            @if (!postItem.IsCreatedByCurrentUser)
                                                                            {
                                                                                <li>&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                                                                if (postItem.IsLikedByCurrentUser)
                                                                                {
                                                                                    <li><a style="cursor: pointer" onclick="updateHLLikeStatus(@postItem.Id, 2, this)"><i class="fa fa-heart red"></i></a></li>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <li><a style="cursor: pointer" onclick="updateHLLikeStatus(@postItem.Id, 1, this)"><i class="fa fa-heart-o"></i></a></li>
                                                                                }
                                                                            }
                                                                        </ul>
                                                                    </div>
                                                                </div>
                                                            </div>


                                                            <div class="user-post">
                                                                <h1>@postItem.Title</h1>

                                                                @if (postItem.Tags != null && postItem.Tags.Count > 0)
                                                                {
                                                                    <div class="tag-list">
                                                                        @foreach (var tagItem in postItem.Tags)
                                                                        {
                                                                            <a href="#" class="label label-soft">#@tagItem.Name</a>
                                                                        }
                                                                    </div>
                                                                }

                                                                <br /><br />
                                                                <p style="white-space: pre-line;">@postItem.Content</p>

                                                                <br />

                                                                <button class="btn btn-info community-button w-auto" style="margin-top: 15px;"
                                                                        onclick="showArticleContentModal(@postItem.Id)">
                                                                    <i class="fa fa-eye"></i> &nbsp; Read article
                                                                </button>

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </article>
                                        }
                                        else if (postItem.Type == HighlightPostType.Knowledge)
                                        {
                                            <article class="promo-block">
                                                <div class="what">
                                                    <div class="user-options" style="margin-left: 0;">

                                                        <div style="display: flex; flex-direction: row;">
                                                            <div class="who"><div class="who-avatar" style="background-image: url('@postItem.LogoUri');"></div></div>

                                                            <div class="user-metainfo">
                                                                <h5>@postItem.BusinessName</h5><br />
                                                                <smaller>@postItem.CreatedDate.GetTimeRelative()</smaller>

                                                                <div class="highlight-opts">
                                                                    <div class="dropdown">
                                                                        <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown"><i class="fa fa-ellipsis-h"></i></button>
                                                                        <ul class="dropdown-menu hlnav dropdown-menu-right">
                                                                            @if (!string.IsNullOrEmpty(postItem.HyperLink))
                                                                            {
                                                                                <li><a href="#" onclick="window.open('https://@postItem.HyperLink', '_blank')" data-toggle="modal">Open external site</a></li>
                                                                            }


                                                                            @if (postItem.IsDomainHiddenByCurrentUser)
                                                                            {
                                                                                <li><a href="#" style="cursor: pointer;" onclick="ChangeHidingStatus('@postItem.DomainKey', 2)">Unhide posts from @(postItem.BusinessName)</a></li>
                                                                            }
                                                                            else
                                                                            {
                                                                                <li><a href="#" style="cursor: pointer;" onclick="ChangeHidingStatus('@postItem.DomainKey', 1)">Hide posts from @(postItem.BusinessName)</a></li>
                                                                            }


                                                                            @if (postItem.IsDomainFollowedByCurrentUser)
                                                                            {
                                                                                <li><a class="red" onclick="updateDomainFollowStatus('@postItem.DomainKey', 2)" href="#">Unfollow</a></li>
                                                                            }
                                                                            else
                                                                            {
                                                                                <li><a onclick="updateDomainFollowStatus('@postItem.DomainKey', 1)" href="#">Follow</a></li>
                                                                            }
                                                                            <!--<li><a href="#">View insights</a></li>-->
                                                                        </ul>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>

                                                        <div class="post-body">
                                                            <div class="labelling">
                                                                <label class="label label-lg label-primary">Knowledge</label>
                                                            </div>

                                                            <a href="/HighlightPost/HighlightPostDetail?hlPostId=@postItem.Id">
                                                                <div class="highlight-img" style="background-image: url('@postItem.ImageUri');">&nbsp;</div>
                                                            </a>

                                                            <div class="post-options">
                                                                <div class="row">
                                                                    <div class="col-xs-5"><a href="#" class="likecount" style="font-weight: 500; position: relative;">@postItem.LikeStatusString</a></div>
                                                                    <div class="col-xs-7">
                                                                        <ul class="hlopts">
                                                                            <li><a href="javascript:void(0)" onclick="ShowingSharingHLPostPartialView(@postItem.Id)"><i class="fa fa-share-alt"></i></a></li>
                                                                            <li>&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                                                            @if (postItem.IsBookmarkedByCurrentUser)
                                                                            {
                                                                                <li><a style="cursor: pointer" onclick="updateHLBookmarkStatus(@postItem.Id, 2, this)"><i class="fa fa-bookmark red"></i></a></li>
                                                                            }
                                                                            else
                                                                            {
                                                                                <li><a style="cursor: pointer" onclick="updateHLBookmarkStatus(@postItem.Id, 1, this)"><i class="fa fa-bookmark-o"></i></a></li>
                                                                            }
                                                                            @if (!postItem.IsCreatedByCurrentUser)
                                                                            {
                                                                                <li>&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                                                                if (postItem.IsLikedByCurrentUser)
                                                                                {
                                                                                    <li><a style="cursor: pointer" onclick="updateHLLikeStatus(@postItem.Id, 2, this)"><i class="fa fa-heart red"></i></a></li>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <li><a style="cursor: pointer" onclick="updateHLLikeStatus(@postItem.Id, 1, this)"><i class="fa fa-heart-o"></i></a></li>
                                                                                }
                                                                            }
                                                                        </ul>
                                                                    </div>
                                                                </div>
                                                            </div>


                                                            <div class="user-post">
                                                                <h1>@postItem.Title</h1>

                                                                @if (postItem.Tags != null && postItem.Tags.Count > 0)
                                                                {
                                                                    <div class="tag-list">
                                                                        @foreach (var tagItem in postItem.Tags)
                                                                        {
                                                                            <a href="#" class="label label-soft">#@tagItem.Name</a>
                                                                        }
                                                                    </div>
                                                                }

                                                                <br /><br />
                                                                <p style="white-space: pre-line;">
                                                                    @postItem.Content
                                                                </p>

                                                                @if (!string.IsNullOrEmpty(postItem.HyperLink))
                                                                {
                                                                    <br />
                                                                    <button class="btn btn-info community-button w-auto" onclick="window.open('https://@postItem.HyperLink', '_blank')" style="margin-top: 15px;"><i class="fa fa-external-link"></i> &nbsp; Open external site</button>
                                                                }
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </article>
                                        }
                                        else if (postItem.Type == HighlightPostType.Listings && postItem.HLListingType == ListingType.Event)
                                        {
                                            <article class="promo-block">
                                                <div class="what">
                                                    <div class="user-options" style="margin-left: 0;">

                                                        <div style="display: flex; flex-direction: row;">
                                                            <div class="who"><div class="who-avatar" style="background-image: url('@postItem.LogoUri');"></div></div>

                                                            <div class="user-metainfo">
                                                                <h5>@postItem.BusinessName</h5><br />
                                                                <smaller>@(postItem.CreatedDate.GetTimeRelative())</smaller>

                                                                <div class="highlight-opts">
                                                                    <div class="dropdown">
                                                                        <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown"><i class="fa fa-ellipsis-h"></i></button>
                                                                        <ul class="dropdown-menu hlnav dropdown-menu-right">
                                                                            @if (postItem.IsFlaggedByCurrentUser)
                                                                            {
                                                                                <li><a style="cursor: pointer;" class="red flag" data-toggle="modal" onclick="updateHLFlagStatus(@postItem.Id, 2, this)">I'm not interested</a></li>
                                                                            }
                                                                            else
                                                                            {
                                                                                <li><a style="cursor: pointer;" data-toggle="modal" class="flag" onclick="updateHLFlagStatus(@postItem.Id, 1, this)">I'm interested</a></li>
                                                                            }

                                                                            @if (postItem.IsDomainHiddenByCurrentUser)
                                                                            {
                                                                                <li><a href="#" style="cursor: pointer;" onclick="ChangeHidingStatus('@postItem.DomainKey', 2)">Unhide posts from @(postItem.BusinessName)</a></li>
                                                                            }
                                                                            else
                                                                            {
                                                                                <li><a href="#" style="cursor: pointer;" onclick="ChangeHidingStatus('@postItem.DomainKey', 1)">Hide posts from @(postItem.BusinessName)</a></li>
                                                                            }

                                                                            @if (postItem.IsDomainFollowedByCurrentUser)
                                                                            {
                                                                                <li><a style="cursor: pointer;" onclick="updateDomainFollowStatus('@postItem.DomainKey', 2)" class="red">Unfollow</a></li>
                                                                            }
                                                                            else
                                                                            {
                                                                                <li><a onclick="updateDomainFollowStatus('@postItem.DomainKey', 1)" style="cursor: pointer;">Follow</a></li>
                                                                            }
                                                                        </ul>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>

                                                        <div class="post-body">
                                                            <div class="labelling">
                                                                <label class="label label-lg label-primary">Event</label>
                                                                @{
                                                                    var eventCountry = "Available everywhere";
                                                                    var eventArea = "";
                                                                    if (!string.IsNullOrEmpty(postItem.CountryName))
                                                                    {
                                                                        eventCountry = postItem.CountryName;
                                                                        eventArea = postItem.AreaName ?? "";
                                                                        if (!string.IsNullOrEmpty(eventArea))
                                                                        {
                                                                            eventCountry = eventArea + ", " + eventCountry;
                                                                        }
                                                                    }
                                                                }
                                                                <label class="label label-lg label-info">@(eventCountry)</label>
                                                            </div>

                                                            <a href="/HighlightPost/HighlightPostDetail?hlPostId=@postItem.Id">
                                                                <div class="highlight-img" style="background-image: url('@postItem.ImageUri');">&nbsp;</div>
                                                            </a>

                                                            <div class="post-options">
                                                                <div class="row">

                                                                    <div class="col-xs-5"><a href="#" class="likecount" style="font-weight: 500; position: relative;">@postItem.LikeStatusString</a></div>
                                                                    <div class="col-xs-7">
                                                                        <ul class="hlopts">
                                                                            <li><a href="javascript:void(0)" onclick="ShowingSharingHLPostPartialView(@postItem.Id)"><i class="fa fa-share-alt"></i></a></li>
                                                                            <li>&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                                                            @if (postItem.IsBookmarkedByCurrentUser)
                                                                            {
                                                                                <li><a style="cursor: pointer;" onclick="updateHLBookmarkStatus(@postItem.Id, 2, this)"><i class="fa fa-bookmark red"></i></a></li>
                                                                            }
                                                                            else
                                                                            {
                                                                                <li><a style="cursor: pointer;" onclick="updateHLBookmarkStatus(@postItem.Id, 1, this)"><i class="fa fa-bookmark-o"></i></a></li>
                                                                            }
                                                                            @if (!postItem.IsCreatedByCurrentUser)
                                                                            {
                                                                                <li>&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                                                                if (postItem.IsLikedByCurrentUser)
                                                                                {
                                                                                    <li><a style="cursor: pointer;" onclick="updateHLLikeStatus(@postItem.Id, 2, this)"><i class="fa fa-heart red"></i></a></li>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <li><a style="cursor: pointer;" onclick="updateHLLikeStatus(@postItem.Id, 1, this)"><i class="fa fa-heart-o"></i></a></li>
                                                                                }
                                                                            }
                                                                        </ul>
                                                                    </div>
                                                                </div>
                                                            </div>


                                                            <div class="user-post">
                                                                <h1>@postItem.Title</h1>

                                                                @if (postItem.Tags != null && postItem.Tags.Count > 0)
                                                                {
                                                                    <div class="tag-list">
                                                                        @foreach (var tagItem in postItem.Tags)
                                                                        {
                                                                            <a href="#" class="label label-soft">#@tagItem.Name</a>
                                                                        }
                                                                    </div>
                                                                }

                                                                <br /><br />
                                                                <p style="white-space: pre-line;">@postItem.Content</p>

                                                                <br />

                                                                <table class="table app_specific table-borderless highlinfo valigntop">
                                                                    <tbody>
                                                                        <tr>
                                                                            <td><strong>When</strong></td>
                                                                            <td>@postItem.StartTimeString - @postItem.EndTimeString</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td><strong>Where</strong></td>
                                                                            <td>@postItem.EventLocation</td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                                @{
                                                                    var FlagUp = postItem.IsFlaggedByCurrentUser ? "display: none" : "";
                                                                    var FlagDown = postItem.IsFlaggedByCurrentUser ? "" : "display: none";
                                                                }
                                                                <button class="btn btn-primary community-button w-auto flag" style="margin-top: 15px; @FlagUp"
                                                                        onclick="updateHLFlagStatus(@postItem.Id, 1, this)">
                                                                    I'm interested
                                                                </button>
                                                                <button class="btn btn-danger community-button w-auto flag" style="margin-top: 15px; @FlagDown"
                                                                        onclick="updateHLFlagStatus(@postItem.Id, 2, this)">
                                                                    I'm not interested
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </article>
                                        }
                                        else if (postItem.Type == HighlightPostType.Listings && postItem.HLListingType == ListingType.Job)
                                        {
                                            <article class="promo-block" id="topjump">
                                                <div class="what">
                                                    <div class="user-options hl" style="margin-left: 0;">

                                                        <div style="display: flex; flex-direction: row;">
                                                            <div class="who"><div class="who-avatar" style="background-image: url('@postItem.LogoUri');"></div></div>

                                                            <div class="user-metainfo">
                                                                <h5>@postItem.BusinessName</h5><br />
                                                                <smaller>@postItem.CreatedDate.GetTimeRelative()</smaller>

                                                                <div class="highlight-opts">
                                                                    <div class="dropdown">
                                                                        <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown"><i class="fa fa-ellipsis-h"></i></button>
                                                                        <ul class="dropdown-menu hlnav dropdown-menu-right">
                                                                            @if (postItem.IsFlaggedByCurrentUser)
                                                                            {
                                                                                <li><a class="red flag" href="#" onclick="updateHLFlagStatus(@postItem.Id, 2, this)">I'm not interested</a></li>
                                                                            }
                                                                            else
                                                                            {
                                                                                <li><a style="cursor: pointer" class="flag" onclick="updateHLFlagStatus(@postItem.Id, 1, this)">I'm interested</a></li>
                                                                            }


                                                                            @if (postItem.IsDomainHiddenByCurrentUser)
                                                                            {
                                                                                <li><a href="#" style="cursor: pointer;" onclick="ChangeHidingStatus('@postItem.DomainKey', 2)">Unhide posts from @(postItem.BusinessName)</a></li>
                                                                            }
                                                                            else
                                                                            {
                                                                                <li><a href="#" style="cursor: pointer;" onclick="ChangeHidingStatus('@postItem.DomainKey', 1)">Hide posts from @(postItem.BusinessName)</a></li>
                                                                            }

                                                                            @if (postItem.IsDomainFollowedByCurrentUser)
                                                                            {
                                                                                <li><a class="red" onclick="updateDomainFollowStatus('@postItem.DomainKey', 2)" href="#">Unfollow</a></li>
                                                                            }
                                                                            else
                                                                            {
                                                                                <li><a onclick="updateDomainFollowStatus('@postItem.DomainKey', 1)" href="#">Follow</a></li>
                                                                            }
                                                                        </ul>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>

                                                        <div class="post-body">
                                                            <div class="labelling">
                                                                <label class="label label-lg label-primary">Job</label>
                                                                @{
                                                                    var jobCountry = "Available everywhere";
                                                                    var jobArea = "";
                                                                    if (!string.IsNullOrEmpty(postItem.CountryName))
                                                                    {
                                                                        jobCountry = postItem.CountryName;
                                                                        jobArea = postItem.AreaName ?? "";
                                                                        if (!string.IsNullOrEmpty(jobArea))
                                                                        {
                                                                            jobCountry = jobArea + ", " + jobCountry;
                                                                        }
                                                                    }
                                                                }
                                                                <label class="label label-lg label-info">@(jobCountry)</label>
                                                            </div>

                                                            <a href="/HighlightPost/HighlightPostDetail?hlPostId=@postItem.Id">
                                                                <div class="highlight-img" style="background-image: url('@postItem.ImageUri');">&nbsp;</div>
                                                            </a>

                                                            <div class="post-options">
                                                                <div class="row">
                                                                    <div class="col-xs-5"><a href="#" class="likecount" style="font-weight: 500; position: relative; top: 0;">@postItem.LikeStatusString</a></div>
                                                                    <div class="col-xs-7">
                                                                        <ul class="hlopts">
                                                                            <li><a href="javascript:void(0)" onclick="ShowingSharingHLPostPartialView(@postItem.Id)"><i class="fa fa-share-alt"></i></a></li>
                                                                            <li>&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                                                            @if (postItem.IsBookmarkedByCurrentUser)
                                                                            {
                                                                                <li><a style="cursor: pointer" onclick="updateHLBookmarkStatus(@postItem.Id, 2, this)"><i class="fa fa-bookmark red"></i></a></li>
                                                                            }
                                                                            else
                                                                            {
                                                                                <li><a style="cursor: pointer" onclick="updateHLBookmarkStatus(@postItem.Id, 1, this)"><i class="fa fa-bookmark-o"></i></a></li>
                                                                            }
                                                                            @if (!postItem.IsCreatedByCurrentUser)
                                                                            {
                                                                                <li>&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                                                                if (postItem.IsLikedByCurrentUser)
                                                                                {
                                                                                    <li><a style="cursor: pointer" onclick="updateHLLikeStatus(@postItem.Id, 2, this)"><i class="fa fa-heart red"></i></a></li>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <li><a style="cursor: pointer" onclick="updateHLLikeStatus(@postItem.Id, 1, this)"><i class="fa fa-heart-o"></i></a></li>
                                                                                }
                                                                            }
                                                                        </ul>
                                                                    </div>
                                                                </div>
                                                            </div>


                                                            <div class="user-post">
                                                                <h1>@postItem.Title</h1>

                                                                @if (postItem.Tags != null && postItem.Tags.Count > 0)
                                                                {
                                                                    <div class="tag-list">
                                                                        @foreach (var tagItem in postItem.Tags)
                                                                        {
                                                                            <a href="#" class="label label-soft">#@tagItem.Name</a>
                                                                        }
                                                                    </div>
                                                                }

                                                                <br /><br />
                                                                <p style="white-space: pre-line;">
                                                                    @postItem.Content
                                                                </p>

                                                                <br />
                                                                <table class="table app_specific table-borderless highlinfo valigntop">
                                                                    <tbody>
                                                                        <tr>
                                                                            <td><strong>Salary</strong></td>
                                                                            <td>@postItem.Salary</td>
                                                                        </tr>
                                                                        <tr>
                                                                            <td><strong>Skills required</strong></td>
                                                                            <td style="white-space: pre-line;">@postItem.SkillRequired</td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>

                                                                <br />
                                                                @{
                                                                    var FlagUp = postItem.IsFlaggedByCurrentUser ? "display: none" : "";
                                                                    var FlagDown = postItem.IsFlaggedByCurrentUser ? "" : "display: none";
                                                                }
                                                                <button class="btn btn-primary community-button w-auto flag" style="margin-top: 15px;@FlagUp"
                                                                        onclick="updateHLFlagStatus(@postItem.Id, 1, this)">
                                                                    I'm interested
                                                                </button>
                                                                <button class="btn btn-danger community-button w-auto flag" style="margin-top: 15px;@FlagDown"
                                                                        onclick="updateHLFlagStatus(@postItem.Id, 2, this)">
                                                                    I'm not interested
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </article>
                                        }
                                        else if (postItem.Type == HighlightPostType.Listings && postItem.HLListingType == ListingType.RealEstate)
                                        {
                                            <article class="promo-block">
                                                <div class="what">
                                                    <div class="user-options" style="margin-left: 0;">

                                                        <div style="display: flex; flex-direction: row;">
                                                            <div class="who"><div class="who-avatar" style="background-image: url('@postItem.LogoUri');"></div></div>

                                                            <div class="user-metainfo">
                                                                <h5>@postItem.BusinessName</h5><br />
                                                                <smaller>@postItem.CreatedDate.GetTimeRelative()</smaller>

                                                                <div class="highlight-opts">
                                                                    <div class="dropdown">
                                                                        <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown"><i class="fa fa-ellipsis-h"></i></button>
                                                                        <ul class="dropdown-menu hlnav dropdown-menu-right">
                                                                            <li><a style="cursor: pointer" onclick="showRealEstateInfoModal(@postItem.Id)">View property info</a></li>
                                                                            @if (postItem.IsFlaggedByCurrentUser)
                                                                            {
                                                                                <li><a class="red flag" style="cursor: pointer" data-toggle="modal" onclick="updateHLFlagStatus(@postItem.Id, 2, this)">I'm not interested</a></li>
                                                                            }
                                                                            else
                                                                            {
                                                                                <li><a style="cursor: pointer" class="flag" data-toggle="modal" onclick="updateHLFlagStatus(@postItem.Id, 1, this)">I'm interested</a></li>
                                                                            }

                                                                            @if (postItem.IsDomainHiddenByCurrentUser)
                                                                            {
                                                                                <li><a href="#" style="cursor: pointer;" onclick="ChangeHidingStatus('@postItem.DomainKey', 2)">Unhide posts from @(postItem.BusinessName)</a></li>
                                                                            }
                                                                            else
                                                                            {
                                                                                <li><a href="#" style="cursor: pointer;" onclick="ChangeHidingStatus('@postItem.DomainKey', 1)">Hide posts from @(postItem.BusinessName)</a></li>
                                                                            }

                                                                            @if (postItem.IsDomainFollowedByCurrentUser)
                                                                            {
                                                                                <li><a class="red" onclick="updateDomainFollowStatus('@postItem.DomainKey', 2)" style="cursor: pointer">Unfollow</a></li>
                                                                            }
                                                                            else
                                                                            {
                                                                                <li><a onclick="updateDomainFollowStatus('@postItem.DomainKey', 1)" style="cursor: pointer">Follow</a></li>
                                                                            }
                                                                        </ul>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>

                                                        <div class="post-body">
                                                            <div class="labelling">
                                                                <label class="label label-lg label-primary">Real Estate</label>
                                                                @{
                                                                    var reCountry = "Available everywhere";
                                                                    var reArea = "";
                                                                    if (!string.IsNullOrEmpty(postItem.CountryName))
                                                                    {
                                                                        reCountry = postItem.CountryName;
                                                                        reArea = postItem.AreaName ?? "";
                                                                        if (!string.IsNullOrEmpty(reArea))
                                                                        {
                                                                            reCountry = reArea + ", " + reCountry;
                                                                        }
                                                                    }
                                                                }
                                                                <label class="label label-lg label-info">@(reCountry)</label>
                                                            </div>

                                                            <a href="/HighlightPost/HighlightPostDetail?hlPostId=@postItem.Id">
                                                                <div class="highlight-img" style="background-image: url('@postItem.ImageUri');">&nbsp;</div>
                                                            </a>

                                                            <div class="post-options">
                                                                <div class="row">
                                                                    <div class="col-xs-5"><a href="#" class="likecount" style="font-weight: 500; position: relative;">@postItem.LikeStatusString</a></div>
                                                                    <div class="col-xs-7">
                                                                        <ul class="hlopts">
                                                                            <li><a href="javascript:void(0)" onclick="ShowingSharingHLPostPartialView(@postItem.Id)"><i class="fa fa-share-alt"></i></a></li>
                                                                            <li>&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                                                            @if (postItem.IsBookmarkedByCurrentUser)
                                                                            {
                                                                                <li><a style="cursor: pointer" onclick="updateHLBookmarkStatus(@postItem.Id, 2, this)"><i class="fa fa-bookmark red"></i></a></li>
                                                                            }
                                                                            else
                                                                            {
                                                                                <li><a style="cursor: pointer" onclick="updateHLBookmarkStatus(@postItem.Id, 1, this)"><i class="fa fa-bookmark-o"></i></a></li>
                                                                            }
                                                                            @if (!postItem.IsCreatedByCurrentUser)
                                                                            {
                                                                                <li>&nbsp;&nbsp;&nbsp;&nbsp;</li>
                                                                                if (postItem.IsLikedByCurrentUser)
                                                                                {
                                                                                    <li><a style="cursor: pointer" onclick="updateHLLikeStatus(@postItem.Id, 2, this)"><i class="fa fa-heart red"></i></a></li>
                                                                                }
                                                                                else
                                                                                {
                                                                                    <li><a style="cursor: pointer" onclick="updateHLLikeStatus(@postItem.Id, 1, this)"><i class="fa fa-heart-o"></i></a></li>
                                                                                }
                                                                            }
                                                                        </ul>
                                                                    </div>
                                                                </div>
                                                            </div>


                                                            <div class="user-post">
                                                                <h1>@postItem.Title</h1>

                                                                @if (postItem.Tags != null && postItem.Tags.Count > 0)
                                                                {
                                                                    <div class="tag-list">
                                                                        @foreach (var tagItem in postItem.Tags)
                                                                        {
                                                                            <a href="#" class="label label-soft">#@tagItem.Name</a>
                                                                        }
                                                                    </div>
                                                                }

                                                                <br /><br />
                                                                <p style="white-space: pre-line;">
                                                                    @postItem.Content
                                                                </p>

                                                                <br /><br />
                                                                @{
                                                                    var FlagUp = postItem.IsFlaggedByCurrentUser ? "display: none" : "";
                                                                    var FlagDown = postItem.IsFlaggedByCurrentUser ? "" : "display: none";
                                                                }
                                                                <button class="btn btn-info community-button w-auto" onclick="showRealEstateInfoModal(@postItem.Id)"><i class="fa fa-home"></i> &nbsp; Property info</button>
                                                                <button class="btn btn-primary community-button w-auto flag" style="@FlagUp"
                                                                        onclick="updateHLFlagStatus(@postItem.Id, 1, this)">
                                                                    I'm interested
                                                                </button>
                                                                <button class="btn btn-danger community-button w-auto flag" style="@FlagDown"
                                                                        onclick="updateHLFlagStatus(@postItem.Id, 2, this)">
                                                                    I'm not interested
                                                                </button>

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </article>
                                        }
                                    }
                                </div>

                                <div class="btn-group dropup info backtotop animated fadeInUp" style="display: none; position: fixed; bottom: 25px; right: 20px; z-index: 2000;">
                                    <button class="btn btn-info fab totop" onclick="totop();">
                                        <i class="fa fa-chevron-up"></i>
                                    </button>
                                </div>

                            </div>
                            <!-- END Highlights -->
                            <!-- Bookmarks -->
                            <div class="tab-pane fade" id="bookmarks">

                                <div class="row">
                                    <div class="col-xs-12">

                                        <div class="followingblock ani">

                                            <button class="btn btn-primary" onclick="window.location.reload(true);" style="margin-bottom: 20px;"><i class="fa fa-angle-left"></i> &nbsp; All Highlights</button>

                                        </div>
                                    </div>
                                </div>

                                <br /><br /><br />


                            </div>
                            <!-- END Bookmarks -->
                            <!-- Flagged -->
                            <div class="tab-pane fade" id="flagged">

                                <div class="row">
                                    <div class="col-xs-12">

                                        <div class="followingblock ani">

                                            <button class="btn btn-primary" onclick="window.location.reload(true);" style="margin-bottom: 20px;"><i class="fa fa-angle-left"></i> &nbsp; All Highlights</button>

                                        </div>
                                    </div>
                                </div>

                                <br /><br /><br />


                                <div class="activity-overview plain rounded noflags" style="display: none;">
                                    <p style="margin: 0; padding: 0;">Your flagged Highlights will appear here for easy access. Currently there are no items to show.</p>
                                </div>

                            </div>
                            <!-- END Flagged -->

                        </div>




                    </div>

                </div>
                <!-- END Highlights -->



            </div> <!-- ./tab-content -->

        </div>


    </section>
    <!-- ./content -->
</div>
<!-- /.content-wrapper -->
<!--Modals-->
<div class="modal fade right" id="highlights-alltags" role="dialog" aria-labelledby="highlights-alltags"></div>
<div class="modal fade left" id="highlight-article" role="dialog" aria-labelledby="highlight-article"></div>
<div class="modal fade left" id="highlight-realestate-info" role="dialog" aria-labelledby="highlight-realestate-info"></div>
<div class="modal fade left" id="share-content" role="dialog" aria-labelledby="share-content"></div>
    <!--End Modals-->

    <script src="~/Content/DesignStyle/js/jquery.waypoints.min.js"></script>
    <script src="/Content/DesignStyle/js/owl.carousel.min.js"></script>
    <script src="~/Content/DesignStyle/js/ion.rangeSlider.min.js"></script>
    <link href="~/Content/DesignStyle/css/bootstrap-multiselect.css" rel="stylesheet" />
    <script src="~/Content/DesignStyle/js/bootstrap-multiselect.min.js"></script>
    <link rel="stylesheet" href="~/Content/DesignStyle/css/ion.rangeSlider.min.css">
    <script src="~/Content/DesignStyle/js/select2.full.min.js"></script>
    @if (System.Diagnostics.Debugger.IsAttached)
    {
        <script src="~/Scripts/dev/social.highlight.js"></script>
    }
    else
    {
        <script src="~/Scripts/dev/social.highlight.js"></script>
    }
    <script>
        Timeline();
        var $pageIndex = 1;
        $(document).ready(function () {
            //$('.user-options li a').bind('click', function (e) {
            //    e.preventDefault();
            //    $('.user-options li').removeClass('active');
            //    $(this).parent().addClass('active');
            //});

            $(".checkmulti").multiselect({
                includeSelectAllOption: false,
                enableFiltering: false,
                buttonWidth: '100%',
                maxHeight: 400,
                enableClickableOptGroups: true,
                includeSelectAllOption: false
            });

            $(".store-range").ionRangeSlider({
                skin: "flat",
                type: "double",
                min: 0,
                min_interval: 10000,
                max: 10000000,
                from: 0,
                to: 10000000,
                step: 10000,
                prefix: '&#8358;',
                grid: false
            });

            $(".following").owlCarousel({
                items: 5,
                margin: 0,
                nav: false,
                dots: true,
                loop: false,
                autoplay: false,
                autplayHoverPause: true,
                autoplayTimeout: 2000,
            });

            $('.following .item').bind('click', function (e) {
                $('.following .item').not($(this)).removeClass('filterby');

                if ($(this).hasClass('filterby')) {
                    $(this).removeClass('filterby');
                } else {
                    $(this).addClass('filterby');
                }
                resetPageLoad();
                LoadMoreHighlightPost(true);
            });

            $('.ptags li').bind('click', function (e) {
                $('.ptags li').hide();
                $('span', this).addClass('active');

                var searchblock = "#" + $('span', this).html().toLowerCase().replace(/\s/g, '');
                $('.adv-search-link').attr('data-link', searchblock).show();

                $('.revert').show();
                $(this).addClass('animated fadeInLeft').show();
                $('.cattags').addClass('animated fadeIn').css('display', 'flex').show();
                if (!$(this).hasClass('revert')) {
                    resetPageLoad();
                    LoadMoreHighlightPost(true);
                }
            });

            $('.bookmarked').bind('click', function (e) {
                CancelAdvancedSearch();
                $(this).addClass('active');
                $('.flagged').removeClass('active');
                $('#highlighttab, #flagTab').css('display', 'none');
                $('#bookmarkTab').css('display', '');
                resetPageLoad();
                LoadMoreHighlightPost(true);
            });

            $('.flagged').bind('click', function (e) {
                CancelAdvancedSearch();
                $(this).addClass('active');
                $('.bookmarked').removeClass('active');
                $('#highlighttab, #bookmarkTab').css('display', 'none');
                $('#flagTab').css('display', '');
                resetPageLoad();
                LoadMoreHighlightPost(true);
            });

            $('.adv-search-link').bind('click', function () {
                var target = $(this).attr('data-link');
                $(target).slideToggle();
            });

            $('.revert').bind('click', function (e) {
                $('.ptags li span').removeClass('active');
                $('.cattags').removeClass('animated').hide();
                $('.adv-search-link').hide();
                $('.adv-search').hide();
                $('.ptags li').fadeIn();
                $(this).hide();
                $('.cattags li span').removeClass('active');
                resetPageLoad();
                LoadMoreHighlightPost(true);
            });

            $('.cattags li').bind('click', function (e) {
                LoadingOverlay();
                var tagId = $(this).find("span").attr("tagid");
                $('.tag-' + tagId).find("span").toggleClass('active');
                if ($(this).find('i').length == 0) {
                    resetPageLoad();
                    LoadMoreHighlightPost(true);
                }
                LoadingOverlayEnd();
            });

            $('#topjump').waypoint(function (direction) {
                if (direction == "down") {
                    $('.backtotop').show();
                } else {
                    $('.backtotop').hide();
                }
            })

            //$('.hlopts li a[href="#"]').bind('click', function () {
            //    $('i', this).toggleClass('fa-heart-o fa-heart');
            //});

            var flags = 1;

            function flagup() {
                flags++;
                $('#flags').html(flags);
            }

            function flagdown() {
                flags--;
                $('#flags').html(flags);
            }
        })
    </script>
