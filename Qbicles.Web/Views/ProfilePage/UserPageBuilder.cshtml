@using Qbicles.Models.ProfilePage
@model UserPage
@{
    var allowedFileTypes = (string)ViewBag.ImageAcceptedExtensions;
}
<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper qbicle-detail mdv2-wrapper" style="position: relative; background: #f4f6f9;">
    <!-- Main content -->
    <section class="mdv2 dash" data-tooltip-color="teal" data-tooltip-delay="300" data-tooltip-animate-function="spin" style="border-top: 1px solid #f1f1f1;">
        <!-- App bar -->
        <div class="mdv2-col-app" style="margin-bottom: 0; background: #fff;">

            <div data-spy="affix" class="contained-sidebar">

                <div class="activity-overview plain company-overview welcome-info" style="text-align: left !important; flex: none; margin: 0; padding-top: 30px; padding-bottom: 0;">

                    <div class="pull-left" style="margin-bottom: 15px;">
                        <a href="~/Administration/UserProfile?tab=profile-pages" class="btn btn-primary"><i class="fa fa-angle-left"></i> &nbsp; All Pages</a>
                    </div>
                    <div class="clearfix"></div>

                    <br /><br />
                          <h1 style="line-height: 1.2;">My Profile Page Builder</h1>
                    <br />

                    <p style="color: rgba(0, 0, 0, 0.5);">Why waste time and expense building a website many will never see? Instead, build and manage custom pages in your Business Profile to establish yourself in the thriving Qbicles Community.</p>

                    <br /><br />
                    <div class="well custom">
                        <form id="frmpageBuilder">
                            <div class="form-group">
                                <label for="name">Page title</label>
                                <input id="hdfPageID" type="hidden" name="Id" value="@(Model != null&&Model.Id>0?Model.Id:0)" data-bind="Id" />
                                <input type="text" name="PageTitle" class="form-control" required value="@(Model != null&&Model.Id>0?Model.PageTitle:"")" data-bind="PageTitle">
                            </div>


                            <button id="btnDiscardChange" type="button" onclick="window.location.reload(true);" class="btn btn-danger community-button w-auto" disabled>Discard changes</button>
                            <button type="button" onclick="saveUserPageBuilder('IsDraft')" class="btn btn-primary community-button w-auto">Save draft</button>

                            <br /><br /><br />
                            <hr /><br />
                            <label>Publish your page</label><br />
                            <p>
                                When you're happy, you can publish your page using the button below. Published pages immediately appear on your public profile, and can be edited or
                                unpublished at any time.
                            </p>
                            <br />
                            <button type="button" onclick="saveUserPageBuilder('IsActive')" class="btn btn-info community-button w-auto">Publish now</button>
                        </form>
                    </div>
                    <br /><br /><br /><br />
                </div>
            </div>
        </div>
        <!-- END App bar -->
        <!-- Main area -->
        <div class="mdv2-col-dash" style="min-width: 0;">

            <div id="page_templates_builder" class="spacing container" style="max-width: 100%;" data-tooltip-color="teal" data-tooltip-stickto="top" data-tooltip-maxwidth="150">
                @{
                    var showNewStart = Model != null && Model.Blocks.Any();
                }
                <div class="activity-overview plain rounded" id="newstart" style="padding-bottom: 20px;@(!showNewStart?"":"display:none;")">
                    <div class="titlezone">
                        <h5>Getting started</h5>
                    </div>
                    <p>
                        It looks like you haven't added any blocks to your new page yet. Your page will comprise one or more blocks that you can add, and edit as required.
                        To get started, add a block using the button in the lower right of your screen. When you're happy, you can publish your changes using the options in the
                        sidebar.
                    </p>

                    <br />
                    <button class="btn btn-success community-button w-auto" data-toggle="modal" data-target="#personal-pages-blocks-templates"><i class="fa fa-plus"></i> &nbsp; Add my first block</button>
                </div>
                @if (showNewStart)
                {
                    @Html.Partial("_UserBlockTemplate", Model)
                }
            </div>

        </div>

    </section>
    <!-- ./content -->
    <div style="display:none">
        <!-- Hero -->
        <div class="profile-pageblock nvphero1 modify animated bounceIn" data-type="HeroPersonal" id="block-1" style="padding: 0px;display: none;">
            <div class="editing">
                <div class="block-options">
                    <button class="btn btn-warning community-button w-auto btn-edit-block"
                            data-tooltip="Edit this block" style="margin-right:5px">
                        <i class="fa fa-pencil"></i>
                    </button>
                    <button class="btn btn-primary community-button w-auto moveup"
                            data-tooltip="Move this block down the page" style="margin-right:5px">
                        <i class="fa fa-arrow-up"></i>
                    </button>
                    <button class="btn btn-primary community-button w-auto movedown"
                            data-tooltip="Move this block down the page" style="margin-right:5px">
                        <i class="fa fa-arrow-down"></i>
                    </button>
                    <button class="btn btn-danger community-button w-auto btn-delete-block"
                            data-tooltip="Delete this block">
                        <i class="fa fa-trash"></i>
                    </button>
                </div>
            </div>
            <div class="nvphold">
                <div class="nvpleft">
                    <h1 class="block-heading">I'm <span>Sarah</span></h1>
                    <h2  class="block-subheading">I'm an amateur photographer and go-getter who's just dying to show off my latest snaps.</h2>
                    <button class="btn nvpbutton nvp1">Tell me more</button>
                </div>
                <div class="nvpright">
                    <img src="/Content/DesignStyle/img/pagebuilder/demos/happy.jpg" class="nvpfeature">
                </div>
            </div>
        </div>
        <!-- END Hero -->
        <!-- Text and image -->
        <div class="profile-pageblock modify nvtextimg animated bounceIn" data-type="TextAndImage" id="block-3" style="padding: 0; overflow: hidden; display: none;">
            <div class="editing">
                <div class="block-options">
                    <button class="btn btn-warning community-button w-auto btn-edit-block"
                            data-tooltip="Edit this block" style="margin-right:5px">
                        <i class="fa fa-pencil"></i>
                    </button>
                    <button class="btn btn-primary community-button w-auto moveup"
                            data-tooltip="Move this block up the page" style="margin-right:5px">
                        <i class="fa fa-arrow-up"></i>
                    </button>
                    <button class="btn btn-primary community-button w-auto movedown"
                            data-tooltip="Move this block down the page" style="margin-right:5px">
                        <i class="fa fa-arrow-down"></i>
                    </button>
                    <button class="btn btn-danger community-button w-auto btn-delete-block"
                            data-tooltip="Delete this block">
                        <i class="fa fa-trash"></i>
                    </button>
                </div>
            </div>

            <div class="flexing">
                <div class="leftside">
                    <h1 class="block-heading">Text panel <span>with image</span></h1>
                    <p class="block-content" style="padding: 0;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec commodo augue a metus interdum, ac tincidunt sapien semper. Nam consequat lorem a quam viverra, eu ornare eros condimentum. Aenean pulvinar vitae ligula vitae vulputate. Morbi odio eros, tincidunt in luctus eget, facilisis a ante. Etiam lobortis erat at libero ultricies ultrices.</p>

                    <button class="btn nvbutton" style="margin-top: 20px;">Button example</button>
                </div>
                <div class="rightside block-img" style="background-image: url('/Content/DesignStyle/img/pagebuilder/demos/thinking.jpg'); ">&nbsp;</div>
            </div>

        </div>
        <!-- END Text and image -->
        <!-- Gallery -->
        <div class="profile-pageblock modify nvgallery animated bounceIn" data-type="Gallery" id="block-6" style="background: transparent; padding: 0; display: none;">
            <div class="editing">
                <div class="block-options">
                    <button class="btn btn-warning community-button w-auto btn-edit-block"
                            data-tooltip="Edit this block" style="margin-right:5px">
                        <i class="fa fa-pencil"></i>
                    </button>
                    <button class="btn btn-primary community-button w-auto moveup"
                            data-tooltip="Move this block up the page" style="margin-right:5px">
                        <i class="fa fa-arrow-up"></i>
                    </button>
                    <button class="btn btn-primary community-button w-auto movedown"
                            data-tooltip="Move this block down the page" style="margin-right:5px">
                        <i class="fa fa-arrow-down"></i>
                    </button>
                    <button class="btn btn-danger community-button w-auto btn-delete-block"
                            data-tooltip="Delete this block">
                        <i class="fa fa-trash"></i>
                    </button>
                </div>
            </div>

            <div class="owl-carousel owl-theme nvgalleryowl">

                <div class="item">
                    <div class="nvgalleryitem" style="background-image: url('/Content/DesignStyle/img/pagebuilder/demos/bee.jpg');">
                        <div class="nvcaption">
                            <h5 class="block-gal-title">Gallery item title</h5>
                            <p class="block-gal-caption">Image caption content displayed here</p>
                        </div>
                    </div>
                </div>

                <div class="item">
                    <div class="nvgalleryitem" style="background-image: url('/Content/DesignStyle/img/pagebuilder/demos/tree.jpg');">
                        <div class="nvcaption">
                            <h5>Gallery item title</h5>
                            <p>Image caption content displayed here</p>
                        </div>
                    </div>
                </div>

                <div class="item">
                    <div class="nvgalleryitem" style="background-image: url('/Content/DesignStyle/img/pagebuilder/demos/cow.jpg');">
                        <div class="nvcaption">
                            <h5>Gallery item title</h5>
                            <p>Image caption content displayed here</p>
                        </div>
                    </div>
                </div>

                <div class="item">
                    <div class="nvgalleryitem" style="background-image: url('/Content/DesignStyle/img/pagebuilder/demos/woman.jpg');">
                        <div class="nvcaption">
                            <h5>Gallery item title</h5>
                            <p>Image caption content displayed here</p>
                        </div>
                    </div>
                </div>


            </div>

        </div>
        <!-- END Gallery -->
        <!-- Masonry Gallery -->
        <div class="profile-pageblock modify nvpmasonry animated bounceIn" data-type="MasonryGallery" id="block-7" style="display: none;">
            <div class="editing">
                <div class="block-options">
                    <button class="btn btn-warning community-button w-auto btn-edit-block" data-toggle="modal" data-target="#pages-blocks-masonry-edit"
                            data-tooltip="Edit this block" style="margin-right:5px">
                        <i class="fa fa-pencil"></i>
                    </button>
                    <button class="btn btn-primary community-button w-auto moveup"
                            data-tooltip="Move this block up the page" style="margin-right:5px">
                        <i class="fa fa-arrow-up"></i>
                    </button>
                    <button class="btn btn-primary community-button w-auto movedown"
                            data-tooltip="Move this block down the page" style="margin-right:5px">
                        <i class="fa fa-arrow-down"></i>
                    </button>
                    <button class="btn btn-danger community-button w-auto btn-delete-block"
                            data-tooltip="Delete this block">
                        <i class="fa fa-trash"></i>
                    </button>
                </div>
            </div>

            <h1 class="block-heading">My stuff</h1>
            <span class="title-decor nvp1"></span>

            <p class="block-content subtitle">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam facilisis dui at turpis laoreet vestibulum. In pretium libero diam!</p>


            <div class="masonry">
                <div class="masonitem">
                    <a href="~/Content/DesignStyle/img/pagebuilder/demos/masonry7.jpg" class="image-pop" data-fancybox="gallery" title="This document's description content here.">
                        <img src="/Content/DesignStyle/img/pagebuilder/demos/masonry7.jpg" class="img-responsive">
                    </a>
                </div>
                <div class="masonitem">
                    <a href="/Content/DesignStyle/img/pagebuilder/demos/masonry1.jpg" class="image-pop" data-fancybox="gallery" title="This document's description content here.">
                        <img src="/Content/DesignStyle/img/pagebuilder/demos/masonry1.jpg"  class="img-responsive">
                    </a>
                </div>
                <div class="masonitem">
                    <a href="/Content/DesignStyle/img/pagebuilder/demos/masonry2.jpg" class="image-pop" data-fancybox="gallery" title="This document's description content here.">
                        <img src="/Content/DesignStyle/img/pagebuilder/demos/masonry2.jpg" class="img-responsive">
                    </a>
                </div>
                <div class="masonitem">
                    <a href="/Content/DesignStyle/img/pagebuilder/demos/masonry3.jpg" class="image-pop" data-fancybox="gallery" title="This document's description content here.">
                        <img src="/Content/DesignStyle/img/pagebuilder/demos/masonry3.jpg" class="img-responsive">
                    </a>
                </div>
                <div class="masonitem">
                    <a href="/Content/DesignStyle/img/pagebuilder/demos/masonry4.jpg" class="image-pop" data-fancybox="gallery" title="This document's description content here.">
                        <img src="/Content/DesignStyle/img/pagebuilder/demos/masonry4.jpg" class="img-responsive">
                    </a>
                </div>
                <div class="masonitem">
                    <a href="/Content/DesignStyle/img/pagebuilder/demos/masonry5.jpg" class="image-pop" data-fancybox="gallery" title="This document's description content here.">
                        <img src="/Content/DesignStyle/img/pagebuilder/demos/masonry5.jpg" class="img-responsive">
                    </a>
                </div>
                <div class="masonitem">
                    <a href="/Content/DesignStyle/img/pagebuilder/demos/masonry6.jpg" class="image-pop" data-fancybox="gallery" title="This document's description content here.">
                        <img src="/Content/DesignStyle/img/pagebuilder/demos/masonry6.jpg" class="img-responsive">
                    </a>
                </div>
                <div class="masonitem">
                    <a href="/Content/DesignStyle/img/pagebuilder/demos/masonry8.jpg" class="image-pop" data-fancybox="gallery" title="This document's description content here.">
                        <img src="/Content/DesignStyle/img/pagebuilder/demos/masonry8.jpg" class="img-responsive">
                    </a>
                </div>
            </div>


        </div>
        <!-- END Masonry Gallery -->
        <div id="gallery-item-block" class="col item-block" style="margin-bottom: 30px;display:none;">
            <div class="media-folder-item well custom rounded">
                <a href="#" class="image-pop" rel="resources" title="This document's description content here.">
                    <input type="hidden" name="FeaturedImage" value="" />
                    <div class="preview" style="background-image: url('dist/img/pagebuilder/demo/cow.jpg');">
                    </div>
                </a>
                <br />

                <div class="meta_desc">
                    <div class="form-group">
                        <input type="text" maxlength="150" name="Title" class="form-control" value="Gallery item title" placeholder="Image title">
                    </div>
                    <div class="form-group">
                        <textarea class="form-control" maxlength="500" name="Content" style="max-width: 100%; height: 60px;">Image caption content displayed here</textarea>
                    </div>
                </div>
                <button class="btn btn-primary btn-movedown"><i class="fa fa-arrow-down"></i></button>
                <button class="btn btn-primary btn-moveup"><i class="fa fa-arrow-up"></i></button>
                <button class="btn btn-danger btn-delete"><i class="fa fa-trash"></i></button>

            </div>
        </div>
    </div>
    <div class="btn-group options" style="position: fixed; bottom: 25px; right: 20px; z-index: 2000;">
        <button id="btnAddBlock" @(Model!=null&&Model.Id>0?"disabled":"") class="btn btn-success fab" data-tooltip="Add a block" data-tooltip-stickto="left" data-tooltip-color="teal"
                data-toggle="modal" data-target="#personal-pages-blocks-templates">
            <i class="fa fa-plus"></i>
        </button>
    </div>
</div>
<!-- /.content-wrapper -->
<div class="modal fade right" id="personal-pages-blocks-templates" role="dialog" aria-labelledby="personal-pages-blocks-templates" style="display: none;">
    <div class="modal-dialog modal-lg cx" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
                <h5 class="modal-title">Add a block to your page</h5>
            </div>
            <div class="modal-body">

                <div class="flex-grid-half-lg gridfix from-community c1" style="width: 100%;">

                    <div class="col article-feature">
                        <a href="#" data-dismiss="modal" onclick="addBlock('#block-1');">
                            <div class="article-feature-img" style="background: url('/Content/DesignStyle/img/template-preview-hero-personal.jpg'); background-position: center top !important;">&nbsp;</div>
                        </a>

                        <div class="info">
                            <a href="#" data-dismiss="modal" onclick="addBlock('#block-1');">
                                <h1>Hero</h1>
                                <p>A hero generally sits as the main feature of a page, but can also be used to promote a feature, product or anything else.</p>
                            </a>
                        </div>
                    </div>

                    <div class="col article-feature">
                        <a href="#" data-dismiss="modal" onclick="addBlock('#block-3');">
                            <div class="article-feature-img" style="background: url('/Content/DesignStyle/img/template-preview-textimg-personal.jpg'); background-position: center top !important;">&nbsp;</div>
                        </a>

                        <div class="info">
                            <a href="#" data-dismiss="modal" onclick="addBlock('#block-3');">
                                <h1>Text &amp; image</h1>
                                <p>A big, bold content block that features title, text, optional button link, and a decorative image.</p>
                            </a>
                        </div>
                    </div>

                    <div class="col article-feature">
                        <a href="#" data-dismiss="modal" onclick="addBlock('#block-6');">
                            <div class="article-feature-img" style="background: url('/Content/DesignStyle/img/template-preview-gallery.jpg'); background-position: center top !important;">&nbsp;</div>
                        </a>

                        <div class="info">
                            <a href="#" data-dismiss="modal" onclick="addBlock('#block-6');">
                                <h1>Gallery slider</h1>
                                <p>Showcase your portfolio, new office and more in an interactive sliding gallery with zoom overlay support.</p>
                            </a>
                        </div>
                    </div>

                    <div class="col article-feature">
                        <a href="#" data-dismiss="modal" onclick="addBlock('#block-7');">
                            <div class="article-feature-img" style="background: url('/Content/DesignStyle/img/template-preview-masonry.jpg'); background-position: center top !important;">&nbsp;</div>
                        </a>

                        <div class="info">
                            <a href="#" data-dismiss="modal" onclick="addBlock('#block-7');">
                                <h1>Masonry image gallery</h1>
                                <p>Show your image/video content in a masonry grid that automatically adapts to various sizes and aspect ratios.</p>
                            </a>
                        </div>
                    </div>

                </div>


                <br>
                <button class="btn btn-danger" data-dismiss="modal">Cancel</button>

            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div>
<div class="modal fade right" id="pages-blocks-hero-edit" data-backdrop="static" role="dialog" aria-labelledby="pages-blocks-hero-edit" style="display: none;">
    <div class="modal-dialog modal-lg cx" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h5 class="modal-title">Edit Hero block</h5>
            </div>
            <div class="modal-body">

                <div class="well custom">

                    <div class="row">
                        <div class="col-xs-12">
                            <div class="form-group">
                                <label>Accent colour</label><br />
                                <p class="formhelp">
                                    Use accents to highlight bits of text in your heading and/or subheading with a colour of your choice. This can be useful for
                                    adding emphasis, for example. To use highlights, simply wrap the text you want highlighted in span tags when typing their content, for example:  <em><strong>&lt;span&gt;Highlighted text&lt;span&gt;</strong></em>.
                                </p>
                                <input type="color" name="HeroHeadingAccentColour" class="form-control" value="#d0d265">
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-xs-12 col-sm-6">
                            <div class="form-group">
                                <label>Background style</label><br />
                                <select name="HeroBackgroundType" class="form-control select2" style="width: 100%;"
                                        onchange="$('.bgfields').hide(); var target = $(this).val(); $(target).fadeIn();">
                                    <option value="#bgcolour">Colour</option>
                                    <option value="#bggradient" selected>Gradient colour</option>
                                    <option value="#bgimage">Image</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-6">
                            <div class="form-group bgfields" id="bgcolour" style="display: none;">
                                <label for="colour">Colour</label><br />
                                <input type="color" name="HeroBackgroundColour" class="form-control" value="#60a7bd">
                            </div>
                            <div class="form-group bgfields" id="bggradient">
                                <label for="colour">Start/end colours</label><br />
                                <input type="color" name="HeroGradientColour1" class="form-control" value="#1dd8cf">
                                <input type="color" name="HeroGradientColour2" class="form-control" value="#8845f0">
                            </div>
                            <div class="form-group bgfields" id="bgimage" style="display: none;">
                                <label for="colour">Image</label><br />
                                <input type="hidden" name="HeroBackGroundImage" id="hdfHeroBackGroundImage" value="" />
                                <input type="file" class="form-control" id="fileHeroBackGroundImage" onchange="uploadNoPreview('fileHeroBackGroundImage','hdfHeroBackGroundImage')" name="bgimage">
                            </div>
                        </div>
                    </div>


                    <div class="row">
                        <div class="col-xs-12 col-sm-6">
                            <div class="form-group">
                                <label for="HeroHeadingText">Heading</label><br />
                                <input type="text" maxlength="250" name="HeroHeadingText" class="form-control" value="Promotional <span>hero</span>" onkeyup="changetext('#block-1-heading', $(this).val());">
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-3">
                            <label for="headline">Font size</label>
                            <div class="input-group" style="margin-bottom: 15px;">
                                <input type="number" max="68" class="form-control" name="HeroHeadingFontSize" value="38">
                                <span class="input-group-addon">px</span>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-3">
                            <div class="form-group">
                                <label for="HeroHeadingColour">Colour</label><br />
                                <input type="color" name="HeroHeadingColour" class="form-control" value="#ffffff">
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-xs-12 col-sm-6">
                            <div class="form-group">
                                <label for="HeroSubHeadingText">Subheading</label><br />
                                <textarea class="form-control" name="HeroSubHeadingText" style="max-width: 100%; height: 80px;">With a strapline included</textarea>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-3">
                            <label for="HeroSubHeadingFontSize">Font size</label>
                            <div class="input-group" style="margin-bottom: 15px;">
                                <input type="number" max="68" class="form-control" name="HeroSubHeadingFontSize" value="20">
                                <span class="input-group-addon">px</span>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-3">
                            <div class="form-group">
                                <label for="HeroSubHeadingColour">Colour</label><br />
                                <input type="color" maxlength="50" name="HeroSubHeadingColour" class="form-control" value="#ffffff">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12 col-sm-3">
                            <div class="form-group">
                                <label for="colour">Include a button</label><br>
                                <div class="checkbox toggle">
                                    <label>
                                        <input name="IsIncludeButton" data-toggle="toggle" data-onstyle="success" data-on="Yes" data-off="No" type="checkbox" checked>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row btn-options-30">
                        <div class="col-xs-12 col-sm-6">
                            <label for="headline">Button label and colour</label>
                            <div class="input-group" style="margin-bottom: 15px;">
                                <input name="ButtonText" type="text" class="form-control" value="Button example">
                                <span class="input-group-btn">
                                    <input name="ButtonColour" type="color" class="form-control" value="#2990ea">
                                </span>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-6">
                            <div id="btn-options-2">
                                <label for="headline">Button jumps to</label>
                                <select name="ButtonJumpTo" class="form-control select2" style="width: 100%;" onchange="if($(this).val() == 'external') { $('#url10').fadeIn(); } else $('#url10').hide();">
                                    <option value=""></option>
                                    <option value="external">External link</option>
                                    <option value="1">Block 1 (Hero)</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-xs-12" id="url10" style="display: none;">
                            <label for="url">URL</label>
                            <div class="input-group" style="margin-bottom: 15px;">
                                <span class="input-group-addon">https://</span>
                                <input name="ExternalLink" maxlength="250" type="text" onchange="removeHttps(this)" class="form-control">
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-xs-12 col-sm-6">
                            <div class="form-group">
                                <label for="colour">Featured image</label><br />
                                <input type="hidden" name="HeroFeaturedImage" value="" />
                                <img src="" class="preview preview-HeroFeaturedImage" style="max-width: 250px; height: auto;">
                            </div>

                            <button class="btn btn-info" onclick="$('#fileHeroFeaturedImage').trigger('click');"><i class="fa fa-pencil"></i> &nbsp; Change</button>
                            @*<button class="btn btn-danger" onclick="$('.preview-HeroFeaturedImage').attr('src', ''); $('input[name=HeroFeaturedImage]').val('');"><i class="fa fa-trash"></i> &nbsp; Remove</button>*@
                            <input id="fileHeroFeaturedImage" accept="@allowedFileTypes" type="file" class="form-control hidden" onchange="uploadImageBlock(this,'img.preview-HeroFeaturedImage','input[name=HeroFeaturedImage]');">
                        </div>
                    </div>

                </div>


                <br />
                <button class="btn btn-primary btn-update-block" type="button">Done</button>

            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<div class="modal fade right" id="pages-blocks-textimg-edit" data-backdrop="static" role="dialog" aria-labelledby="pages-blocks-textimg-edit" style="display: none;">
    <div class="modal-dialog modal-lg cx" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h5 class="modal-title">Edit Text &amp; image block</h5>
            </div>
            <div class="modal-body">

                <div class="well custom">

                    <div class="row">
                        <div class="col-xs-12">
                            <div class="form-group">
                                <label>Accent colour</label><br />
                                <p class="formhelp">
                                    Use accents to highlight bits of text in your heading and/or subheading with a colour of your choice. This can be useful for
                                    adding emphasis, for example. To use highlights, simply wrap the text you want highlighted in span tags when typing their content, for example:  <em><strong>&lt;span&gt;Highlighted text&lt;span&gt;</strong></em>.
                                </p>
                                <input type="color" name="HeadingAccentColour" maxlength="50" class="form-control" value="#d0d265">
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-xs-12 col-sm-6">
                            <div class="form-group">
                                <label for="HeadingText">Heading</label><br />
                                <input type="text" name="HeadingText" maxlength="150" class="form-control" value="Text panel <span>with image</span>">
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-3">
                            <label for="HeadingFontSize">Font size</label>
                            <div class="input-group" style="margin-bottom: 15px;">
                                <input type="number" max="68" class="form-control" name="HeadingFontSize" value="32">
                                <span class="input-group-addon">px</span>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-3">
                            <div class="form-group">
                                <label for="headline">Colour</label><br />
                                <input type="color" name="HeadingColour" maxlength="50" class="form-control" value="#224157">
                            </div>
                        </div>
                    </div>



                    <div class="row">
                        <div class="col-xs-12 col-sm-6">
                            <div class="form-group">
                                <label for="colour">Content</label><br />
                                <textarea name="Content" class="form-control" style="max-width: 100%; height: 120px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec commodo augue a metus interdum, ac tincidunt sapien semper. Nam consequat lorem a quam viverra, eu ornare eros condimentum. Aenean pulvinar vitae ligula vitae vulputate. Morbi odio eros, tincidunt in luctus eget, facilisis a ante. Etiam lobortis erat at libero ultricies ultrices.</textarea>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-3">
                            <label for="headline">Font size</label>
                            <div class="input-group" style="margin-bottom: 15px;">
                                <input type="number" max="68" class="form-control" name="ContentFontSize" value="16">
                                <span class="input-group-addon">px</span>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-3">
                            <div class="form-group">
                                <label for="headline">Colour</label><br />
                                <input name="ContentColour" type="color" maxlength="50" class="form-control" value="#333333">
                            </div>
                        </div>
                    </div>



                    <div class="row">
                        <div class="col-xs-12 col-sm-3">
                            <div class="form-group">
                                <label for="colour">Include a button</label><br />
                                <div class="checkbox toggle">
                                    <label>
                                        <input name="IsIncludeButton" data-toggle="toggle" data-onstyle="success" data-on="Yes" data-off="No" type="checkbox" checked>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row btn-options-30">
                        <div class="col-xs-12 col-sm-6">
                            <label for="headline">Button label and colour</label>
                            <div class="input-group" style="margin-bottom: 15px;">
                                <input name="ButtonText" type="text" class="form-control" value="Button example">
                                <span class="input-group-btn">
                                    <input name="ButtonColour" type="color" class="form-control" value="#2990ea">
                                </span>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-6">
                            <div id="btn-options-2">
                                <label for="headline">Button jumps to</label>
                                <select name="ButtonJumpTo" class="form-control select2" style="width: 100%;" onchange="if($(this).val() == 'external') { $('#url2').fadeIn(); } else $('#url2').hide();">
                                    <option value=""></option>
                                    <option value="external">External link</option>
                                    <option value="1">Block 1 (Hero)</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-xs-12" id="url2" style="display: none;">
                            <label for="url">URL</label>
                            <div class="input-group" style="margin-bottom: 15px;">
                                <span class="input-group-addon">https://</span>
                                <input name="ExternalLink" maxlength="250" type="text" onchange="removeHttps(this)" class="form-control">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12">
                            <div class="form-group">
                                <label for="colour">Featured image</label><br />
                                <input name="FeaturedImage" type="hidden" value="" />
                                <img src="/Content/DesignStyle/img/pagebuilder/demos/thinking.jpg" class="preview preview-FeaturedImage" style="max-width: 250px; height: auto;">
                            </div>

                            <button class="btn btn-info" onclick="$('#filetextimgfeature').trigger('click');" style="margin-top: 10px;"><i class="fa fa-pencil"></i> &nbsp; Change image</button>
                            <input type="file" accept="@allowedFileTypes" class="form-control hidden" id="filetextimgfeature" onchange="uploadImageBlock(this,'#pages-blocks-textimg-edit img.preview-FeaturedImage','#pages-blocks-textimg-edit input[name=FeaturedImage]');">
                        </div>
                    </div>

                </div>


                <br />
                <button class="btn btn-primary btn-update-block" type="button">Done</button>

            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<div class="modal fade right" id="pages-blocks-gallery-edit" data-backdrop="static" role="dialog" aria-labelledby="pages-blocks-gallery-edit">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h5 class="modal-title">Edit Gallery block</h5>
            </div>
            <div class="modal-body">

                <div class="row">
                    <div class="col-xs-12">
                        <ul class="app_subnav admintabs" style="padding-top: 0;">
                            <li class="active"><a href="#gallery-current" data-toggle="tab">My gallery items</a></li>
                            <li><a href="#gallery-new" id="gallerynew" data-toggle="tab">Add new</a></li>
                        </ul>
                    </div>
                </div>
                <br />
                <div class="tab-content">
                    <!-- Existing -->
                    <div class="tab-pane fade in active" id="gallery-current">

                        <div class="well custom rounded" id="gallery-intro">
                            <div class="activity-overview plain">
                                <label>Build your gallery</label>
                                <br />
                                <p style="margin: 0 0 15px 0;">
                                    You don't have any gallery items yet! Click "Add new" above to start adding your images. Once you've added your first image it'll appear here
                                    for you to manage it.
                                </p>
                                <br />
                                <button class="btn btn-success community-button w-auto" onclick="$('#gallerynew').trigger('click');"><i class="fa fa-plus"></i> &nbsp; Add items</button>
                            </div>
                        </div>


                        <div class="flex-grid-fluid-lg" id="gallery-items" style="display: none;">
                        </div>
                    </div>
                    <!-- END Existing -->
                    <!-- Add new -->
                    <div class="tab-pane fade" id="gallery-new">
                        <div id="drag-drop-area" data-allowedFileTypes="@allowedFileTypes" onclick="$('#gallery-intro').hide(); $('#gallery-items').show();"></div>
                        <button id="btnResetUppy" style="display:none"></button>
                    </div>
                    <!-- END Add new -->
                </div> <!-- ./tab-content -->

                <br />
                <button class="btn btn-primary btn-update-block" type="button">Done</button>

            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<div class="modal fade right" id="pages-blocks-masonry-edit" data-backdrop="static" role="dialog" aria-labelledby="pages-blocks-masonry-edit" style="display: none;">
    <div class="modal-dialog modal-lg cx" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
                <h5 class="modal-title">Edit Masonry Gallery block</h5>
            </div>
            <div class="modal-body">

                <div class="row">
                    <div class="col-xs-12">
                        <ul class="app_subnav admintabs" style="padding-top: 0;">
                            <li class="active"><a href="#masonry-options" data-toggle="tab">Block settings</a></li>
                            <li><a href="#masonry-current" data-toggle="tab">My gallery items</a></li>
                            <li><a href="#masonry-new" id="masonrynew" data-toggle="tab">Add new</a></li>
                        </ul>
                    </div>
                </div>

                <br>




                <div class="tab-content">


                    <!-- Setup -->
                    <div class="tab-pane fade in active" id="masonry-options">

                        <div class="well custom" style="padding-bottom: 5px;">

                            <div class="row">
                                <div class="col-xs-12">
                                    <div class="form-group">
                                        <label>Accent colour</label><br>
                                        <p class="formhelp">
                                            Use accents to highlight bits of text in your heading and/or subheading with a colour of your choice. This can be useful for
                                            adding emphasis, for example. To use highlights, simply wrap the text you want highlighted in span tags when typing their content, for example:  <em><strong>&lt;span&gt;Highlighted text&lt;span&gt;</strong></em>.
                                        </p>
                                        <input type="color" name="HeadingAccentColour" class="form-control" value="#4ccba9">
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-xs-12 col-sm-6">
                                    <div class="form-group">
                                        <label for="colour">Heading</label><br>
                                        <input type="text" name="HeadingText" class="form-control" value="My stuff">
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-3">
                                    <label for="headline">Font size</label>
                                    <div class="input-group" style="margin-bottom: 15px;">
                                        <input type="number" max="68" class="form-control" name="HeadingFontSize" value="32">
                                        <span class="input-group-addon">px</span>
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-3">
                                    <div class="form-group">
                                        <label for="headline">Colour</label><br>
                                        <input type="color" name="HeadingColour" class="form-control" value="#000000">
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-xs-12 col-sm-6">
                                    <div class="form-group">
                                        <label for="colour">Subheading</label><br>
                                        <textarea class="form-control" name="SubHeadingText" style="max-width: 100%; height: 80px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam facilisis dui at turpis laoreet vestibulum. In pretium libero diam!</textarea>
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-3">
                                    <label for="headline">Font size</label>
                                    <div class="input-group" style="margin-bottom: 15px;">
                                        <input type="number" max="68" class="form-control" name="SubHeadingFontSize" onchange="fontsize('#block-7-subtitle', $(this).val());" value="16">
                                        <span class="input-group-addon">px</span>
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-3">
                                    <div class="form-group">
                                        <label for="headline">Colour</label><br>
                                        <input type="color" name="SubHeadingColour" class="form-control" value="#889aa7">
                                    </div>
                                </div>
                            </div>

                        </div>

                    </div>
                    <!-- END Setup -->
                    <!-- Existing -->
                    <div class="tab-pane fade" id="masonry-current">

                        <div class="well custom rounded" id="masonry-intro">
                            <div class="activity-overview plain">
                                <label>Build your gallery</label>
                                <br>
                                <p style="margin: 0 0 15px 0;">
                                    You don't have any gallery items yet! Click "Add new" above to start adding your images. Once you've added your first image it'll appear here
                                    for you to manage it.
                                </p>
                                <br>
                                <button class="btn btn-success community-button w-auto" onclick="$('#masonrynew').trigger('click');"><i class="fa fa-plus"></i> &nbsp; Add items</button>
                            </div>
                        </div>


                        <div class="flex-grid-fluid-lg" id="masonry-items" style="display: none;">
                        </div>


                    </div>
                    <!-- END Existing -->
                    <!-- Add new -->
                    <div class="tab-pane fade" id="masonry-new">


                        <div id="drag-drop-area-1" onclick="$('#masonry-intro').hide(); $('#masonry-items').show();">
                        </div>
                        <button id="btnResetUppy" style="display:none"></button>

                    </div>
                    <!-- END Add new -->



                </div> <!-- ./tab-content -->

                <br>
                <button class="btn btn-primary btn-update-block">Done</button>

            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div>
@{
    <link href="~/Content/DesignStyle/css/fontawesome-iconpicker.min.css" rel = "stylesheet"/>
    <script src="~/Content/DesignStyle/js/fontawesome-iconpicker.min.js"></script>
    <link href="https://releases.transloadit.com/uppy/v1.30.0/uppy.min.css" rel="stylesheet">
    <script src="https://releases.transloadit.com/uppy/v1.30.0/uppy.min.js"></script>
    <script src="~/Content/DesignStyle/js/masonry.pkgd.min.js"></script>
    <script src="~/Scripts/dev/uppy.s3.js"></script>
    if (Model != null && Model.Id > 0)
    {
        <script>
            $(window).load(function () {
                var $gallerylist = $('#page_templates_builder .masonry');
                $gallerylist.css('height', '');
                $gallerylist.masonry('destroy');
                $gallerylist.removeData('masonry'); // This line to remove masonry's data
                $gallerylist.masonry({
                    columnWidth: 420,
                    isFitWidth: true,
                    itemSelector: '.masonitem'
                });
            });
        </script>
    }
    if (System.Diagnostics.Debugger.IsAttached)
    {
        <script src="~/Scripts/dev/userpagebuilder.js"></script>
    }
    else
    {
        <script src="~/Scripts/dev/userpagebuilder.min.js"></script>
    }
    <script src="~/Content/DesignStyle/js/imagesloaded.pkgd.min.js"></script >
}